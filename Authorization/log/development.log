  [1m[35m (88.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (88.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsers (20160710100352)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "nickname" varchar, "provider" varchar, "url" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20160710100352"]]
  [1m[35m (90.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDeviseToUsers (20160710100412)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "email" varchar DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" varchar DEFAULT '' NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" varchar[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" datetime[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" datetime[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "sign_in_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "current_sign_in_at" datetime[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "last_sign_in_at" datetime[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "current_sign_in_ip" varchar[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "last_sign_in_ip" varchar[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20160710100412"]]
  [1m[35m (93.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-07-10 10:04:22 UTC], ["updated_at", 2016-07-10 10:04:22 UTC]]
  [1m[35m (65.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
Started GET "/" for ::1 at 2016-07-10 13:09:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (26.0ms)
Completed 500 Internal Server Error in 579ms (ActiveRecord: 0.9ms)


  
ActionView::Template::Error (undefined method `user_omniauth_authorize_path' for #<#<Class:0x00000003ba18c0>:0x00000003b93f68>
Did you mean?  users_omniauth_callbacks_vkontakte_path):
    37:               %h3 Providers
    38:               %ul.nav.nav-list
    39:                 - if !user_signed_in?
    40:                   %li= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook)
    41:                   %li= link_to "Sign in with Vkontakte", user_omniauth_authorize_path(:vkontakte)
    42:     
    43:       %footer
  
app/views/layouts/application.html.haml:40:in `_app_views_layouts_application_html_haml___3008844835444797296_30864340'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.3ms)
Started GET "/" for ::1 at 2016-07-10 13:09:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 500 Internal Server Error in 75ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (undefined method `user_omniauth_authorize_path' for #<#<Class:0x00000003ba18c0>:0x007f95edda8100>
Did you mean?  users_omniauth_callbacks_vkontakte_path):
    37:               %h3 Providers
    38:               %ul.nav.nav-list
    39:                 - if !user_signed_in?
    40:                   %li= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook)
    41:                   %li= link_to "Sign in with Vkontakte", user_omniauth_authorize_path(:vkontakte)
    42:     
    43:       %footer
  
app/views/layouts/application.html.haml:40:in `_app_views_layouts_application_html_haml___3008844835444797296_70140958676460'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.1ms)
Started GET "/" for ::1 at 2016-07-10 13:09:57 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
Completed 200 OK in 64ms (Views: 62.3ms | ActiveRecord: 0.2ms)


Started GET "/images/favicon.ico" for ::1 at 2016-07-10 13:09:58 +0300
  
ActionController::RoutingError (No route matches [GET] "/images/favicon.ico"):
  
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [20 times] (4.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (4.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (28.2ms)
Started GET "/" for ::1 at 2016-07-10 13:15:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (24.3ms)
Completed 200 OK in 253ms (Views: 245.1ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 13:15:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.0ms)
Completed 500 Internal Server Error in 120ms (ActiveRecord: 0.3ms)


  
ActionView::Template::Error (undefined method `user_omniauth_authorize_path' for #<#<Class:0x00000003b6f8c0>:0x000000029dfc18>
Did you mean?  user_facebook_omniauth_authorize_path):
    37:               %h3 Providers
    38:               %ul.nav.nav-list
    39:                 - if !user_signed_in?
    40:                   %li= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook)
    41:                   %li= link_to "Sign in with Vkontakte", user_omniauth_authorize_path(:vkontakte)
    42:     
    43:       %footer
  
app/views/layouts/application.html.haml:40:in `_app_views_layouts_application_html_haml___479983698664931597_21628820'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (15.9ms)
Started GET "/" for ::1 at 2016-07-10 13:16:09 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.5ms)
Completed 200 OK in 22ms (Views: 20.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:16:11 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:16:12 +0300
Started GET "/" for ::1 at 2016-07-10 13:17:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.8ms)
Completed 200 OK in 33ms (Views: 31.4ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 13:18:11 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
Completed 200 OK in 25ms (Views: 23.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:18:13 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:18:13 +0300
Started GET "/users/auth/facebook/callback?code=AQDVziIgcXHTHPrjlR4u1CZ44N5QqEZmxCY5GE2S1sM9t1lbIUhCllLZWXFAeknL8xaIQevYzLQ-euSaO77pTVqP6GqYzS4GSDeA12Sgfn7Ujh4wEoux7zrqutWQMWc--CyCwY2xaXEAyQh5At2ZgU7L5lEdYUjWpI5_8iryqlkpQGRGNX5IajPXkL2Jt8r3YgNKWNAF3DX2_3AyktpEFBPqlkT-dAo3hTj34SEKklZAN8vJqzTb_sFEasc1eKGtDcBS1_g2qUgsDD-VKyZhUdsRqaQ3xGEWtLl-0dXmJ2QFSoqmJoabFcYZhTqBO2fr35UqsnnZHxDZ5sR4Nmzol3yF&state=3ed9d652e81992624001cd51bba79252cd69a5bdd4833f2a" for ::1 at 2016-07-10 13:18:19 +0300
  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/controllers/users/omniauth_callbacks_controller.rb:14: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/users/omniauth_callbacks_controller.rb:14: syntax error, unexpected end-of-input, expecting keyword_end
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (22.6ms)
Started GET "/users/auth/facebook/callback?code=AQDVziIgcXHTHPrjlR4u1CZ44N5QqEZmxCY5GE2S1sM9t1lbIUhCllLZWXFAeknL8xaIQevYzLQ-euSaO77pTVqP6GqYzS4GSDeA12Sgfn7Ujh4wEoux7zrqutWQMWc--CyCwY2xaXEAyQh5At2ZgU7L5lEdYUjWpI5_8iryqlkpQGRGNX5IajPXkL2Jt8r3YgNKWNAF3DX2_3AyktpEFBPqlkT-dAo3hTj34SEKklZAN8vJqzTb_sFEasc1eKGtDcBS1_g2qUgsDD-VKyZhUdsRqaQ3xGEWtLl-0dXmJ2QFSoqmJoabFcYZhTqBO2fr35UqsnnZHxDZ5sR4Nmzol3yF&state=3ed9d652e81992624001cd51bba79252cd69a5bdd4833f2a" for ::1 at 2016-07-10 13:18:57 +0300
  
LoadError (Unable to autoload constant Users::OmniauthCallbacksController, expected /home/mikhail/Projects/Ruby/rails_projects/authprovider/app/controllers/users/omniauth_callbacks_controller.rb to define it):
  
activesupport (5.0.0) lib/active_support/dependencies.rb:512:in `load_missing_constant'
activesupport (5.0.0) lib/active_support/dependencies.rb:203:in `const_missing'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `const_get'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `block in constantize'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `each'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `inject'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `constantize'
devise (4.2.0) lib/devise/omniauth.rb:19:in `block in <top (required)>'
omniauth (1.3.1) lib/omniauth/strategy.rb:479:in `fail!'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:78:in `rescue in callback_phase'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:67:in `callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:71:in `block in callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:135:in `with_authorization_code!'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:70:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.8ms)
Started GET "/" for ::1 at 2016-07-10 13:19:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.1ms)
Completed 200 OK in 36ms (Views: 34.3ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:19:17 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:19:17 +0300
Started GET "/users/auth/facebook/callback?code=AQA1TfkzeU6L7iRLyzCCs6sddlg2teqtCMfjOknZrQ6Ejoj2yl2qVNQ03BItjki4EjJw24t9HUKPQhexQYmTtEhKaf7Jm-m_AO-2Oz1-3iANV6RdF_ui9L5BsKESaZpvVeI7hqeY6ZgvpfJtcid9cG-J0jigD0KoDdSjxr6X7AtYc4St-5VIEq6I0wurzEeO7o1Xc_wCuThz9DG5Hy-URRkQ_n5uthZq6l429gRGHwqdTwasIeCwrnxBWIZC0-8mst1QYC7Vt08yEnlkmMr-XwCxu0W1ugpIMkjkJiKJ8WFfdDDPjStqa_9adBoMmTL0xlD5NJW2xM8n8nfnazbyNZqv&state=3b30ee4908ed5365dc67c4dd1eab03baf338e967ae55b586" for ::1 at 2016-07-10 13:19:17 +0300
  
LoadError (Unable to autoload constant Users::OmniauthCallbacksController, expected /home/mikhail/Projects/Ruby/rails_projects/authprovider/app/controllers/users/omniauth_callbacks_controller.rb to define it):
  
activesupport (5.0.0) lib/active_support/dependencies.rb:512:in `load_missing_constant'
activesupport (5.0.0) lib/active_support/dependencies.rb:203:in `const_missing'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `const_get'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `block in constantize'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `each'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `inject'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `constantize'
activesupport (5.0.0) lib/active_support/dependencies.rb:583:in `get'
activesupport (5.0.0) lib/active_support/dependencies.rb:614:in `constantize'
actionpack (5.0.0) lib/action_dispatch/http/request.rb:93:in `controller_class'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:44:in `controller'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:30:in `serve'
actionpack (5.0.0) lib/action_dispatch/routing/mapper.rb:16:in `block in <class:Constraints>'
actionpack (5.0.0) lib/action_dispatch/routing/mapper.rb:46:in `serve'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:725:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:408:in `call_app!'
omniauth (1.3.1) lib/omniauth/strategy.rb:362:in `callback_phase'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:75:in `callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:71:in `block in callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:135:in `with_authorization_code!'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:70:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.1ms)
Started GET "/users/auth/facebook/callback?code=AQA1TfkzeU6L7iRLyzCCs6sddlg2teqtCMfjOknZrQ6Ejoj2yl2qVNQ03BItjki4EjJw24t9HUKPQhexQYmTtEhKaf7Jm-m_AO-2Oz1-3iANV6RdF_ui9L5BsKESaZpvVeI7hqeY6ZgvpfJtcid9cG-J0jigD0KoDdSjxr6X7AtYc4St-5VIEq6I0wurzEeO7o1Xc_wCuThz9DG5Hy-URRkQ_n5uthZq6l429gRGHwqdTwasIeCwrnxBWIZC0-8mst1QYC7Vt08yEnlkmMr-XwCxu0W1ugpIMkjkJiKJ8WFfdDDPjStqa_9adBoMmTL0xlD5NJW2xM8n8nfnazbyNZqv&state=3b30ee4908ed5365dc67c4dd1eab03baf338e967ae55b586" for ::1 at 2016-07-10 13:20:48 +0300
  
LoadError (Unable to autoload constant Users::OmniauthCallbacksController, expected /home/mikhail/Projects/Ruby/rails_projects/authprovider/app/controllers/users/omniauth_callbacks_controller.rb to define it):
  
activesupport (5.0.0) lib/active_support/dependencies.rb:512:in `load_missing_constant'
activesupport (5.0.0) lib/active_support/dependencies.rb:203:in `const_missing'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `const_get'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `block in constantize'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `each'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `inject'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `constantize'
devise (4.2.0) lib/devise/omniauth.rb:19:in `block in <top (required)>'
omniauth (1.3.1) lib/omniauth/strategy.rb:479:in `fail!'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:78:in `rescue in callback_phase'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:67:in `callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:71:in `block in callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:135:in `with_authorization_code!'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:70:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.6ms)
Started GET "/users/auth/facebook/callback?code=AQA1TfkzeU6L7iRLyzCCs6sddlg2teqtCMfjOknZrQ6Ejoj2yl2qVNQ03BItjki4EjJw24t9HUKPQhexQYmTtEhKaf7Jm-m_AO-2Oz1-3iANV6RdF_ui9L5BsKESaZpvVeI7hqeY6ZgvpfJtcid9cG-J0jigD0KoDdSjxr6X7AtYc4St-5VIEq6I0wurzEeO7o1Xc_wCuThz9DG5Hy-URRkQ_n5uthZq6l429gRGHwqdTwasIeCwrnxBWIZC0-8mst1QYC7Vt08yEnlkmMr-XwCxu0W1ugpIMkjkJiKJ8WFfdDDPjStqa_9adBoMmTL0xlD5NJW2xM8n8nfnazbyNZqv&state=3b30ee4908ed5365dc67c4dd1eab03baf338e967ae55b586" for ::1 at 2016-07-10 13:20:50 +0300
  
LoadError (Unable to autoload constant Users::OmniauthCallbacksController, expected /home/mikhail/Projects/Ruby/rails_projects/authprovider/app/controllers/users/omniauth_callbacks_controller.rb to define it):
  
activesupport (5.0.0) lib/active_support/dependencies.rb:512:in `load_missing_constant'
activesupport (5.0.0) lib/active_support/dependencies.rb:203:in `const_missing'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `const_get'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `block in constantize'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `each'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `inject'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `constantize'
devise (4.2.0) lib/devise/omniauth.rb:19:in `block in <top (required)>'
omniauth (1.3.1) lib/omniauth/strategy.rb:479:in `fail!'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:78:in `rescue in callback_phase'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:67:in `callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:71:in `block in callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:135:in `with_authorization_code!'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:70:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.6ms)
Started GET "/users/auth/facebook/callback?code=AQA1TfkzeU6L7iRLyzCCs6sddlg2teqtCMfjOknZrQ6Ejoj2yl2qVNQ03BItjki4EjJw24t9HUKPQhexQYmTtEhKaf7Jm-m_AO-2Oz1-3iANV6RdF_ui9L5BsKESaZpvVeI7hqeY6ZgvpfJtcid9cG-J0jigD0KoDdSjxr6X7AtYc4St-5VIEq6I0wurzEeO7o1Xc_wCuThz9DG5Hy-URRkQ_n5uthZq6l429gRGHwqdTwasIeCwrnxBWIZC0-8mst1QYC7Vt08yEnlkmMr-XwCxu0W1ugpIMkjkJiKJ8WFfdDDPjStqa_9adBoMmTL0xlD5NJW2xM8n8nfnazbyNZqv&state=3b30ee4908ed5365dc67c4dd1eab03baf338e967ae55b586" for ::1 at 2016-07-10 13:21:39 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQA1TfkzeU6L7iRLyzCCs6sddlg2teqtCMfjOknZrQ6Ejoj2yl2qVNQ03BItjki4EjJw24t9HUKPQhexQYmTtEhKaf7Jm-m_AO-2Oz1-3iANV6RdF_ui9L5BsKESaZpvVeI7hqeY6ZgvpfJtcid9cG-J0jigD0KoDdSjxr6X7AtYc4St-5VIEq6I0wurzEeO7o1Xc_wCuThz9DG5Hy-URRkQ_n5uthZq6l429gRGHwqdTwasIeCwrnxBWIZC0-8mst1QYC7Vt08yEnlkmMr-XwCxu0W1ugpIMkjkJiKJ8WFfdDDPjStqa_9adBoMmTL0xlD5NJW2xM8n8nfnazbyNZqv", "state"=>"3b30ee4908ed5365dc67c4dd1eab03baf338e967ae55b586"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 16ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:21:40 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.1ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (22.5ms)
Completed 200 OK in 57ms (Views: 46.4ms | ActiveRecord: 0.6ms)


Started GET "/users/images/favicon.ico" for ::1 at 2016-07-10 13:21:40 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/images/favicon.ico"):
  
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.9ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [22 times] (4.4ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (23.5ms)
Started GET "/" for ::1 at 2016-07-10 13:21:49 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
Completed 200 OK in 30ms (Views: 28.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:21:51 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:21:51 +0300
Started GET "/users/auth/facebook/callback?code=AQB7EeWJ3tYS2nD3zWvMQpUfvxS6xJXq5r8zRqqaS62zdJ7dESs4PcgtjSUzR370TPvMja20RL3ZQrIcFc1cguUETJ3HHuVA65RA-hoGGSPkrf0Y7jzWneupGfFWWG02GZZm_e6k_dXuBqZ7cWedx4rxE-MM83-DiLUoC2FImZ2642B7jG_D3YY_WB9KLuwZ7FVL0cl_5s1N4t6pl-UHS3a7tIUjwi67v7CJAnqIMJDfgpXxadT_rXQQEGVYWnOnMOQd75TTOg4HX-0xXS3IVu8rwg0IHvr9XC7i-zk1zkKoHGXcl1J9cXKHz75PnEtQfdAoYQJquInwQW2Gvpu_64VY&state=74f5e877ce109ee869bfb7d6cc0eab8b1baaced5e8352153" for ::1 at 2016-07-10 13:21:51 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB7EeWJ3tYS2nD3zWvMQpUfvxS6xJXq5r8zRqqaS62zdJ7dESs4PcgtjSUzR370TPvMja20RL3ZQrIcFc1cguUETJ3HHuVA65RA-hoGGSPkrf0Y7jzWneupGfFWWG02GZZm_e6k_dXuBqZ7cWedx4rxE-MM83-DiLUoC2FImZ2642B7jG_D3YY_WB9KLuwZ7FVL0cl_5s1N4t6pl-UHS3a7tIUjwi67v7CJAnqIMJDfgpXxadT_rXQQEGVYWnOnMOQd75TTOg4HX-0xXS3IVu8rwg0IHvr9XC7i-zk1zkKoHGXcl1J9cXKHz75PnEtQfdAoYQJquInwQW2Gvpu_64VY", "state"=>"74f5e877ce109ee869bfb7d6cc0eab8b1baaced5e8352153"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:12:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
Started GET "/users/auth/facebook/callback?code=AQB7EeWJ3tYS2nD3zWvMQpUfvxS6xJXq5r8zRqqaS62zdJ7dESs4PcgtjSUzR370TPvMja20RL3ZQrIcFc1cguUETJ3HHuVA65RA-hoGGSPkrf0Y7jzWneupGfFWWG02GZZm_e6k_dXuBqZ7cWedx4rxE-MM83-DiLUoC2FImZ2642B7jG_D3YY_WB9KLuwZ7FVL0cl_5s1N4t6pl-UHS3a7tIUjwi67v7CJAnqIMJDfgpXxadT_rXQQEGVYWnOnMOQd75TTOg4HX-0xXS3IVu8rwg0IHvr9XC7i-zk1zkKoHGXcl1J9cXKHz75PnEtQfdAoYQJquInwQW2Gvpu_64VY&state=74f5e877ce109ee869bfb7d6cc0eab8b1baaced5e8352153" for ::1 at 2016-07-10 13:22:51 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQB7EeWJ3tYS2nD3zWvMQpUfvxS6xJXq5r8zRqqaS62zdJ7dESs4PcgtjSUzR370TPvMja20RL3ZQrIcFc1cguUETJ3HHuVA65RA-hoGGSPkrf0Y7jzWneupGfFWWG02GZZm_e6k_dXuBqZ7cWedx4rxE-MM83-DiLUoC2FImZ2642B7jG_D3YY_WB9KLuwZ7FVL0cl_5s1N4t6pl-UHS3a7tIUjwi67v7CJAnqIMJDfgpXxadT_rXQQEGVYWnOnMOQd75TTOg4HX-0xXS3IVu8rwg0IHvr9XC7i-zk1zkKoHGXcl1J9cXKHz75PnEtQfdAoYQJquInwQW2Gvpu_64VY", "state"=>"74f5e877ce109ee869bfb7d6cc0eab8b1baaced5e8352153"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:22:52 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.8ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 33ms (Views: 23.4ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:22:57 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:22:57 +0300
Started GET "/users/auth/facebook/callback?code=AQCIxpwGaQU69FpPFVThP9f-prDVLRCOBpoApadY-bd1aihhOzUzlgRZaQ0PVMpJzEag3jD4CmIt4ex94DbciQm_-9paA6jDp-t-54n3UDMsJhKNkW0TCQDsew1_zbhWOQJ1TGTdDxH92zCiLAvHkY5Ak8GYxUAwX3rZtAUQTOTTuB77u0r6Ko53WRinUUKJUPLDMlDeuPEgtZ65kMBUUrZd_W942C9OFbj8fTc67E54qFKYDNsqlxUE-c05ssmyAyoCoW6tbxCLciPpLQUgTrxhFyvbIu-kRv9psiD_GuOWaYlYS5_sgqGLo8bXEClgTsGc_X1J2E3qUIpvh-1q2Rjf&state=39c2f63d655886d7182b6cd5f5a1149fafdb8c0979ba07a4" for ::1 at 2016-07-10 13:22:58 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCIxpwGaQU69FpPFVThP9f-prDVLRCOBpoApadY-bd1aihhOzUzlgRZaQ0PVMpJzEag3jD4CmIt4ex94DbciQm_-9paA6jDp-t-54n3UDMsJhKNkW0TCQDsew1_zbhWOQJ1TGTdDxH92zCiLAvHkY5Ak8GYxUAwX3rZtAUQTOTTuB77u0r6Ko53WRinUUKJUPLDMlDeuPEgtZ65kMBUUrZd_W942C9OFbj8fTc67E54qFKYDNsqlxUE-c05ssmyAyoCoW6tbxCLciPpLQUgTrxhFyvbIu-kRv9psiD_GuOWaYlYS5_sgqGLo8bXEClgTsGc_X1J2E3qUIpvh-1q2Rjf", "state"=>"39c2f63d655886d7182b6cd5f5a1149fafdb8c0979ba07a4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:22:58 UTC], ["updated_at", 2016-07-10 10:22:58 UTC]]
  [1m[35m (102.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:22:58 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:22:58 UTC], ["last_sign_in_at", 2016-07-10 10:22:58 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 1]]
  [1m[35m (62.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 175ms (ActiveRecord: 165.6ms)


Started GET "/" for ::1 at 2016-07-10 13:22:58 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 44.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:09 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"4Or+doNDR2Tkfy+Z1nNKzF6hk2t7Lckpc+6Simn0+l6r/HAJU2T7bUGsGqfch9SvjX/j99stPLASpCkDlB6EaA=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 13:23:09 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 29ms (Views: 27.8ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:12 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:13 +0300
Started GET "/users/auth/facebook/callback?code=AQC3j4bfGbcmK6DxKCeUrSt_gJaRFrFv5QdZR9xXZYHQR1hmvmXKU4GP5o7PxHbhSfUDediJ_nSEnbFfSrjmlR8J0BOaiTwkvlzLPE2bR9O5tfyfFIvkRVX3vBP7B2L367P8TVrr91OXMvAliCIXzL91X5CG0vKH2fbYCuPm81RRTPHM-KFIy5zHoGREP8c1hM8XY3MeCWl154lbYMvp1LvsMYOEK6d1EY_yTiC1xVHBvC44EBS9WGn4CrP7FhYemvSvmQbqrM7XsCF1bPVaZNteFwP0Dsvy969Z9E9MkJPPtFy_NlgBhTlgHwYhSsEYhnWBMcHcYEzgM4hbyitBWOLk&state=4eb8a383c4c3854148f9457e587a6df0da22bc2ea5ad9c4c" for ::1 at 2016-07-10 13:23:13 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC3j4bfGbcmK6DxKCeUrSt_gJaRFrFv5QdZR9xXZYHQR1hmvmXKU4GP5o7PxHbhSfUDediJ_nSEnbFfSrjmlR8J0BOaiTwkvlzLPE2bR9O5tfyfFIvkRVX3vBP7B2L367P8TVrr91OXMvAliCIXzL91X5CG0vKH2fbYCuPm81RRTPHM-KFIy5zHoGREP8c1hM8XY3MeCWl154lbYMvp1LvsMYOEK6d1EY_yTiC1xVHBvC44EBS9WGn4CrP7FhYemvSvmQbqrM7XsCF1bPVaZNteFwP0Dsvy969Z9E9MkJPPtFy_NlgBhTlgHwYhSsEYhnWBMcHcYEzgM4hbyitBWOLk", "state"=>"4eb8a383c4c3854148f9457e587a6df0da22bc2ea5ad9c4c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 10:23:13 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 10:23:13 UTC], ["id", 1]]
  [1m[35m (64.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 71ms (ActiveRecord: 65.6ms)


Started GET "/" for ::1 at 2016-07-10 13:23:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 43ms (Views: 41.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/1" for ::1 at 2016-07-10 13:23:16 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"mpiPQWdzj2e0OcAhZf6QhZ0r6raa59QJKjN2/58Jo6+3jHiFPdo/93FbTfGLlbv1AgznHqUlB88HyVe0LriATA==", "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35m (115.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 135ms (ActiveRecord: 116.2ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:19 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:20 +0300
Started GET "/users/auth/facebook/callback?code=AQBG_rLg5TYHs1ehpONBZOlGX0_S9DQhTKdNSIER7HMr2D56reDPXJQgeR9p9LaVjid_Wx0DrB2lyS-TbR6Mt_eZ-zEiMbE67VoPBSgBMGBHuByGMnTi42svbJ5HgxNt792MPWqvjbIadDjb_yvQdoVTQ5wQAuYtwpETA2y5abC7jU5SV3OAORwNvQncCLRZbKKc_AIJ17UQPaccVcQ0cm-5D76fUD7VnTNZ9SJ_Bdk1qKz-5cqp4WTHypQ7zOYyVa1XiWLfZu8q3auoXI4FOPsnfbG62m96R-t__z9tq1Sp1g7EcIiIo_NK89lai6do4Bh8pngW6bblx4ocFjTCZhZT&state=84ca6d12bbdf4bd6ab4b19076234d4c8691bada027f6a278" for ::1 at 2016-07-10 13:23:20 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBG_rLg5TYHs1ehpONBZOlGX0_S9DQhTKdNSIER7HMr2D56reDPXJQgeR9p9LaVjid_Wx0DrB2lyS-TbR6Mt_eZ-zEiMbE67VoPBSgBMGBHuByGMnTi42svbJ5HgxNt792MPWqvjbIadDjb_yvQdoVTQ5wQAuYtwpETA2y5abC7jU5SV3OAORwNvQncCLRZbKKc_AIJ17UQPaccVcQ0cm-5D76fUD7VnTNZ9SJ_Bdk1qKz-5cqp4WTHypQ7zOYyVa1XiWLfZu8q3auoXI4FOPsnfbG62m96R-t__z9tq1Sp1g7EcIiIo_NK89lai6do4Bh8pngW6bblx4ocFjTCZhZT", "state"=>"84ca6d12bbdf4bd6ab4b19076234d4c8691bada027f6a278"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:23:20 UTC], ["updated_at", 2016-07-10 10:23:20 UTC]]
  [1m[35m (63.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:23:20 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:23:20 UTC], ["last_sign_in_at", 2016-07-10 10:23:20 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 2]]
  [1m[35m (68.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 139ms (ActiveRecord: 133.2ms)


Started GET "/" for ::1 at 2016-07-10 13:23:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:29 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 29.1ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.2ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 58ms (Views: 56.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ImYa+IBb5PYVq8+rnICJlY+6UWCQbB30RChu59vQj4P495d3a4a3Ed8hPKaEUPtWY5FXPGDCghQCMOOhBxfruw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ImYa+IBb5PYVq8+rnICJlY+6UWCQbB30RChu59vQj4P495d3a4a3Ed8hPKaEUPtWY5FXPGDCghQCMOOhBxfruw=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ImYa+IBb5PYVq8+rnICJlY+6UWCQbB30RChu59vQj4P495d3a4a3Ed8hPKaEUPtWY5FXPGDCghQCMOOhBxfruw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ImYa+IBb5PYVq8+rnICJlY+6UWCQbB30RChu59vQj4P495d3a4a3Ed8hPKaEUPtWY5FXPGDCghQCMOOhBxfruw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ImYa+IBb5PYVq8+rnICJlY+6UWCQbB30RChu59vQj4P495d3a4a3Ed8hPKaEUPtWY5FXPGDCghQCMOOhBxfruw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 13:23:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 33ms (Views: 31.2ms | ActiveRecord: 0.2ms)


Started DELETE "/users/2" for ::1 at 2016-07-10 13:23:36 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"QANJuo2tOXeTbZE8JIL3Lzw2yQTMwMLfH4k8cXdM8jpgkSghfbjLS998/gSZFbKYHmr/7/Pu78/Heq7bEwTeNw==", "id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35m (111.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 115ms (ActiveRecord: 112.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
Completed 200 OK in 23ms (Views: 21.7ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:37 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:38 +0300
Started GET "/users/auth/facebook/callback?code=AQDi0Lw0HteBzbLZUNv6No8roZrkgbJojEgUbP4cfc8WIjPVAKYT1m_faKxv_p5lKiuB0HeSduWmSe7AxPP8vSlQDn1Qzh52_j8BKTO3nD2GPs3updZdhvd9zMrMYDwfYJSmuOz5mpUh2GEL6w8saIYm-3ic5Wq5pyckS07n-FQ202C34XUTcvHNa0t5O2O9gfX7UpWOaT9iCZ6msKojn5-WgaOIvooHQhouK62HByBewmI8b7NMYanZ-G-e_jj-2jRSIEJ7UaWqJa9gmZgRkfK8shfK8TUpbntt-M8L_AePhMh43ic0UBWLy5Gia7EcNscYaIW0ISfrBFiHtAPl73Js&state=6c8486584306fbbae620c5ed1d223c250128d03c99813cec" for ::1 at 2016-07-10 13:23:38 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDi0Lw0HteBzbLZUNv6No8roZrkgbJojEgUbP4cfc8WIjPVAKYT1m_faKxv_p5lKiuB0HeSduWmSe7AxPP8vSlQDn1Qzh52_j8BKTO3nD2GPs3updZdhvd9zMrMYDwfYJSmuOz5mpUh2GEL6w8saIYm-3ic5Wq5pyckS07n-FQ202C34XUTcvHNa0t5O2O9gfX7UpWOaT9iCZ6msKojn5-WgaOIvooHQhouK62HByBewmI8b7NMYanZ-G-e_jj-2jRSIEJ7UaWqJa9gmZgRkfK8shfK8TUpbntt-M8L_AePhMh43ic0UBWLy5Gia7EcNscYaIW0ISfrBFiHtAPl73Js", "state"=>"6c8486584306fbbae620c5ed1d223c250128d03c99813cec"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:23:38 UTC], ["updated_at", 2016-07-10 10:23:38 UTC]]
  [1m[35m (65.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:23:38 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:23:38 UTC], ["last_sign_in_at", 2016-07-10 10:23:38 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 3]]
  [1m[35m (64.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 136ms (ActiveRecord: 129.8ms)


Started GET "/" for ::1 at 2016-07-10 13:23:38 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/3" for ::1 at 2016-07-10 13:23:40 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"dh3dqycutVk8AIGSSTjWk9n2grLecmqevFSTI+WGWi33TtQJSRlS/S1Ul4vE/KGbD3o29uyZ5/ZF/Widz/d9Zg==", "id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (116.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 120ms (ActiveRecord: 117.0ms)


Started GET "/users" for ::1 at 2016-07-10 13:23:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 28.0ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:41 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:23:42 +0300
Started GET "/users/auth/facebook/callback?code=AQCHEkNl47TzI9wrAzlhlPHFLn34T60FkmaxU17aypQFKB_31nk8UQOVnTgeScWjgN8201X_N_mOgdGoc6ds9DomDbD6XH5-3ce6TNL7jaVwFkHw9a4QR0cJenYZ4WdDV9X3SpAkEx84-_5NNmXMRiXp48zbumLHvntl3W74RosvBDjgaSfLP9ncNuWIRfTTWeoi43S3gF4yBxPx0A2Lh8xPz4fHARYj9sORprcX3A8a764iSvlNv7eKRfP1NdhPjYbTmgj60_R0PQKcG4Nu6fOT2mANQAoxuvac5j5nLnA2tYhUfjFZ6EZKr8vh8yt3ujDW9s8uDFHnjK15sJnRR5sw&state=3b3bc17c471003a7cecea20176cf6d47ef8c261a148e9f30" for ::1 at 2016-07-10 13:23:42 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCHEkNl47TzI9wrAzlhlPHFLn34T60FkmaxU17aypQFKB_31nk8UQOVnTgeScWjgN8201X_N_mOgdGoc6ds9DomDbD6XH5-3ce6TNL7jaVwFkHw9a4QR0cJenYZ4WdDV9X3SpAkEx84-_5NNmXMRiXp48zbumLHvntl3W74RosvBDjgaSfLP9ncNuWIRfTTWeoi43S3gF4yBxPx0A2Lh8xPz4fHARYj9sORprcX3A8a764iSvlNv7eKRfP1NdhPjYbTmgj60_R0PQKcG4Nu6fOT2mANQAoxuvac5j5nLnA2tYhUfjFZ6EZKr8vh8yt3ujDW9s8uDFHnjK15sJnRR5sw", "state"=>"3b3bc17c471003a7cecea20176cf6d47ef8c261a148e9f30"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:23:42 UTC], ["updated_at", 2016-07-10 10:23:42 UTC]]
  [1m[35m (61.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:23:42 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:23:42 UTC], ["last_sign_in_at", 2016-07-10 10:23:42 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 4]]
  [1m[35m (64.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 132ms (ActiveRecord: 126.1ms)


Started GET "/" for ::1 at 2016-07-10 13:23:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 26.1ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:23:45 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"TIEFPywJsM239UPpymjQ9/Ui6+YGM+ua3dhlBEMV7XlIJXOFcWlCK4+gOR9ABEMAANBUFudzdDFJvbxJvesaXw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 13:23:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 27ms (Views: 25.8ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 13:24:58 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.8ms)
Completed 200 OK in 37ms (Views: 35.5ms | ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 13:25:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.6ms)
Completed 200 OK in 41ms (Views: 38.9ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 13:25:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
Completed 200 OK in 33ms (Views: 31.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:25:20 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:25:21 +0300
Started GET "/users/auth/facebook/callback?code=AQDeSEHeyy_KP9qLoDvBcfM0hYo-QUi98SXe0cOAKzHYxsqc96ehISw2Pvprr5f-P0QD9JU6EqQXIkE-3-rDH14wiycbCXW6_3ygfHoBuOxkR1CrQw_R0rMo5n3KSB2RjTBfsXnbvODmA6J9IG9QMg9ZOWpdRairsR4QiNZAjyaD5blZL6o7KcbAHlazDwXvwubxjSj9hUNacTJcvDNoUMkMUabyU5-2tGIibr813NN7vk_u8wRUmEcSFCALJE3UeQmddBkfwdWACCuh-JZuCqIcjwAXfDU-INDhKsHJCxBvimDDZ279bZ6h5mrlzMB3vU3VIvAYLLu6XFlxDdvfe4RF&state=527ba8147feee3e74d1d2ff94bd295d0322b1378dd4a3e08" for ::1 at 2016-07-10 13:25:21 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDeSEHeyy_KP9qLoDvBcfM0hYo-QUi98SXe0cOAKzHYxsqc96ehISw2Pvprr5f-P0QD9JU6EqQXIkE-3-rDH14wiycbCXW6_3ygfHoBuOxkR1CrQw_R0rMo5n3KSB2RjTBfsXnbvODmA6J9IG9QMg9ZOWpdRairsR4QiNZAjyaD5blZL6o7KcbAHlazDwXvwubxjSj9hUNacTJcvDNoUMkMUabyU5-2tGIibr813NN7vk_u8wRUmEcSFCALJE3UeQmddBkfwdWACCuh-JZuCqIcjwAXfDU-INDhKsHJCxBvimDDZ279bZ6h5mrlzMB3vU3VIvAYLLu6XFlxDdvfe4RF", "state"=>"527ba8147feee3e74d1d2ff94bd295d0322b1378dd4a3e08"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 10:25:21 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 10:25:21 UTC], ["id", 4]]
  [1m[35m (108.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 113ms (ActiveRecord: 108.9ms)


Started GET "/" for ::1 at 2016-07-10 13:25:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (24.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 55ms (Views: 54.1ms | ActiveRecord: 0.4ms)


Started DELETE "/users/4" for ::1 at 2016-07-10 13:25:28 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"Ksgc8axYYlEjiQTVMja94XKZfR556z/eC0YTME6lBDAP99oAx8ExKRbygvpwqX5SJtHKj+FHYYf0jXgDya4zMw==", "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 4]]
  [1m[35m (54.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 58ms (ActiveRecord: 55.1ms)


Started GET "/users" for ::1 at 2016-07-10 13:25:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.2ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:25:30 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:25:30 +0300
Started GET "/users/auth/facebook/callback?code=AQA0br9d_HPXqIqJ4RdJB5FO_cxUJTl5Z6Ss7fIB1alGoMLF0q9KnB86dS-mIcY-iJF6rRWwQxPqUKhIYLM9gWaVFrVFVA2SI5KSmH4sKN_zgBaG8ghtcUJKqjF_UDYwSamVVQ7WoBhkv-CbAJhHd54KLKSg3yD9rXnjUWZNwZDSapK2AtIdO5uSTDQ_BMjo9MzROa2IDjn4m0zmmdAYsaYKwhWs3qMgkqPo_DCpLuKxchMp5kRvqwFWwleIbBiOzD_INUvpP4HOa_3Y7mF6oOehJsBnSRvHwXd-YKjf634oE0bWnUSziwTGHeZ8HPwSkXRAaV4MqsXZIa7LCIB8LyoO&state=7a6876027d705b9684943be9694baad9ea41995d6833b1b4" for ::1 at 2016-07-10 13:25:30 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQA0br9d_HPXqIqJ4RdJB5FO_cxUJTl5Z6Ss7fIB1alGoMLF0q9KnB86dS-mIcY-iJF6rRWwQxPqUKhIYLM9gWaVFrVFVA2SI5KSmH4sKN_zgBaG8ghtcUJKqjF_UDYwSamVVQ7WoBhkv-CbAJhHd54KLKSg3yD9rXnjUWZNwZDSapK2AtIdO5uSTDQ_BMjo9MzROa2IDjn4m0zmmdAYsaYKwhWs3qMgkqPo_DCpLuKxchMp5kRvqwFWwleIbBiOzD_INUvpP4HOa_3Y7mF6oOehJsBnSRvHwXd-YKjf634oE0bWnUSziwTGHeZ8HPwSkXRAaV4MqsXZIa7LCIB8LyoO", "state"=>"7a6876027d705b9684943be9694baad9ea41995d6833b1b4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)


  
NoMethodError (undefined method `facebook' for nil:NilClass):
  
app/models/user.rb:15:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/facebook/callback?code=AQA0br9d_HPXqIqJ4RdJB5FO_cxUJTl5Z6Ss7fIB1alGoMLF0q9KnB86dS-mIcY-iJF6rRWwQxPqUKhIYLM9gWaVFrVFVA2SI5KSmH4sKN_zgBaG8ghtcUJKqjF_UDYwSamVVQ7WoBhkv-CbAJhHd54KLKSg3yD9rXnjUWZNwZDSapK2AtIdO5uSTDQ_BMjo9MzROa2IDjn4m0zmmdAYsaYKwhWs3qMgkqPo_DCpLuKxchMp5kRvqwFWwleIbBiOzD_INUvpP4HOa_3Y7mF6oOehJsBnSRvHwXd-YKjf634oE0bWnUSziwTGHeZ8HPwSkXRAaV4MqsXZIa7LCIB8LyoO&state=7a6876027d705b9684943be9694baad9ea41995d6833b1b4" for ::1 at 2016-07-10 13:29:35 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQA0br9d_HPXqIqJ4RdJB5FO_cxUJTl5Z6Ss7fIB1alGoMLF0q9KnB86dS-mIcY-iJF6rRWwQxPqUKhIYLM9gWaVFrVFVA2SI5KSmH4sKN_zgBaG8ghtcUJKqjF_UDYwSamVVQ7WoBhkv-CbAJhHd54KLKSg3yD9rXnjUWZNwZDSapK2AtIdO5uSTDQ_BMjo9MzROa2IDjn4m0zmmdAYsaYKwhWs3qMgkqPo_DCpLuKxchMp5kRvqwFWwleIbBiOzD_INUvpP4HOa_3Y7mF6oOehJsBnSRvHwXd-YKjf634oE0bWnUSziwTGHeZ8HPwSkXRAaV4MqsXZIa7LCIB8LyoO", "state"=>"7a6876027d705b9684943be9694baad9ea41995d6833b1b4"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:29:35 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.8ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 34ms (Views: 23.8ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 13:29:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
Completed 200 OK in 29ms (Views: 27.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:29:41 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:29:41 +0300
Started GET "/users/auth/facebook/callback?code=AQDfNFFzO3ijOIh97UeZ15jhfiThdS1vOTy2hyTHECwqQgLRvdzi6qcBui8cPSn4Puii8ipIcHG89Y4ke3CQyDTy1-4D3vnbw3RxIAnAjKnVBz1LL9cwTb5z9AwZp6raEbnu4pXlVtU6vDcCS4I1bRUJO8Q7o15sZEIyDpeG9yVVuuZe3-gVE-0uTpmyDMdtD4NJO8-TwctuXUagm7vqABGl_xlPvL3sblBNzx0j9-SdQTBvWS6K1IFlxu30O_mK8TSSvFGxd18RIDnoxAjkif__L4tgi3IdxsmlPr-HMELhYHMdlCFX6gFR3Yi4x9ux_JKF1je3Z7CZC6edZNu5bDI8&state=54900f6aaa27c5f3405c0c8493e2220cae1e8d4ee2ef63bb" for ::1 at 2016-07-10 13:29:41 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDfNFFzO3ijOIh97UeZ15jhfiThdS1vOTy2hyTHECwqQgLRvdzi6qcBui8cPSn4Puii8ipIcHG89Y4ke3CQyDTy1-4D3vnbw3RxIAnAjKnVBz1LL9cwTb5z9AwZp6raEbnu4pXlVtU6vDcCS4I1bRUJO8Q7o15sZEIyDpeG9yVVuuZe3-gVE-0uTpmyDMdtD4NJO8-TwctuXUagm7vqABGl_xlPvL3sblBNzx0j9-SdQTBvWS6K1IFlxu30O_mK8TSSvFGxd18RIDnoxAjkif__L4tgi3IdxsmlPr-HMELhYHMdlCFX6gFR3Yi4x9ux_JKF1je3Z7CZC6edZNu5bDI8", "state"=>"54900f6aaa27c5f3405c0c8493e2220cae1e8d4ee2ef63bb"}
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `find_for_facebook_oauth' for #<Class:0x007f91a8cd8d90>
Did you mean?  find_for_authentication):
  
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.1ms)
Started GET "/users/auth/facebook/callback?code=AQDfNFFzO3ijOIh97UeZ15jhfiThdS1vOTy2hyTHECwqQgLRvdzi6qcBui8cPSn4Puii8ipIcHG89Y4ke3CQyDTy1-4D3vnbw3RxIAnAjKnVBz1LL9cwTb5z9AwZp6raEbnu4pXlVtU6vDcCS4I1bRUJO8Q7o15sZEIyDpeG9yVVuuZe3-gVE-0uTpmyDMdtD4NJO8-TwctuXUagm7vqABGl_xlPvL3sblBNzx0j9-SdQTBvWS6K1IFlxu30O_mK8TSSvFGxd18RIDnoxAjkif__L4tgi3IdxsmlPr-HMELhYHMdlCFX6gFR3Yi4x9ux_JKF1je3Z7CZC6edZNu5bDI8&state=54900f6aaa27c5f3405c0c8493e2220cae1e8d4ee2ef63bb" for ::1 at 2016-07-10 13:30:01 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQDfNFFzO3ijOIh97UeZ15jhfiThdS1vOTy2hyTHECwqQgLRvdzi6qcBui8cPSn4Puii8ipIcHG89Y4ke3CQyDTy1-4D3vnbw3RxIAnAjKnVBz1LL9cwTb5z9AwZp6raEbnu4pXlVtU6vDcCS4I1bRUJO8Q7o15sZEIyDpeG9yVVuuZe3-gVE-0uTpmyDMdtD4NJO8-TwctuXUagm7vqABGl_xlPvL3sblBNzx0j9-SdQTBvWS6K1IFlxu30O_mK8TSSvFGxd18RIDnoxAjkif__L4tgi3IdxsmlPr-HMELhYHMdlCFX6gFR3Yi4x9ux_JKF1je3Z7CZC6edZNu5bDI8", "state"=>"54900f6aaa27c5f3405c0c8493e2220cae1e8d4ee2ef63bb"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:30:01 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.9ms)
Completed 200 OK in 45ms (Views: 34.5ms | ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 13:30:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:30:06 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:30:06 +0300
Started GET "/users/auth/facebook/callback?code=AQBlGYZPc9IMVNI3zobDPLQV-gzgIMU0R3u7V1Tbc3N8NjpiAIwEBIa_Fhq_9CeSgDnp26gHlYnQypLiVpk3tPHEsjODh_-9gewQqbi5OyE61rGhFLTdvjx0ya2hHNzqTKLVcmBbpeTL7ylmsUNoW-K7EFsjazBhqXofVc3SGlWfOnF1B58otXjCYiF1U1aFmn9NLWY64A8OktghEldq7B8yr0djJrAumqk7kIqXql5JD66dZTThR7JzE6xdhP0GyHkYIxw--2MKnKN6j2DkdM3qxWYZyMA5DaJjurD6mTiSSx-9SZPQPSCCPFQgzn27pH2HNePC7hHdT3mLeHrQohSK&state=dcd900a2154f174b9f8364d78604ab973a3d568e77ec4af2" for ::1 at 2016-07-10 13:30:06 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBlGYZPc9IMVNI3zobDPLQV-gzgIMU0R3u7V1Tbc3N8NjpiAIwEBIa_Fhq_9CeSgDnp26gHlYnQypLiVpk3tPHEsjODh_-9gewQqbi5OyE61rGhFLTdvjx0ya2hHNzqTKLVcmBbpeTL7ylmsUNoW-K7EFsjazBhqXofVc3SGlWfOnF1B58otXjCYiF1U1aFmn9NLWY64A8OktghEldq7B8yr0djJrAumqk7kIqXql5JD66dZTThR7JzE6xdhP0GyHkYIxw--2MKnKN6j2DkdM3qxWYZyMA5DaJjurD6mTiSSx-9SZPQPSCCPFQgzn27pH2HNePC7hHdT3mLeHrQohSK", "state"=>"dcd900a2154f174b9f8364d78604ab973a3d568e77ec4af2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)


  
NoMethodError (undefined method `facebook' for nil:NilClass):
  
app/models/user.rb:15:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.5ms)
Started GET "/" for ::1 at 2016-07-10 13:32:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.7ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:32:17 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:32:17 +0300
Started GET "/users/auth/facebook/callback?code=AQCJ8WYL6yao2lizwOj5cosHTzaCoX1YIYpHitHThxyJQY8n1aqVlWRlYoQIvcyg7tnA6PBmOMgZRtbSKKqIUUJoIvmRO8Te9xhVnyZMaRZIJlQ2McuL0y6Zx_MbLqCO1htQ-ozbVMj5Am7DurFDGjUKvqaQBcsBJUF_q3UQB1XtEzdcC-q9EbofAAQ34Mv4TEzcSzUCuDISOe1KKZsCeNY0IUOWyPk68Gst07B30rVgApAIXoe4-ejWlGFaNCibtmZhkCFuGgk6VZPOSMEAebO_zV2pi84gYa1WNVCNolWX8uvD6ew9448YeXAwCDZ1I03JVRwdGgqDQOZ79g-pH4qd&state=e703325d61f73565e8fed69901b37b188ca661d3569663a1" for ::1 at 2016-07-10 13:32:17 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCJ8WYL6yao2lizwOj5cosHTzaCoX1YIYpHitHThxyJQY8n1aqVlWRlYoQIvcyg7tnA6PBmOMgZRtbSKKqIUUJoIvmRO8Te9xhVnyZMaRZIJlQ2McuL0y6Zx_MbLqCO1htQ-ozbVMj5Am7DurFDGjUKvqaQBcsBJUF_q3UQB1XtEzdcC-q9EbofAAQ34Mv4TEzcSzUCuDISOe1KKZsCeNY0IUOWyPk68Gst07B30rVgApAIXoe4-ejWlGFaNCibtmZhkCFuGgk6VZPOSMEAebO_zV2pi84gYa1WNVCNolWX8uvD6ew9448YeXAwCDZ1I03JVRwdGgqDQOZ79g-pH4qd", "state"=>"e703325d61f73565e8fed69901b37b188ca661d3569663a1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)


  
NoMethodError (undefined method `facebook' for nil:NilClass):
  
app/models/user.rb:15:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.3ms)
Started GET "/" for ::1 at 2016-07-10 13:33:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.5ms)
Completed 200 OK in 31ms (Views: 29.2ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:34:00 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:34:00 +0300
Started GET "/users/auth/facebook/callback?code=AQC240cRuNYSeOQ2n9yz156wb6M9ByRIg_rK7zdGfWCHqkg-FclMhuV8rxjAs9Xxyjst24OvDtv9clJlmQbZTbUmTq4iTJXbVEY9wWhdR3sXrztTsZQH69Igp-S_cGjZGwbkjGZtUWkYVb1S0k_YoF_HJVGg-6V92IV_L1YMlMsJJDtQ4zuZWv5VwYj87nMRzsKAdf5UnCgTie5TMyKJfs2iOCycArSICAn8q6h9KHDCSOlNFFpuwStXtTVZ5r0Zg5J2KTATPx_PLEbI-pYBv35ywoV9fAuM71b_oLy8DnCHMs3IeaJMbMyd44LNMQUpQO5GswJkuK9s5EzHrR9tF80O&state=f0ab6d93ba3f93fda005fb0a8ac0e5d1ff0b4e73df4663dc" for ::1 at 2016-07-10 13:34:00 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC240cRuNYSeOQ2n9yz156wb6M9ByRIg_rK7zdGfWCHqkg-FclMhuV8rxjAs9Xxyjst24OvDtv9clJlmQbZTbUmTq4iTJXbVEY9wWhdR3sXrztTsZQH69Igp-S_cGjZGwbkjGZtUWkYVb1S0k_YoF_HJVGg-6V92IV_L1YMlMsJJDtQ4zuZWv5VwYj87nMRzsKAdf5UnCgTie5TMyKJfs2iOCycArSICAn8q6h9KHDCSOlNFFpuwStXtTVZ5r0Zg5J2KTATPx_PLEbI-pYBv35ywoV9fAuM71b_oLy8DnCHMs3IeaJMbMyd44LNMQUpQO5GswJkuK9s5EzHrR9tF80O", "state"=>"f0ab6d93ba3f93fda005fb0a8ac0e5d1ff0b4e73df4663dc"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `facebook' for nil:NilClass):
  
app/models/user.rb:15:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.1ms)
Started GET "/" for ::1 at 2016-07-10 13:34:52 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.0ms)
Completed 200 OK in 32ms (Views: 30.1ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:34:54 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:34:54 +0300
Started GET "/users/auth/facebook/callback?code=AQDmAjsEYrTleq7YQEiVKUeUETReQ0SmUGWEkNWJTUOBeQG24UMgyaPAmZyWesseaK8S4GS6qotZKo-ZrFgVfrKTECSi-jp5adWGEvjhwE7rwUec2m3w6UVqrPgvI4do1iTdB01joWh6Eh_99xEZA-XbGexB3vGFJ9gE5ak4j0ojBFMIHOgHejHEjt2PgsWm5wvRw77QYK9FQaEkbGq03w6--cXB6r98gDUguOvVktQCfJLJ6gXkoRx9gY05fia6jpQmtbI131Y6gQqI6W7PIoQ3Q67odNQevBu_nAIXKs3HtD4nA9KKJ_cx1s0KUYCswRSIUgIT8DnaaKYvm1kCajW9&state=e77f26a44e6f7014fe71b654ee45790194c6e5cab5c47d06" for ::1 at 2016-07-10 13:34:54 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDmAjsEYrTleq7YQEiVKUeUETReQ0SmUGWEkNWJTUOBeQG24UMgyaPAmZyWesseaK8S4GS6qotZKo-ZrFgVfrKTECSi-jp5adWGEvjhwE7rwUec2m3w6UVqrPgvI4do1iTdB01joWh6Eh_99xEZA-XbGexB3vGFJ9gE5ak4j0ojBFMIHOgHejHEjt2PgsWm5wvRw77QYK9FQaEkbGq03w6--cXB6r98gDUguOvVktQCfJLJ6gXkoRx9gY05fia6jpQmtbI131Y6gQqI6W7PIoQ3Q67odNQevBu_nAIXKs3HtD4nA9KKJ_cx1s0KUYCswRSIUgIT8DnaaKYvm1kCajW9", "state"=>"e77f26a44e6f7014fe71b654ee45790194c6e5cab5c47d06"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:12:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.2ms)
Started GET "/" for ::1 at 2016-07-10 13:35:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
Completed 200 OK in 25ms (Views: 23.8ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:35:21 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:35:21 +0300
Started GET "/users/auth/facebook/callback?code=AQBhDcdD3Kkp1Wuo-pD_Qwd_3mLq55lSesaEzUvWJlDrKtw0KzTx0Y24UWZhGNb_u_52X0ZsRnoqhOWWpMTQg6H_RKXpl55eyfnGIlFtDez77I5Yf2703CrTwYksrv-Ww2v86DVvFAQsdQ5WGq7EnolhUcBYT_9_0OEgQfGW7t8lZ3UJEVwWd4l0WzochvfyPIG1UXf7qwBy81F6hvMUOR-6Pb2Wc7Oii9EpLrsQIPUVeljrkBQZSxUhbUuHODrZLfeu7a9nhOmxJUzOV1E1msVrEvu-1ZiMrkzXhPG3u6UjcWtIDTgMsq2_Y0lCs7EkxC4FNz1RZacDruRyR_DsITtW&state=c2dc6aef551beab8780a93f8d43994a98f958bcadbccdff7" for ::1 at 2016-07-10 13:35:21 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBhDcdD3Kkp1Wuo-pD_Qwd_3mLq55lSesaEzUvWJlDrKtw0KzTx0Y24UWZhGNb_u_52X0ZsRnoqhOWWpMTQg6H_RKXpl55eyfnGIlFtDez77I5Yf2703CrTwYksrv-Ww2v86DVvFAQsdQ5WGq7EnolhUcBYT_9_0OEgQfGW7t8lZ3UJEVwWd4l0WzochvfyPIG1UXf7qwBy81F6hvMUOR-6Pb2Wc7Oii9EpLrsQIPUVeljrkBQZSxUhbUuHODrZLfeu7a9nhOmxJUzOV1E1msVrEvu-1ZiMrkzXhPG3u6UjcWtIDTgMsq2_Y0lCs7EkxC4FNz1RZacDruRyR_DsITtW", "state"=>"c2dc6aef551beab8780a93f8d43994a98f958bcadbccdff7"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:12:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.6ms)
Started GET "/" for ::1 at 2016-07-10 13:41:04 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.9ms)
Completed 200 OK in 37ms (Views: 34.8ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:41:06 +0300
Processing by Users::OmniauthCallbacksController#passthru as HTML
DEPRECATION WARNING: `render :text` is deprecated because it does not actually render a `text/plain` response. Switch to `render plain: 'plain text'` to render as `text/plain`, `render html: '<strong>HTML</strong>'` to render as `text/html`, or `render body: 'raw'` to match the deprecated behavior and render with the default Content-Type, which is `text/plain`. (called from passthru at /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/controllers/devise/omniauth_callbacks_controller.rb:5)
  Rendering text template
  Rendered text template (0.0ms)
Completed 404 Not Found in 58ms (Views: 57.0ms | ActiveRecord: 0.0ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:54:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/auth/vkontakte/callback?code=a4342f51f43e761af0&state=1507a8e242dde5538386ae599cab5efe116308719409d92c" for ::1 at 2016-07-10 13:54:20 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"a4342f51f43e761af0", "state"=>"1507a8e242dde5538386ae599cab5efe116308719409d92c"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.5ms)
Started GET "/users/auth/vkontakte/callback?code=a4342f51f43e761af0&state=1507a8e242dde5538386ae599cab5efe116308719409d92c" for ::1 at 2016-07-10 13:55:24 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"a4342f51f43e761af0", "state"=>"1507a8e242dde5538386ae599cab5efe116308719409d92c"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:55:25 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.7ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (13.6ms)
Completed 200 OK in 193ms (Views: 173.8ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 13:55:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 53ms (Views: 51.3ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:55:33 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:55:33 +0300
Started GET "/users/auth/vkontakte/callback?code=23dd5a6632ac5c4f4b&state=63cc1284aafdcef19427407aa355e34ebde6f39b0caebb73" for ::1 at 2016-07-10 13:55:34 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"23dd5a6632ac5c4f4b", "state"=>"63cc1284aafdcef19427407aa355e34ebde6f39b0caebb73"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:55:35 UTC], ["updated_at", 2016-07-10 10:55:35 UTC]]
  [1m[35m (94.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:55:35 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:55:35 UTC], ["last_sign_in_at", 2016-07-10 10:55:35 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 5]]
  [1m[35m (63.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 168ms (ActiveRecord: 160.3ms)


Started GET "/" for ::1 at 2016-07-10 13:55:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (23.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
Completed 200 OK in 48ms (Views: 46.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:55:42 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"VMdsLpHkniNDirBbEv+PlcyFnPictOufyuVglCKhvNyiJfH0fsN1PpUMsdaL6KG3R+fFFL1xn08+Q9Yi6h60jA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 13:55:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 29ms (Views: 28.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:55:44 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:55:44 +0300
Started GET "/users/auth/facebook/callback?code=AQBECEp1niWu_rJlscE-cRPzM1F5ovOtD0fMDeBNCdQEsOyrox_eM4UVH7Miyg6AB6Ns0s7pypcb_0osqtmljCfAhnCjHrkbXbBJzjnmxdCjmd-37QLncG2fitseabX3-29yRiyFHcqRPwM07kZboSYysLZ3F97ofJ8ycTgH7udSQbcmPY_YZL6I-ocC0ElZSXEadRd737vT0bv0nayaW7o7r-joIfkNQS7SJv4_G9OSvrorhe1XswauqT6vnEW8TNh93GWjF-_LiUAMoSfv-P6qwFicqTwvf3sECDPzha_XT4sZXF5dTfcfMacd1iNYLnQSb9DbpJGq2oKuKcB8AGAE&state=1ddd277a9a3b8e4365972b0e541cf2737a21fa186a84405e" for ::1 at 2016-07-10 13:55:44 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBECEp1niWu_rJlscE-cRPzM1F5ovOtD0fMDeBNCdQEsOyrox_eM4UVH7Miyg6AB6Ns0s7pypcb_0osqtmljCfAhnCjHrkbXbBJzjnmxdCjmd-37QLncG2fitseabX3-29yRiyFHcqRPwM07kZboSYysLZ3F97ofJ8ycTgH7udSQbcmPY_YZL6I-ocC0ElZSXEadRd737vT0bv0nayaW7o7r-joIfkNQS7SJv4_G9OSvrorhe1XswauqT6vnEW8TNh93GWjF-_LiUAMoSfv-P6qwFicqTwvf3sECDPzha_XT4sZXF5dTfcfMacd1iNYLnQSb9DbpJGq2oKuKcB8AGAE", "state"=>"1ddd277a9a3b8e4365972b0e541cf2737a21fa186a84405e"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/facebook/callback?code=AQBECEp1niWu_rJlscE-cRPzM1F5ovOtD0fMDeBNCdQEsOyrox_eM4UVH7Miyg6AB6Ns0s7pypcb_0osqtmljCfAhnCjHrkbXbBJzjnmxdCjmd-37QLncG2fitseabX3-29yRiyFHcqRPwM07kZboSYysLZ3F97ofJ8ycTgH7udSQbcmPY_YZL6I-ocC0ElZSXEadRd737vT0bv0nayaW7o7r-joIfkNQS7SJv4_G9OSvrorhe1XswauqT6vnEW8TNh93GWjF-_LiUAMoSfv-P6qwFicqTwvf3sECDPzha_XT4sZXF5dTfcfMacd1iNYLnQSb9DbpJGq2oKuKcB8AGAE&state=1ddd277a9a3b8e4365972b0e541cf2737a21fa186a84405e" for ::1 at 2016-07-10 13:56:02 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQBECEp1niWu_rJlscE-cRPzM1F5ovOtD0fMDeBNCdQEsOyrox_eM4UVH7Miyg6AB6Ns0s7pypcb_0osqtmljCfAhnCjHrkbXbBJzjnmxdCjmd-37QLncG2fitseabX3-29yRiyFHcqRPwM07kZboSYysLZ3F97ofJ8ycTgH7udSQbcmPY_YZL6I-ocC0ElZSXEadRd737vT0bv0nayaW7o7r-joIfkNQS7SJv4_G9OSvrorhe1XswauqT6vnEW8TNh93GWjF-_LiUAMoSfv-P6qwFicqTwvf3sECDPzha_XT4sZXF5dTfcfMacd1iNYLnQSb9DbpJGq2oKuKcB8AGAE", "state"=>"1ddd277a9a3b8e4365972b0e541cf2737a21fa186a84405e"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 13:56:02 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.2ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (4.1ms)
Completed 200 OK in 36ms (Views: 25.6ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 13:56:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.4ms)
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:56:06 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:56:06 +0300
Started GET "/users/auth/facebook/callback?code=AQCo4Ladinftkq_ouU9_8hRYKR1Y1ynzvhE2h0jfKe7G7fcg7sGX2PvGMcu99_b_4kg6MW2Q4fJjlSVZRIy_Oi-Eos2yFr_7T8P2-oiuTeUFybK3vrGpA0KEVK5oQh2PZu-zN6uM8OmygLPv_l6uS5mPOeIecyU2zt7FWex36h_vTFmj2se4Wg9E5PWyz9zS1hvwwBm9zfTlpzySjk3Xx747DBtKz9NJleVTv7ImRDjppIsHcLvlOkQmab4M17YqdoEOohuifzlEeIWQOLINUy35POJ7PDAczRN2nDFbXlKa0MR5YIAh0LUYfVI05Fx9aDfpomnoUbzuuNcmzoOc-H2A&state=ea772ad51f440f5db2fe6fb9e7c38da6d1d984f10c391d09" for ::1 at 2016-07-10 13:56:07 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCo4Ladinftkq_ouU9_8hRYKR1Y1ynzvhE2h0jfKe7G7fcg7sGX2PvGMcu99_b_4kg6MW2Q4fJjlSVZRIy_Oi-Eos2yFr_7T8P2-oiuTeUFybK3vrGpA0KEVK5oQh2PZu-zN6uM8OmygLPv_l6uS5mPOeIecyU2zt7FWex36h_vTFmj2se4Wg9E5PWyz9zS1hvwwBm9zfTlpzySjk3Xx747DBtKz9NJleVTv7ImRDjppIsHcLvlOkQmab4M17YqdoEOohuifzlEeIWQOLINUy35POJ7PDAczRN2nDFbXlKa0MR5YIAh0LUYfVI05Fx9aDfpomnoUbzuuNcmzoOc-H2A", "state"=>"ea772ad51f440f5db2fe6fb9e7c38da6d1d984f10c391d09"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 10:56:07 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 10:56:07 UTC], ["id", 5]]
  [1m[35m (142.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 147ms (ActiveRecord: 143.1ms)


Started GET "/" for ::1 at 2016-07-10 13:56:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
Completed 200 OK in 52ms (Views: 50.2ms | ActiveRecord: 0.5ms)


Started DELETE "/users/5" for ::1 at 2016-07-10 13:56:37 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"oPTCWrGapHcw/kWfnrRJMxLeSWtVUuGr2qbJgi+ke38oSQNAP1FqOWlvqOBFJbMNmLEffRiwlacKaaO+2bBesw==", "id"=>"5"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 5]]
  [1m[35m (66.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 71ms (ActiveRecord: 66.9ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.4ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 26ms (Views: 24.2ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.4ms)
Completed 200 OK in 29ms (Views: 28.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:56:47 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:56:47 +0300
Started GET "/users/auth/vkontakte/callback?code=518fd86836a7c81b03&state=2f3751f969c05b0a44d6f0d96ffde1a50d6ddba972677f4d" for ::1 at 2016-07-10 13:56:47 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"518fd86836a7c81b03", "state"=>"2f3751f969c05b0a44d6f0d96ffde1a50d6ddba972677f4d"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:56:48 UTC], ["updated_at", 2016-07-10 10:56:48 UTC]]
  [1m[35m (103.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:56:48 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:56:48 UTC], ["last_sign_in_at", 2016-07-10 10:56:48 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 6]]
  [1m[35m (59.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 170ms (ActiveRecord: 164.0ms)


Started GET "/" for ::1 at 2016-07-10 13:56:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/6" for ::1 at 2016-07-10 13:56:50 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"Oo39uYV0noqPhOQjYGMAZL2YLdg0FR3KMf7UCjPFEA1xeVL5oaHgK8iVm+5RHGzTPE7RZ70nbClS602xcp1cEA==", "id"=>"6"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 6]]
  [1m[35m (153.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 156ms (ActiveRecord: 154.4ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:56:52 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:56:52 +0300
Started GET "/users/auth/facebook/callback?code=AQCmiEK5JGQaGmxPBj1XaQeW5f0-jYc5Jbf8-n2NGiLOXUUI09OhTRUdtAHHJ-WSVAekxsH0x8YimcYCBRS6buSC9TrL08wG3-80t6Z4YwwieSEpljUwA2pag-UBUSdOMFGnGLvYB4XOsaHdEXZ-MUT7b2E-unIBZd0LPK28ztzgf83QrxEuIFSZ3TPri0zOzDJ8K1N9uAG7wM6ZUUb7my7zzIaIPc_BgjkQLEwIAGSZKL6-Bi6AB2Z1D_pIP4vQkgvgOfUD4V4hsw5OAKzlHGeEJ7WXAnaASRMCu9eGKbB3ZaNlFbS4J_2CpHR6j9tuZJppD76H2cx39iUhjHbDKRdX&state=0d210ebc15ba7c88308021b7910ce435c0e568eb52d4cc28" for ::1 at 2016-07-10 13:56:52 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCmiEK5JGQaGmxPBj1XaQeW5f0-jYc5Jbf8-n2NGiLOXUUI09OhTRUdtAHHJ-WSVAekxsH0x8YimcYCBRS6buSC9TrL08wG3-80t6Z4YwwieSEpljUwA2pag-UBUSdOMFGnGLvYB4XOsaHdEXZ-MUT7b2E-unIBZd0LPK28ztzgf83QrxEuIFSZ3TPri0zOzDJ8K1N9uAG7wM6ZUUb7my7zzIaIPc_BgjkQLEwIAGSZKL6-Bi6AB2Z1D_pIP4vQkgvgOfUD4V4hsw5OAKzlHGeEJ7WXAnaASRMCu9eGKbB3ZaNlFbS4J_2CpHR6j9tuZJppD76H2cx39iUhjHbDKRdX", "state"=>"0d210ebc15ba7c88308021b7910ce435c0e568eb52d4cc28"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:56:53 UTC], ["updated_at", 2016-07-10 10:56:53 UTC]]
  [1m[35m (111.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:56:53 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:56:53 UTC], ["last_sign_in_at", 2016-07-10 10:56:53 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 7]]
  [1m[35m (63.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 182ms (ActiveRecord: 175.8ms)


Started GET "/" for ::1 at 2016-07-10 13:56:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 55ms (Views: 53.5ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (24.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 44.4ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.7ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (39.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 76ms (Views: 74.4ms | ActiveRecord: 0.6ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (16.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 75ms (Views: 73.6ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:56:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 60ms (Views: 58.7ms | ActiveRecord: 0.6ms)


Started GET "/users" for ::1 at 2016-07-10 13:57:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 59ms (Views: 57.7ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 13:57:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 63ms (Views: 61.6ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 13:57:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 63ms (Views: 61.7ms | ActiveRecord: 0.4ms)


Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 7]]
  [1m[35m (112.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Completed 302 Found in 117ms (ActiveRecord: 112.9ms)


Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Processing by UsersController#destroy as HTML
Processing by UsersController#destroy as HTML
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:19 +0300
Processing by UsersController#destroy as HTML
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (ActiveRecord: 0.1ms)


Completed 404 Not Found in 4ms (ActiveRecord: 0.2ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (ActiveRecord: 0.2ms)


Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


  
  
Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


  
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
  
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
  
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (87.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (105.1ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (147.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (137.9ms)
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
Processing by UsersController#destroy as HTML
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
Processing by UsersController#destroy as HTML
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (182.7ms)
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Processing by UsersController#destroy as HTML
Completed 404 Not Found in 25ms (ActiveRecord: 0.1ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 404 Not Found in 20ms (ActiveRecord: 0.0ms)


  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
  
Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


  
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Processing by UsersController#destroy as HTML
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
  
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
app/controllers/users_controller.rb:67:in `set_user'
  
app/controllers/users_controller.rb:67:in `set_user'
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)


app/controllers/users_controller.rb:67:in `set_user'
  
  
app/controllers/users_controller.rb:67:in `set_user'
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (85.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (97.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
Started DELETE "/users/7" for ::1 at 2016-07-10 13:57:20 +0300
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
Processing by UsersController#destroy as HTML
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Parameters: {"authenticity_token"=>"f53bAe65yDXSGmSsUwGS7OkhiE6C6ZxXWgAIMs01A4e3EjbH40m+uULjdMS8ZnbEgtP3mCsYHmT3Zcf6oitRpw==", "id"=>"7"}
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (128.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
Completed 404 Not Found in 7ms (ActiveRecord: 0.1ms)


  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (80.3ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=7):
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (132.6ms)
  
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.5ms)
Started GET "/users" for ::1 at 2016-07-10 13:57:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:29 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:29 +0300
Started GET "/users/auth/vkontakte/callback?code=e06e2fa15f1aaa7af2&state=7b95b363fe4b392f6ba4a6a32b09e451e4c45e2ad4ad89dc" for ::1 at 2016-07-10 13:57:29 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e06e2fa15f1aaa7af2", "state"=>"7b95b363fe4b392f6ba4a6a32b09e451e4c45e2ad4ad89dc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:57:30 UTC], ["updated_at", 2016-07-10 10:57:30 UTC]]
  [1m[35m (96.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:57:30 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:57:30 UTC], ["last_sign_in_at", 2016-07-10 10:57:30 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 8]]
  [1m[35m (63.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 166ms (ActiveRecord: 160.7ms)


Started GET "/" for ::1 at 2016-07-10 13:57:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
Completed 200 OK in 48ms (Views: 47.0ms | ActiveRecord: 0.3ms)


Started DELETE "/users/8" for ::1 at 2016-07-10 13:57:31 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"H5jlFIS2fTyL1wM6rY0yXwamWnwJG0AyGIUw3pfRbHIU2uifrWwGh8KWaTzDM6MQAKiEhbS4GzLVGZlXgtWgYg==", "id"=>"8"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 8]]
  [1m[35m (145.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 149ms (ActiveRecord: 146.0ms)


Started GET "/users" for ::1 at 2016-07-10 13:57:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.2ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:57:33 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:57:34 +0300
Started GET "/users/auth/facebook/callback?code=AQAE8oPtxV5kN28pCxZmZ1-evdcEQPrAZSo3ikR-17UFEzppa64M6gf3lArElc-IeYvLc8saQm9uWGowPv9FQplI0G2NvqpfdGtpY5hiMUNfkmWtKicLbRQ6mTa8y_KorXX6ppboAtAdZDSU3YAuwaQORL9UYCKi2ABL61rOVWFnAw6tmFrmov4u_lvvbqrJh6xL-LoXjH4AGnFNkLRjkOckKB9PzOYKrTh_xK85GLkATiaW43hYdgH_yCpZ0G0cDkfIvNTIRrtGJ3584P93lT64H_DcEwxDNkBd4TbSbXYJ972fBs03iyQvgMM-wu2n3pd2924IfcjRxpwQkZaaVHBM&state=fd0151e6cca164fc07bae26e429acab60beaaa4f3629751f" for ::1 at 2016-07-10 13:57:34 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAE8oPtxV5kN28pCxZmZ1-evdcEQPrAZSo3ikR-17UFEzppa64M6gf3lArElc-IeYvLc8saQm9uWGowPv9FQplI0G2NvqpfdGtpY5hiMUNfkmWtKicLbRQ6mTa8y_KorXX6ppboAtAdZDSU3YAuwaQORL9UYCKi2ABL61rOVWFnAw6tmFrmov4u_lvvbqrJh6xL-LoXjH4AGnFNkLRjkOckKB9PzOYKrTh_xK85GLkATiaW43hYdgH_yCpZ0G0cDkfIvNTIRrtGJ3584P93lT64H_DcEwxDNkBd4TbSbXYJ972fBs03iyQvgMM-wu2n3pd2924IfcjRxpwQkZaaVHBM", "state"=>"fd0151e6cca164fc07bae26e429acab60beaaa4f3629751f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:57:35 UTC], ["updated_at", 2016-07-10 10:57:35 UTC]]
  [1m[35m (101.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 10:57:35 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 10:57:35 UTC], ["last_sign_in_at", 2016-07-10 10:57:35 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 9]]
  [1m[35m (59.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 168ms (ActiveRecord: 161.8ms)


Started GET "/" for ::1 at 2016-07-10 13:57:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 45.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:57:37 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"k1+enlrU+6WvSgLpYRK/aF+sbPaVvDdbzjud/emLyu+3RyUK210Ht6W34iWUo/S7eYsggcVvaNeeJ1vQIyXGfg=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 13:57:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 31ms (Views: 30.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:38 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:39 +0300
Started GET "/users/auth/vkontakte/callback?code=4d661552b5d25a97c7&state=3a3bd52d05b68d1756789c19d149edfb50d86d1d6c32139f" for ::1 at 2016-07-10 13:57:39 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"4d661552b5d25a97c7", "state"=>"3a3bd52d05b68d1756789c19d149edfb50d86d1d6c32139f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:57:40 UTC], ["updated_at", 2016-07-10 10:57:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:51 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:57:52 +0300
Started GET "/users/auth/vkontakte/callback?code=c569b15bf13a63c31d&state=b1e7039a090a19c702473ade14965ba31d294cfb733aecf8" for ::1 at 2016-07-10 13:57:52 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"c569b15bf13a63c31d", "state"=>"b1e7039a090a19c702473ade14965ba31d294cfb733aecf8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:57:52 UTC], ["updated_at", 2016-07-10 10:57:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.7ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.1ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:58:11 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:58:11 +0300
Started GET "/users/auth/facebook/callback?code=AQBQ-FfXCnKhwWh-GihHK5NdQAuY-4FAC_POVVCk23m-NQGnMoo9iVTDuaBKi6lDS2Ez9drLTwC8pG8X3ugAS6C-z-mW_tL8qW-5PSHbgeq6iYV_uxHpiABrLrfwT1jD4H4xXjy_aACAdKo8nzgMUdstEy4mXJ8QblzCY6BGzBPFcYjrZGgmb5_cZW1Vy70KPwNVGU8otMkiJ9EAR3UhQ-WO-r5Fddll6YTb2D8Ct8MCAGrtS_kAM-lu-Lpn4UmjAU8myhhzNGOaBooAfHHIyqeG450Nsz5W-g6sdCKuGP5KBbyz3O1UWcTzt2ssKlGQMrrcs9p_lvliDpEkyxyfWYln&state=626fe8dcae76388d0a645f1f76508a1bd76d2368adb74929" for ::1 at 2016-07-10 13:58:11 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBQ-FfXCnKhwWh-GihHK5NdQAuY-4FAC_POVVCk23m-NQGnMoo9iVTDuaBKi6lDS2Ez9drLTwC8pG8X3ugAS6C-z-mW_tL8qW-5PSHbgeq6iYV_uxHpiABrLrfwT1jD4H4xXjy_aACAdKo8nzgMUdstEy4mXJ8QblzCY6BGzBPFcYjrZGgmb5_cZW1Vy70KPwNVGU8otMkiJ9EAR3UhQ-WO-r5Fddll6YTb2D8Ct8MCAGrtS_kAM-lu-Lpn4UmjAU8myhhzNGOaBooAfHHIyqeG450Nsz5W-g6sdCKuGP5KBbyz3O1UWcTzt2ssKlGQMrrcs9p_lvliDpEkyxyfWYln", "state"=>"626fe8dcae76388d0a645f1f76508a1bd76d2368adb74929"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 10:58:12 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 10:58:12 UTC], ["id", 9]]
  [1m[35m (109.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 114ms (ActiveRecord: 110.5ms)


Started GET "/" for ::1 at 2016-07-10 13:58:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:58:16 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"zzrAzkJtIW08L/ElggAa2GQGU11EE+oF/44wkU57rflgFuuPFxQMZ7eRD4Z0YUSVsY8t1iuFhS4kFVQyNihUHA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 13:58:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 32ms (Views: 30.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:58:17 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 13:58:18 +0300
Started GET "/users/auth/facebook/callback?code=AQAyvsjIEFZlpyBukzCdyzKio0j1OAIXF8Qy53d44FNUdFXgUVoUM57WoSj4_qY6CrWMIyZ13aWh4oX2oyX3ubRmUto_9suPZawBLieclhdOv68eGJYAJKKB6Mow0J-czc0gwaJnLO9uTA7aiNo525S2_V-l04indF-n37YJ9bth7mMAWgZ-kDZ91WnhHIq6NVYO6fkz_MKxWaO59mfc_-ylwtOYknXbo0ZUjL6AGAfY6Td3jb5BaI_Vvcn80LK3n5nMIhDd1f70O8sMlLMjkv5mgS-m5Ek_i-HJYYrnLqQnrXOzPiyTP5qQ0_g9kpzx2ehZrbiZf4lCBYsSGduUnNAk&state=6698530d38e4e3e4fd2b0e7a293e0c22f83a7fe08f5679cc" for ::1 at 2016-07-10 13:58:18 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAyvsjIEFZlpyBukzCdyzKio0j1OAIXF8Qy53d44FNUdFXgUVoUM57WoSj4_qY6CrWMIyZ13aWh4oX2oyX3ubRmUto_9suPZawBLieclhdOv68eGJYAJKKB6Mow0J-czc0gwaJnLO9uTA7aiNo525S2_V-l04indF-n37YJ9bth7mMAWgZ-kDZ91WnhHIq6NVYO6fkz_MKxWaO59mfc_-ylwtOYknXbo0ZUjL6AGAfY6Td3jb5BaI_Vvcn80LK3n5nMIhDd1f70O8sMlLMjkv5mgS-m5Ek_i-HJYYrnLqQnrXOzPiyTP5qQ0_g9kpzx2ehZrbiZf4lCBYsSGduUnNAk", "state"=>"6698530d38e4e3e4fd2b0e7a293e0c22f83a7fe08f5679cc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 10:58:18 UTC], ["last_sign_in_at", 2016-07-10 10:58:12 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 10:58:18 UTC], ["id", 9]]
  [1m[35m (107.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 112ms (ActiveRecord: 107.9ms)


Started GET "/" for ::1 at 2016-07-10 13:58:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 13:58:21 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"zSDo4dMPI1mosGrlkbO3DNi4zhyzi6hdYSMRhyvoSuPSMm6YQ+jxfd5fGwZfCuh/5YnJ3mUV3XykRccnYmQAhQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 13:58:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 29ms (Views: 28.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:58:31 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 13:58:31 +0300
Started GET "/users/auth/vkontakte/callback?code=f1ec8ceade89633e9b&state=b3f80e04e97b03a41cb121adab2885a96fdde7930a5d33f7" for ::1 at 2016-07-10 13:58:31 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"f1ec8ceade89633e9b", "state"=>"b3f80e04e97b03a41cb121adab2885a96fdde7930a5d33f7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 10:58:32 UTC], ["updated_at", 2016-07-10 10:58:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (6.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (24.2ms)
Started GET "/" for ::1 at 2016-07-10 14:05:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.3ms)
Completed 200 OK in 51ms (Views: 49.1ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:06:18 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:06:18 +0300
Started GET "/users/auth/facebook/callback?code=AQAuYAd_GQJbRQmEOie9wcWW_oB1SFn0ggGE7P6Ll-Gt_G-YuHB4qpWgW_kCQdNQfft1ygASosF6jtUgtecjYxha6JTCZ21SpXNsidoT3GaRoHRUsrT2cqyS9_t7XEEAVaqn38VpHxZkP1ImgUKA6ZuB3L0T-hmqLPRd12g9pOPhwE4cY63mQC_QgD-rHX9MR39j7sCg-woOmCBrFDac4Hh1Awot3Qd5Gt9Viti8vtgdNtX5aE_XoZLK915W8W7M1gNQkybPNRrW5AK7AJl1ZZjJcmhwIQDfPlCdWMyP2cRfD6u4_vBHhAHWd-TXHhW00Hmt9QCCPWD9ImApDOxqA2d8&state=243f460e6e4558e73b77e7cace9287d69f3339dc6df22e3b" for ::1 at 2016-07-10 14:06:18 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAuYAd_GQJbRQmEOie9wcWW_oB1SFn0ggGE7P6Ll-Gt_G-YuHB4qpWgW_kCQdNQfft1ygASosF6jtUgtecjYxha6JTCZ21SpXNsidoT3GaRoHRUsrT2cqyS9_t7XEEAVaqn38VpHxZkP1ImgUKA6ZuB3L0T-hmqLPRd12g9pOPhwE4cY63mQC_QgD-rHX9MR39j7sCg-woOmCBrFDac4Hh1Awot3Qd5Gt9Viti8vtgdNtX5aE_XoZLK915W8W7M1gNQkybPNRrW5AK7AJl1ZZjJcmhwIQDfPlCdWMyP2cRfD6u4_vBHhAHWd-TXHhW00Hmt9QCCPWD9ImApDOxqA2d8", "state"=>"243f460e6e4558e73b77e7cace9287d69f3339dc6df22e3b"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 11:06:19 UTC], ["last_sign_in_at", 2016-07-10 10:58:18 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 11:06:19 UTC], ["id", 9]]
  [1m[35m (93.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 100ms (ActiveRecord: 94.1ms)


Started GET "/" for ::1 at 2016-07-10 14:06:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
Completed 200 OK in 61ms (Views: 59.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:09:15 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"wQXIxc/F6u2BP9hVT9ze5FB2hVmGGGrLQbbQsTHPwFjv5QipIjnzLetYHDiZfYSQ9Y7GCY1zCFEF5V4SVNYzNA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 14:09:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.5ms)
Completed 200 OK in 22ms (Views: 20.5ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 14:21:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (26.3ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.6ms)


  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:73: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG):
  
app/views/layouts/application.html.haml:73: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.6ms)
Started GET "/" for ::1 at 2016-07-10 14:21:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms)


  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:73: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG):
  
app/views/layouts/application.html.haml:73: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (6.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.2ms)
Started GET "/" for ::1 at 2016-07-10 14:21:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 157ms (Views: 156.2ms | ActiveRecord: 0.2ms)


Started DELETE "/users/9" for ::1 at 2016-07-10 14:21:58 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"CqcOVnd75vtTAEXxoR52HjW88g0kSrH461nd68+UIHbyJCuEjhC6kcaRWX7efTM+ptKy821welBBquj9sF4E8w==", "id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 9]]
  [1m[35m (124.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 131ms (ActiveRecord: 125.4ms)


Started GET "/users" for ::1 at 2016-07-10 14:21:58 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.6ms)
Completed 200 OK in 51ms (Views: 49.8ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:22:02 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:22:03 +0300
Started GET "/users/auth/vkontakte/callback?code=c8d05a7f67bb47b80a&state=a2c1b42aa8588dd5fbdae31cc993de6d57071cdd2b5df915" for ::1 at 2016-07-10 14:22:03 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"c8d05a7f67bb47b80a", "state"=>"a2c1b42aa8588dd5fbdae31cc993de6d57071cdd2b5df915"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:22:04 UTC], ["updated_at", 2016-07-10 11:22:04 UTC]]
  [1m[35m (108.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 11:22:04 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 11:22:04 UTC], ["last_sign_in_at", 2016-07-10 11:22:04 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 10]]
  [1m[35m (58.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 175ms (ActiveRecord: 167.9ms)


Started GET "/" for ::1 at 2016-07-10 14:22:04 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/10" for ::1 at 2016-07-10 14:22:14 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"iOE9bCBTMkouKcBGEPO07kHfC0UpZ4uQpOetwFjUfUxC1eBe9hXMvpDjlBTCUPeavH6eeWh05QAFiJJneVpuxw==", "id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 10]]
  [1m[35m (73.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 78ms (ActiveRecord: 74.8ms)


Started GET "/users" for ::1 at 2016-07-10 14:22:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:22:16 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:22:17 +0300
Started GET "/users/auth/vkontakte/callback?code=8d437943ee827f2ab1&state=eef293a8e4f7dd5d9840356d120c87611a11d4f9e29e5ee1" for ::1 at 2016-07-10 14:22:17 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"8d437943ee827f2ab1", "state"=>"eef293a8e4f7dd5d9840356d120c87611a11d4f9e29e5ee1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:22:18 UTC], ["updated_at", 2016-07-10 11:22:18 UTC]]
  [1m[35m (66.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 11:22:18 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 11:22:18 UTC], ["last_sign_in_at", 2016-07-10 11:22:18 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 11]]
  [1m[35m (55.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 129ms (ActiveRecord: 122.9ms)


Started GET "/" for ::1 at 2016-07-10 14:22:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:23:51 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"M5AHRxTRZS0oTDkGyT8AzYcP18+IvcziA3aD5QotvHFKKekjw76Ns7kn5Cc1wBf5/AmYBX0W2mmqkASfB8pz2A=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 14:23:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.7ms)
Completed 200 OK in 27ms (Views: 25.1ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:23:53 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:23:54 +0300
Started GET "/users/auth/vkontakte/callback?code=1e50661afa6c215de9&state=7eb824c6fbec05e44286d59c25cf5abab2c7ce8878bd00c4" for ::1 at 2016-07-10 14:23:54 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"1e50661afa6c215de9", "state"=>"7eb824c6fbec05e44286d59c25cf5abab2c7ce8878bd00c4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:23:54 UTC], ["updated_at", 2016-07-10 11:23:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.4ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:25:34 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:25:35 +0300
Started GET "/users/auth/vkontakte/callback?code=c1969b8d8b99e89ba3&state=840cf25a272479f75471b1fca1b0bb4671a691fe803455fa" for ::1 at 2016-07-10 14:25:35 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"c1969b8d8b99e89ba3", "state"=>"840cf25a272479f75471b1fca1b0bb4671a691fe803455fa"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/user.rb:27:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.2ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:25:54 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:25:54 +0300
Started GET "/users/auth/vkontakte/callback?code=43b5b220db4bc3ab46&state=d67a4fbdecc31765c847987f0aed2974a03a013657da3247" for ::1 at 2016-07-10 14:25:54 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"43b5b220db4bc3ab46", "state"=>"d67a4fbdecc31765c847987f0aed2974a03a013657da3247"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/user.rb:27:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.8ms)
Started GET "/users/auth/vkontakte/callback?code=43b5b220db4bc3ab46&state=d67a4fbdecc31765c847987f0aed2974a03a013657da3247" for ::1 at 2016-07-10 14:30:41 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"43b5b220db4bc3ab46", "state"=>"d67a4fbdecc31765c847987f0aed2974a03a013657da3247"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 14:30:41 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.5ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (11.0ms)
Completed 200 OK in 43ms (Views: 33.0ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:30:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:30:46 +0300
Started GET "/users/auth/vkontakte/callback?code=e26f7fc0390e21930b&state=1092cbe14061d7456db90df049b9f45d42a24b072439f41c" for ::1 at 2016-07-10 14:30:46 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e26f7fc0390e21930b", "state"=>"1092cbe14061d7456db90df049b9f45d42a24b072439f41c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:30:47 UTC], ["updated_at", 2016-07-10 11:30:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.0ms)
Started DELETE "/users/11" for ::1 at 2016-07-10 14:32:41 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"3c1513Qzyo1IBiq2L/2UL1PJB0pujJp+qs09kR32598bX+qcJo1EUBOkTBrJjCBF2/QBeGJVJ+I8EDmAXv4u1A==", "id"=>"11"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 11]]
  [1m[35m (64.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 69ms (ActiveRecord: 65.0ms)


Started GET "/users" for ::1 at 2016-07-10 14:32:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:32:42 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:32:42 +0300
Started GET "/users/auth/vkontakte/callback?code=b4591e275545557788&state=7d7d244de3c1e09c4aa9e082a0b4ee967272838e17edb10d" for ::1 at 2016-07-10 14:32:43 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:32:57 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:32:57 +0300
Started GET "/users/auth/vkontakte/callback?code=10b25a3c259f183287&state=0f73c41aea079d792329c463eae535f028b4f9a2605b92a9" for ::1 at 2016-07-10 14:32:57 +0300
Started GET "/users" for ::1 at 2016-07-10 14:32:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 200 OK in 22ms (Views: 21.4ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:33:00 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:33:00 +0300
Started GET "/users/auth/vkontakte/callback?code=4cf2420f0ff207efec&state=857f0a2e7904df49363da4b18408f456c6035b1ebb53107a" for ::1 at 2016-07-10 14:33:00 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"4cf2420f0ff207efec", "state"=>"857f0a2e7904df49363da4b18408f456c6035b1ebb53107a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:33:01 UTC], ["updated_at", 2016-07-10 11:33:01 UTC]]
  [1m[35m (57.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 11:33:01 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 11:33:01 UTC], ["last_sign_in_at", 2016-07-10 11:33:01 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 12]]
  [1m[35m (59.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 125ms (ActiveRecord: 117.5ms)


Started GET "/" for ::1 at 2016-07-10 14:33:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 33.0ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:33:03 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"tWI6ENONCoGQVsykEHGnZ05kYHY6UNZ/Ar4EfbHb9duKJIupXfp+ic1PUdYMEqakntINj3YEqyOIieOnVSNxXg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 14:33:03 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 42ms (Views: 40.5ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:33:08 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:33:09 +0300
Started GET "/users/auth/vkontakte/callback?code=7566c8f7641e571dcb&state=0cdf78a3ce82fa47bf6f9412530ad00cb95f10bb4c81676a" for ::1 at 2016-07-10 14:33:09 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7566c8f7641e571dcb", "state"=>"0cdf78a3ce82fa47bf6f9412530ad00cb95f10bb4c81676a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:33:09 UTC], ["updated_at", 2016-07-10 11:33:09 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.5ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:23:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.1ms)
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.4ms)
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.6ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:05 +0300
Started GET "/users/auth/vkontakte/callback?code=ad192bb9203a22dd1c&state=3c974f2a1c562a03c0ff7b69ec840ad16bc6a7fb440708ba" for ::1 at 2016-07-10 14:35:05 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"ad192bb9203a22dd1c", "state"=>"3c974f2a1c562a03c0ff7b69ec840ad16bc6a7fb440708ba"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 18ms (ActiveRecord: 0.9ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:35:09 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:35:09 +0300
Started GET "/users/auth/facebook/callback?code=AQD42ejB-DN0OvSSm_N0923zbhvh-g8OigcOff6_ZuS4wdpcArCvPr3Mn4S3Br8_XBUfKiBA7vyNvbagewX-ttsiTKM1VwZVBY09bhaGrZRB-FSFEj6gKU43Ed4OTGcLPEvMc3dbSZ2Rce_Dz-d9jUAoGeEfSLyAOqdrXsgV4ZdLVTvFaRR4YNjskMFAlrVcr8e4fJaZvYgZoydl2j563PSJxOfWLFAIwh66PyQM85zmWCQ9U2OT7zcvGXGrlBLd9TdugcHIQIZQfwjQOtMm0Wz-u--jz_c5KUKe7XtvJQ4NxyiMr21iUGzKAurQXdO0tPcKqfX5QLF17YEb4gqXAPzf&state=bc4621c03a4ee742bfd0e2aa35a0b5e1290cdaa49be8233b" for ::1 at 2016-07-10 14:35:09 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQD42ejB-DN0OvSSm_N0923zbhvh-g8OigcOff6_ZuS4wdpcArCvPr3Mn4S3Br8_XBUfKiBA7vyNvbagewX-ttsiTKM1VwZVBY09bhaGrZRB-FSFEj6gKU43Ed4OTGcLPEvMc3dbSZ2Rce_Dz-d9jUAoGeEfSLyAOqdrXsgV4ZdLVTvFaRR4YNjskMFAlrVcr8e4fJaZvYgZoydl2j563PSJxOfWLFAIwh66PyQM85zmWCQ9U2OT7zcvGXGrlBLd9TdugcHIQIZQfwjQOtMm0Wz-u--jz_c5KUKe7XtvJQ4NxyiMr21iUGzKAurQXdO0tPcKqfX5QLF17YEb4gqXAPzf", "state"=>"bc4621c03a4ee742bfd0e2aa35a0b5e1290cdaa49be8233b"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 11:35:10 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 11:35:10 UTC], ["id", 12]]
  [1m[35m (138.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 144ms (ActiveRecord: 139.2ms)


Started GET "/" for ::1 at 2016-07-10 14:35:10 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.8ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:35:13 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"9stLTFrYsllh8pR6Xicw3/2V9/JKFvXXJCY/Ige3eXa1yODdLJb2IezJTgVlWeoZl0FkbanGDAk+DtQdafpiyQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 14:35:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
Completed 200 OK in 22ms (Views: 21.1ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:14 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:14 +0300
Started GET "/users/auth/vkontakte/callback?code=31e3f198565f086b4a&state=a034527b66ef13cfb268d227a8334f207008b6c00d61b3e3" for ::1 at 2016-07-10 14:35:14 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"31e3f198565f086b4a", "state"=>"a034527b66ef13cfb268d227a8334f207008b6c00d61b3e3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (21.3ms)
Started DELETE "/users/12" for ::1 at 2016-07-10 14:35:43 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"cH+nwCHt/hRQFonyvRIvL+rN7peaci25KcRdtvr6bee/sgJI0mXc/H9f7tvYky5aTy/WQ8mhV4Ejinuc91+iJA==", "id"=>"12"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (2.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 12]]
  [1m[35m (126.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 143ms (ActiveRecord: 129.6ms)


Started GET "/users" for ::1 at 2016-07-10 14:35:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
Completed 200 OK in 45ms (Views: 43.7ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:44 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:44 +0300
Started GET "/users/auth/vkontakte/callback?code=059e482d19fd52ec1b&state=af32fe9a3fb7fb65aaca480eb78045421be7cc6e43c859b6" for ::1 at 2016-07-10 14:35:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:48 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:35:48 +0300
Started GET "/users/auth/vkontakte/callback?code=d5f363d7b1d4d2d3dd&state=bafcf8dee64e1642ecb2011c57db7258257631aba64d1724" for ::1 at 2016-07-10 14:35:48 +0300
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"d5f363d7b1d4d2d3dd", "state"=>"bafcf8dee64e1642ecb2011c57db7258257631aba64d1724"}
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:36:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:36:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:36:45 +0300
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.4ms)
Started GET "/users" for ::1 at 2016-07-10 14:36:55 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:36:55 +0300
Started GET "/users" for ::1 at 2016-07-10 14:36:55 +0300
Processing by UsersController#index as HTML
Processing by UsersController#index as HTML
Started DELETE "/users/12" for ::1 at 2016-07-10 14:36:55 +0300
Started DELETE "/users/12" for ::1 at 2016-07-10 14:36:55 +0300
  Rendering users/index.html.haml within layouts/application
Started DELETE "/users/12" for ::1 at 2016-07-10 14:36:55 +0300
  Rendering users/index.html.haml within layouts/application
Processing by UsersController#destroy as HTML
Processing by UsersController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Processing by UsersController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Parameters: {"authenticity_token"=>"cH+nwCHt/hRQFonyvRIvL+rN7peaci25KcRdtvr6bee/sgJI0mXc/H9f7tvYky5aTy/WQ8mhV4Ejinuc91+iJA==", "id"=>"12"}
  Parameters: {"authenticity_token"=>"cH+nwCHt/hRQFonyvRIvL+rN7peaci25KcRdtvr6bee/sgJI0mXc/H9f7tvYky5aTy/WQ8mhV4Ejinuc91+iJA==", "id"=>"12"}
  Rendered users/index.html.haml within layouts/application (16.4ms)
  Parameters: {"authenticity_token"=>"cH+nwCHt/hRQFonyvRIvL+rN7peaci25KcRdtvr6bee/sgJI0mXc/H9f7tvYky5aTy/WQ8mhV4Ejinuc91+iJA==", "id"=>"12"}
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
Completed 404 Not Found in 24ms (ActiveRecord: 0.4ms)


Completed 404 Not Found in 27ms (ActiveRecord: 0.2ms)


Completed 404 Not Found in 22ms (ActiveRecord: 0.3ms)


  
Completed 200 OK in 65ms (Views: 63.1ms | ActiveRecord: 0.7ms)


  
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=12):
Completed 200 OK in 69ms (Views: 67.8ms | ActiveRecord: 0.2ms)


ActiveRecord::RecordNotFound (Couldn't find User with 'id'=12):
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=12):
  
  
  
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (34.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (66.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (71.4ms)
Started GET "/" for ::1 at 2016-07-10 14:36:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:00 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:01 +0300
Started GET "/users/auth/vkontakte/callback?code=dc66fdbb2d474adaf3&state=34679ab151c2bff2939300c8b46a15f5efe3eb29afa8dcc8" for ::1 at 2016-07-10 14:37:01 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"dc66fdbb2d474adaf3", "state"=>"34679ab151c2bff2939300c8b46a15f5efe3eb29afa8dcc8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:37:02 UTC], ["updated_at", 2016-07-10 11:37:02 UTC]]
  [1m[35m (94.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 11:37:02 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 11:37:02 UTC], ["last_sign_in_at", 2016-07-10 11:37:02 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 13]]
  [1m[35m (60.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 162ms (ActiveRecord: 155.8ms)


Started GET "/" for ::1 at 2016-07-10 14:37:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 22.8ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:37:05 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"4GKLFXuTDLUMcnWlMkoGcFjESpecxKQ7/S0MHLvNQRVD17hhVvjrL+2P5uKHTAXC3d+0HeSmBnrdoCZrQk68XQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 14:37:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:06 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:06 +0300
Started GET "/users/auth/vkontakte/callback?code=f2a458a21d3ce9983f&state=3b7d79742e29af6bfd93048965871797b53771864ff8b1c8" for ::1 at 2016-07-10 14:37:07 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:11 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:37:11 +0300
Started GET "/users/auth/vkontakte/callback?code=b05185d31ae3793f6b&state=6930b1cb26fdc89827f6ab6d972fdbb05816b9bdd353398e" for ::1 at 2016-07-10 14:37:12 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"b05185d31ae3793f6b", "state"=>"6930b1cb26fdc89827f6ab6d972fdbb05816b9bdd353398e"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:37:12 UTC], ["updated_at", 2016-07-10 11:37:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.1ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:38:24 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:38:25 +0300
Started GET "/users/auth/vkontakte/callback?code=55dca59543a69ebc0e&state=dacc8665890533d4ef8c4447c7ba64c48b16e4a3cea86659" for ::1 at 2016-07-10 14:38:25 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:38:41 +0300
Started GET "/users/auth/vkontakte/callback?code=54fb19c7ed064bc4c3&state=b69c2d3589f35ad77987d02172e75020bcfa18d5ec6780da" for ::1 at 2016-07-10 14:38:41 +0300
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (1.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (15.3ms)
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"54fb19c7ed064bc4c3", "state"=>"b69c2d3589f35ad77987d02172e75020bcfa18d5ec6780da"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:25 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:25 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:25 +0300
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Started GET "/" for ::1 at 2016-07-10 14:39:25 +0300
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:39:25 UTC], ["updated_at", 2016-07-10 11:39:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.0ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.9ms)
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
Started GET "/" for ::1 at 2016-07-10 14:39:35 +0300
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:35 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:39:35 +0300
Processing by UsersController#index as HTML
  Rendered users/index.html.haml within layouts/application (16.9ms)
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.9ms)
Completed 200 OK in 63ms (Views: 56.9ms | ActiveRecord: 0.7ms)


Completed 200 OK in 50ms (Views: 49.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:39:38 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:39:39 +0300
Started GET "/users/auth/facebook/callback?code=AQC43voP3AxPBpIqU3k0ulgFG8kRbadE_Vt8078fN2nNoUJ3rzE53_EeGtx2ZZcOjUehGCCBjHjStGMIcD2h6pcrkCiJ085Oc1dInFCgZQs5fVcDhCrz7YTIe1O2LQ9T8LKVZ5RFOjE9NvKDD30CgMV3JqJjupYnYDtLChj3TV3FzS2ZP0d81RKBcaN180jNuPjKRIhXVV06bZl_Gag7gmmM_fnKXkBJKLuuZ8X7N877ll-VOA4XG-nhX9Atbanp8tw5YexeiVdYl_Y9LumyUjU6RJ8ANfuSD73SwGuPX90mcgSQfVM1tygdtZ1_9i9_fiP29OtwAjxt2guAM5-SdwMM&state=0067d2c75b50380009427fb0d7fcc1c0187d2f2ac50e5fa8" for ::1 at 2016-07-10 14:39:39 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC43voP3AxPBpIqU3k0ulgFG8kRbadE_Vt8078fN2nNoUJ3rzE53_EeGtx2ZZcOjUehGCCBjHjStGMIcD2h6pcrkCiJ085Oc1dInFCgZQs5fVcDhCrz7YTIe1O2LQ9T8LKVZ5RFOjE9NvKDD30CgMV3JqJjupYnYDtLChj3TV3FzS2ZP0d81RKBcaN180jNuPjKRIhXVV06bZl_Gag7gmmM_fnKXkBJKLuuZ8X7N877ll-VOA4XG-nhX9Atbanp8tw5YexeiVdYl_Y9LumyUjU6RJ8ANfuSD73SwGuPX90mcgSQfVM1tygdtZ1_9i9_fiP29OtwAjxt2guAM5-SdwMM", "state"=>"0067d2c75b50380009427fb0d7fcc1c0187d2f2ac50e5fa8"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 11:39:40 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 11:39:40 UTC], ["id", 13]]
  [1m[35m (92.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 105ms (ActiveRecord: 93.7ms)


Started GET "/" for ::1 at 2016-07-10 14:39:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 14:39:43 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"fxDn+zGd8EhDf3YxPmD9PFY3gPitnPDwY0vHSmxzT6EYhg91tNcCyYvUKbwKHMpFWtw9nHspKorG1r9laZglCA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 14:39:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
Completed 200 OK in 23ms (Views: 21.6ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:44 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:39:44 +0300
Started GET "/users/auth/vkontakte/callback?code=9e7cddf22f53f616bf&state=3c4418f67eb12b5c299996d305b72c067d16b4ad46483830" for ::1 at 2016-07-10 14:39:44 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"9e7cddf22f53f616bf", "state"=>"3c4418f67eb12b5c299996d305b72c067d16b4ad46483830"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 11:39:45 UTC], ["updated_at", 2016-07-10 11:39:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.9ms)
Started DELETE "/users/13" for ::1 at 2016-07-10 14:40:43 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"vp+OOJvbeaNdMpBz7ZuceaDeYI3j0jBJwnHAnfsCNHLMnusisaqgpNUPgFiIRtHwl3MJLEMC1qQpB7EPjCAO9g==", "id"=>"13"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 13]]
  [1m[35m (118.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 129ms (ActiveRecord: 119.5ms)


Started GET "/users" for ::1 at 2016-07-10 14:40:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 25ms (Views: 23.5ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:40:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:40:45 +0300
Started GET "/users/auth/vkontakte/callback?code=d48a3ac56dde1692b6&state=9e00e81dba5ba976db28c144afc9a1688853828cef371411" for ::1 at 2016-07-10 14:40:45 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"d48a3ac56dde1692b6", "state"=>"9e00e81dba5ba976db28c144afc9a1688853828cef371411"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.6ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:45:08 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:45:09 +0300
Started GET "/users/auth/vkontakte/callback?code=e666a7f5c74b11b0cb&state=5a4ec8cecc4749a123c872889b3e8e7f10f8275a65bcb29d" for ::1 at 2016-07-10 14:45:09 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e666a7f5c74b11b0cb", "state"=>"5a4ec8cecc4749a123c872889b3e8e7f10f8275a65bcb29d"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.8ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/user.rb:32:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.1ms)
Started GET "/users/auth/vkontakte/callback?code=e666a7f5c74b11b0cb&state=5a4ec8cecc4749a123c872889b3e8e7f10f8275a65bcb29d" for ::1 at 2016-07-10 14:45:18 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"e666a7f5c74b11b0cb", "state"=>"5a4ec8cecc4749a123c872889b3e8e7f10f8275a65bcb29d"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 14:45:18 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 36ms (Views: 27.0ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:45:22 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 14:45:23 +0300
Started GET "/users/auth/vkontakte/callback?code=c9d69c780b15cb3cd6&state=e34bf1679a22c2160da1296b5c5f7b8767596045588ab0cf" for ::1 at 2016-07-10 14:45:23 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"c9d69c780b15cb3cd6", "state"=>"e34bf1679a22c2160da1296b5c5f7b8767596045588ab0cf"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/user.rb:32:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.1ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:45:53 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 14:45:53 +0300
Started GET "/users/auth/facebook/callback?code=AQBOIewHZp9DHgTcQOSDwxsyMhtDJByDeKvG3CEFGO7etyNK5JQkvKRbRCBBzUOEzEJLJnTpmiN-c06Cid6lJOG3SChK9ihCsR9UwSc2ongTArDXwypEYJgkYONS-RFLzfgaCgT_MtATU_C0cbCC4dXGgS1eMcbKYOwpgTwgSyf08m7ON_BvT0x31FPZa8rbRAUc3yKuXWxer7vRWzj7gDS70UDfQTLMNVEp1UWYLltz7IvmTF4tPG1Pkbcd4Z_E3BKKgB_QbYr9iPqcOxDESSoao3rceJVX8F3ZV2gINZu2q22zDeoE0iJd5b-y2lpO_mUOv7tzm-XGkrZdHqP3tpKj&state=d76590b695f236c1de32feca3f32ee6fab4aa47ac5f9eb0c" for ::1 at 2016-07-10 14:45:53 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBOIewHZp9DHgTcQOSDwxsyMhtDJByDeKvG3CEFGO7etyNK5JQkvKRbRCBBzUOEzEJLJnTpmiN-c06Cid6lJOG3SChK9ihCsR9UwSc2ongTArDXwypEYJgkYONS-RFLzfgaCgT_MtATU_C0cbCC4dXGgS1eMcbKYOwpgTwgSyf08m7ON_BvT0x31FPZa8rbRAUc3yKuXWxer7vRWzj7gDS70UDfQTLMNVEp1UWYLltz7IvmTF4tPG1Pkbcd4Z_E3BKKgB_QbYr9iPqcOxDESSoao3rceJVX8F3ZV2gINZu2q22zDeoE0iJd5b-y2lpO_mUOv7tzm-XGkrZdHqP3tpKj", "state"=>"d76590b695f236c1de32feca3f32ee6fab4aa47ac5f9eb0c"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:17:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users" for ::1 at 2016-07-10 15:35:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.9ms)
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 0.9ms)


Started GET "/users" for ::1 at 2016-07-10 15:35:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 41ms (Views: 39.5ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:35:44 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:35:44 +0300
Started GET "/users/auth/facebook/callback?code=AQCx0QiOsaPHtqQadtvm1X-w53R2YSnoTlAusGEA4mlG3jRhs1K2M3-KrntC84mGacjKxcdAhNj546YNrxGTjj_kLQq7kBkX63KWopmrJkq7sK0ZJWccqKn7ye9p5RBGd2tIYnhUANR1V8MHGODgy6EJmIVzdrDJ6WqPkSovxl5TgbsVXg76qI0KSe9-63pFSB_fpwhbLIhDyJ0J66wVEsenlDynOTjVscNFnfVuK2X4v2W0UH4Ia_RJwjlozIxQkv9VcEeRO50hyugkQQFeTENRCh4txf5bU20PY1TEBgHwuDf5B1vO3i3IKHhWni5numTS43-i7w3YbUlhUb8DA7pU&state=97d47c80de981c367396020d87adb1df502aba93c7dec9f6" for ::1 at 2016-07-10 15:35:44 +0300
  
ActionController::RoutingError (uninitialized constant Users::OmniauthCallbacksControllerController):
  
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `const_get'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:270:in `block in constantize'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `each'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `inject'
activesupport (5.0.0) lib/active_support/inflector/methods.rb:266:in `constantize'
actionpack (5.0.0) lib/action_dispatch/http/request.rb:93:in `controller_class'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:44:in `controller'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:30:in `serve'
actionpack (5.0.0) lib/action_dispatch/routing/mapper.rb:16:in `block in <class:Constraints>'
actionpack (5.0.0) lib/action_dispatch/routing/mapper.rb:46:in `serve'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.0) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.0) lib/action_dispatch/routing/route_set.rb:725:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:408:in `call_app!'
omniauth (1.3.1) lib/omniauth/strategy.rb:362:in `callback_phase'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:75:in `callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:71:in `block in callback_phase'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:135:in `with_authorization_code!'
omniauth-facebook (3.0.0) lib/omniauth/strategies/facebook.rb:70:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [24 times] (5.0ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (24.9ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:35:52 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:35:52 +0300
Started GET "/users/auth/facebook/callback?code=AQDpW-XFQ7UE5ge97CCBE9_-cLcNkhLpwDz3OUlTIsPWXG4i_gZAmSa1OnhI9itt4pG-gg3B9kzu_HpRpyNZjtoW7tU_8nJhYjS5Mxmgjfhy3T_hmh8oy9sCvZhSfhNuq1BtqF5XJbjD158bQNEpUiygXIYxRAauQgg-KzDS0iZOaWSRRfrTlmTYb5Y-3WlTY-pvCahERm7EeukOaYR6jQVZ_lj0HbSzQAZLJWsgDjQA8QoBKSjI_kK1aM35y2FifqCuUdi0tfdm3F_iQfgLUI5X4zEsoH_ei9Gs1nwdCuqYU10iBw32q3-xfhz5FcKxY4nwDJhwj93FObMNwps-8pZ7&state=060207e8051d21bef838574dd60352de9ade1ed9b7d5f0e6" for ::1 at 2016-07-10 15:35:52 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDpW-XFQ7UE5ge97CCBE9_-cLcNkhLpwDz3OUlTIsPWXG4i_gZAmSa1OnhI9itt4pG-gg3B9kzu_HpRpyNZjtoW7tU_8nJhYjS5Mxmgjfhy3T_hmh8oy9sCvZhSfhNuq1BtqF5XJbjD158bQNEpUiygXIYxRAauQgg-KzDS0iZOaWSRRfrTlmTYb5Y-3WlTY-pvCahERm7EeukOaYR6jQVZ_lj0HbSzQAZLJWsgDjQA8QoBKSjI_kK1aM35y2FifqCuUdi0tfdm3F_iQfgLUI5X4zEsoH_ei9Gs1nwdCuqYU10iBw32q3-xfhz5FcKxY4nwDJhwj93FObMNwps-8pZ7", "state"=>"060207e8051d21bef838574dd60352de9ade1ed9b7d5f0e6"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:17:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.9ms)
Started GET "/users/auth/facebook/callback?code=AQDpW-XFQ7UE5ge97CCBE9_-cLcNkhLpwDz3OUlTIsPWXG4i_gZAmSa1OnhI9itt4pG-gg3B9kzu_HpRpyNZjtoW7tU_8nJhYjS5Mxmgjfhy3T_hmh8oy9sCvZhSfhNuq1BtqF5XJbjD158bQNEpUiygXIYxRAauQgg-KzDS0iZOaWSRRfrTlmTYb5Y-3WlTY-pvCahERm7EeukOaYR6jQVZ_lj0HbSzQAZLJWsgDjQA8QoBKSjI_kK1aM35y2FifqCuUdi0tfdm3F_iQfgLUI5X4zEsoH_ei9Gs1nwdCuqYU10iBw32q3-xfhz5FcKxY4nwDJhwj93FObMNwps-8pZ7&state=060207e8051d21bef838574dd60352de9ade1ed9b7d5f0e6" for ::1 at 2016-07-10 15:45:50 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQDpW-XFQ7UE5ge97CCBE9_-cLcNkhLpwDz3OUlTIsPWXG4i_gZAmSa1OnhI9itt4pG-gg3B9kzu_HpRpyNZjtoW7tU_8nJhYjS5Mxmgjfhy3T_hmh8oy9sCvZhSfhNuq1BtqF5XJbjD158bQNEpUiygXIYxRAauQgg-KzDS0iZOaWSRRfrTlmTYb5Y-3WlTY-pvCahERm7EeukOaYR6jQVZ_lj0HbSzQAZLJWsgDjQA8QoBKSjI_kK1aM35y2FifqCuUdi0tfdm3F_iQfgLUI5X4zEsoH_ei9Gs1nwdCuqYU10iBw32q3-xfhz5FcKxY4nwDJhwj93FObMNwps-8pZ7", "state"=>"060207e8051d21bef838574dd60352de9ade1ed9b7d5f0e6"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 15:45:50 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.1ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (4.0ms)
Completed 200 OK in 34ms (Views: 26.7ms | ActiveRecord: 0.0ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:45:54 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:45:54 +0300
Started GET "/users/auth/facebook/callback?code=AQA77HFNQfVix0rIKUrVddCxrQeBe56EaAvj-4dybKkLYaRuJ8BJJeYPGMNUZH-yLmgrWr-BsZA8gvHkK_Qx81QHOwrTPrxspyaZSv4XQan3g7PJ5SMmauG_ZljUYNVovqFAcKcM1tf7h2grf8hr-IHK6dLXd0tX8oprohFVKqd3PeKB730mrB092JbXvi8nCP5A_EalGq-c8JRLH_B8XoN5CS_ztBykRLjyBtRu9IvcIeIHl_pO9MgnfG_71HWr9dxrDJ34fws0zIKzJN_eeqVW1H1Mjxh7SRThHxGaWuKIAex3wVkZtIDboH-PfKfzZXisnATyfz0TTpdfrBJB02IZ&state=5e93c63c902225681b24c0409176dfab3d5905372e61330e" for ::1 at 2016-07-10 15:45:54 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQA77HFNQfVix0rIKUrVddCxrQeBe56EaAvj-4dybKkLYaRuJ8BJJeYPGMNUZH-yLmgrWr-BsZA8gvHkK_Qx81QHOwrTPrxspyaZSv4XQan3g7PJ5SMmauG_ZljUYNVovqFAcKcM1tf7h2grf8hr-IHK6dLXd0tX8oprohFVKqd3PeKB730mrB092JbXvi8nCP5A_EalGq-c8JRLH_B8XoN5CS_ztBykRLjyBtRu9IvcIeIHl_pO9MgnfG_71HWr9dxrDJ34fws0zIKzJN_eeqVW1H1Mjxh7SRThHxGaWuKIAex3wVkZtIDboH-PfKfzZXisnATyfz0TTpdfrBJB02IZ", "state"=>"5e93c63c902225681b24c0409176dfab3d5905372e61330e"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:17:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.7ms)
Started GET "/users/auth/facebook/callback?code=AQA77HFNQfVix0rIKUrVddCxrQeBe56EaAvj-4dybKkLYaRuJ8BJJeYPGMNUZH-yLmgrWr-BsZA8gvHkK_Qx81QHOwrTPrxspyaZSv4XQan3g7PJ5SMmauG_ZljUYNVovqFAcKcM1tf7h2grf8hr-IHK6dLXd0tX8oprohFVKqd3PeKB730mrB092JbXvi8nCP5A_EalGq-c8JRLH_B8XoN5CS_ztBykRLjyBtRu9IvcIeIHl_pO9MgnfG_71HWr9dxrDJ34fws0zIKzJN_eeqVW1H1Mjxh7SRThHxGaWuKIAex3wVkZtIDboH-PfKfzZXisnATyfz0TTpdfrBJB02IZ&state=5e93c63c902225681b24c0409176dfab3d5905372e61330e" for ::1 at 2016-07-10 15:46:17 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQA77HFNQfVix0rIKUrVddCxrQeBe56EaAvj-4dybKkLYaRuJ8BJJeYPGMNUZH-yLmgrWr-BsZA8gvHkK_Qx81QHOwrTPrxspyaZSv4XQan3g7PJ5SMmauG_ZljUYNVovqFAcKcM1tf7h2grf8hr-IHK6dLXd0tX8oprohFVKqd3PeKB730mrB092JbXvi8nCP5A_EalGq-c8JRLH_B8XoN5CS_ztBykRLjyBtRu9IvcIeIHl_pO9MgnfG_71HWr9dxrDJ34fws0zIKzJN_eeqVW1H1Mjxh7SRThHxGaWuKIAex3wVkZtIDboH-PfKfzZXisnATyfz0TTpdfrBJB02IZ", "state"=>"5e93c63c902225681b24c0409176dfab3d5905372e61330e"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 15:46:18 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.2ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (4.4ms)
Completed 200 OK in 42ms (Views: 30.9ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:46:20 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:46:20 +0300
Started GET "/users/auth/facebook/callback?code=AQDNMsRXtX4wNjvFtoZHGRAoHMiRtO2gTdO9ukiNGsH1lBFnXiqXf3vrhnbppG2iMikV0O0--UuhzG4IUjA8XF0aRqARzrfKSaRYMUSphBj_UCWFbGPOolCiGR9RQd2DyiKbyRFMs0E3BdC5ZhhJmuiqv2rJ9ddUf0dMsVVlH5kvknlvx8utsDBc3ldXXvHv_WdybnMEVOj5f8F7SdFnjG7DpMhpGbAXK1Fhw4g2LPfInzyOYAJnS5jHI3NtEzZih-iUZBcR78XG8guKRIOWiPnl_GpRVOn4mGg9UkNojbKWAa4zonjzQ8tAs21m2cnBEkL5BEeQ2qZiCEVAJSvwm6jL&state=574ce886b55e898aa5781d40ddb6677fea191a06fbc8b065" for ::1 at 2016-07-10 15:46:20 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDNMsRXtX4wNjvFtoZHGRAoHMiRtO2gTdO9ukiNGsH1lBFnXiqXf3vrhnbppG2iMikV0O0--UuhzG4IUjA8XF0aRqARzrfKSaRYMUSphBj_UCWFbGPOolCiGR9RQd2DyiKbyRFMs0E3BdC5ZhhJmuiqv2rJ9ddUf0dMsVVlH5kvknlvx8utsDBc3ldXXvHv_WdybnMEVOj5f8F7SdFnjG7DpMhpGbAXK1Fhw4g2LPfInzyOYAJnS5jHI3NtEzZih-iUZBcR78XG8guKRIOWiPnl_GpRVOn4mGg9UkNojbKWAa4zonjzQ8tAs21m2cnBEkL5BEeQ2qZiCEVAJSvwm6jL", "state"=>"574ce886b55e898aa5781d40ddb6677fea191a06fbc8b065"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 12:46:21 UTC], ["updated_at", 2016-07-10 12:46:21 UTC]]
  [1m[35m (92.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 12:46:21 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 12:46:21 UTC], ["last_sign_in_at", 2016-07-10 12:46:21 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 14]]
  [1m[35m (60.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 159ms (ActiveRecord: 153.8ms)


Started GET "/" for ::1 at 2016-07-10 15:46:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 15:46:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (21.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.8ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 15:46:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 15:46:30 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Bs7brwv4h+C16TPNi6MtzU/disz365xyxmWmglVnaZjf2Eg2VEFwNr7QJvBsYlOJCfuTOajkkarqvj6ZZx3pLg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 15:46:30 +0300
Processing by Devise::SessionsController#destroy as HTML
Started DELETE "/users/sign_out" for ::1 at 2016-07-10 15:46:30 +0300
  Parameters: {"authenticity_token"=>"Bs7brwv4h+C16TPNi6MtzU/disz365xyxmWmglVnaZjf2Eg2VEFwNr7QJvBsYlOJCfuTOajkkarqvj6ZZx3pLg=="}
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  Parameters: {"authenticity_token"=>"Bs7brwv4h+C16TPNi6MtzU/disz365xyxmWmglVnaZjf2Eg2VEFwNr7QJvBsYlOJCfuTOajkkarqvj6ZZx3pLg=="}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
Redirected to http://localhost:3000/
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 15:46:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
Completed 200 OK in 24ms (Views: 22.7ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 15:46:31 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 15:46:32 +0300
Started GET "/users/auth/vkontakte/callback?code=583c327c1fd9ba03f6&state=acb9d7c4a06f8021f98a7098ef20e376de10d66e729de128" for ::1 at 2016-07-10 15:46:32 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"583c327c1fd9ba03f6", "state"=>"acb9d7c4a06f8021f98a7098ef20e376de10d66e729de128"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 12:46:33 UTC], ["updated_at", 2016-07-10 12:46:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.4ms)
Started GET "/" for ::1 at 2016-07-10 15:48:06 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.7ms)
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 0.9ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 15:48:14 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 15:48:14 +0300
Started GET "/users/auth/vkontakte/callback?code=09fd5a1aefce36eeee&state=59c4f14d826928ec1d444fec5841ddfb369e20a3457fa22a" for ::1 at 2016-07-10 15:48:15 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"09fd5a1aefce36eeee", "state"=>"59c4f14d826928ec1d444fec5841ddfb369e20a3457fa22a"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-07-10 12:48:15 UTC], ["updated_at", 2016-07-10 12:48:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms)


  
ActiveRecord::RecordNotUnique (SQLite3::ConstraintException: UNIQUE constraint failed: users.email: INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)):
  
app/models/user.rb:28:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.7ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:48:17 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 15:48:18 +0300
Started GET "/users/auth/facebook/callback?code=AQDRp2wRZZlgqYlilL8OHSWUhO-o6Aw5sEkPmpnLO5_5lE7jPvhfZPJXZ8k20eo41zczisQgy3ApBNqt2RHCwiInvV_KDsb3-1pzWq5Ma42WqBC3bDwkEyzHrXkKSxN0Het49fWlDgiUJdX8b3Hgtq9qwmep7bsLpx5_upYTXks-H5AP5lqLr92vFbaWGMl9-uTkXWf3IlhtQ_8410NAt5fvEeXqN7tNXcBeluvhltbH0CuAR6ptRdIG61fE13U6_939wQuuHvJFm2LHOe1qfWS3w89rUtLpYZHLI-zvJ8RVC6CknSTGrjlROeoCxbdZvwnxOAMmBP32zwweQnbbRykq&state=6291d7ce5990f9de8c17443cd5e038738cc6255363c0f085" for ::1 at 2016-07-10 15:48:18 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDRp2wRZZlgqYlilL8OHSWUhO-o6Aw5sEkPmpnLO5_5lE7jPvhfZPJXZ8k20eo41zczisQgy3ApBNqt2RHCwiInvV_KDsb3-1pzWq5Ma42WqBC3bDwkEyzHrXkKSxN0Het49fWlDgiUJdX8b3Hgtq9qwmep7bsLpx5_upYTXks-H5AP5lqLr92vFbaWGMl9-uTkXWf3IlhtQ_8410NAt5fvEeXqN7tNXcBeluvhltbH0CuAR6ptRdIG61fE13U6_939wQuuHvJFm2LHOe1qfWS3w89rUtLpYZHLI-zvJ8RVC6CknSTGrjlROeoCxbdZvwnxOAMmBP32zwweQnbbRykq", "state"=>"6291d7ce5990f9de8c17443cd5e038738cc6255363c0f085"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.5ms)
Started GET "/" for ::1 at 2016-07-10 16:02:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.4ms)
Completed 500 Internal Server Error in 93ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (undefined method `user_omniauth_authorize_path' for #<#<Class:0x007fb50099eb18>:0x007fb50099d790>
Did you mean?  user_facebook_omniauth_authorize_path):
    37:               %h3 Providers
    38:               %ul.nav.nav-list
    39:                 - if !user_signed_in?
    40:                   %li= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) 
    41:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    42:       %footer
    43:         %p © Company 2016
  
app/views/layouts/application.html.haml:40:in `_app_views_layouts_application_html_haml___2222084067393067778_70207656556720'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.1ms)
Started GET "/auth/facebook" for ::1 at 2016-07-10 16:06:51 +0300
  
ActionController::RoutingError (No route matches [GET] "/auth/facebook"):
  
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [24 times] (4.4ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (0.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (25.0ms)
Started GET "/auth/facebook" for ::1 at 2016-07-10 16:07:03 +0300
  
ActionController::RoutingError (No route matches [GET] "/auth/facebook"):
  
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [24 times] (5.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (25.5ms)
Started GET "/" for ::1 at 2016-07-10 17:15:07 +0300
  
NoMethodError (undefined method `protected_attributes' for User (call 'User.connection' to establish a connection):Class
Did you mean?  protected_methods):
  
app/models/user.rb:8:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
config/routes.rb:10:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.2ms)
Started GET "/" for ::1 at 2016-07-10 17:21:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (32.2ms)
Completed 200 OK in 241ms (Views: 233.2ms | ActiveRecord: 1.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:21:13 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:21:13 +0300
Started GET "/users/auth/vkontakte/callback?code=6cab2b56b23704ff71&state=e8d2a570ea153b828f7d5cca993c0eb7afd3021146e9f647" for ::1 at 2016-07-10 17:21:14 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"6cab2b56b23704ff71", "state"=>"e8d2a570ea153b828f7d5cca993c0eb7afd3021146e9f647"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 14:21:15 UTC], ["updated_at", 2016-07-10 14:21:15 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$7v2AFpLWwJzGJVVsElNy9uFTEtm0nwOXASmQwmA20zhnAiUCVrl52"]]
  [1m[35m (91.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:21:15 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:21:15 UTC], ["last_sign_in_at", 2016-07-10 14:21:15 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 15]]
  [1m[35m (66.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 392ms (ActiveRecord: 159.8ms)


Started GET "/" for ::1 at 2016-07-10 17:21:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 32.2ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:21:31 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Z+tJbAcrRSTS3Ws8uzTAQNbC9U9yszWmUVQxHz5rT2HDaxr4GLWGyINgB4tHRM6UQCRqs+4xvL/YNcl41DL9Yg=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 17:21:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 25ms (Views: 23.8ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:21:34 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:21:35 +0300
Started GET "/users/auth/facebook/callback?code=AQDjXhaPkHZxyGAnsWwoCKmsbdrUlOo53vXTdcNYt9RlFw5mOHSM_HvxbtR5_kcgPos1QVrp6szX-Dv0c5wt9cxg3gorvZ0RWgnkwUoox1t2orb0ZjJ7rAhDbHqIYUypjXtXUEkJ1j6f1n169naVpjs2BSsdaDpRBckR5FIzcDfTNab9T_a-vPvZGRF6IkXuqPeq0UGo21v618mgK0nZegw1VJ8_L_JPd3m28dX7etJtmYuFrGAIQQqEHViPQjqvwbwKenPFH5ACw3t4AKwHyFK5gzchHLkqBNSqfO4wfczslMZAX2R8Va5YiBPySnUHrbilVysw3qIFltAKfoGh9Mj7&state=d71b814dafc4e5885c21596b793db01ee45a249f3566cf6d" for ::1 at 2016-07-10 17:21:35 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDjXhaPkHZxyGAnsWwoCKmsbdrUlOo53vXTdcNYt9RlFw5mOHSM_HvxbtR5_kcgPos1QVrp6szX-Dv0c5wt9cxg3gorvZ0RWgnkwUoox1t2orb0ZjJ7rAhDbHqIYUypjXtXUEkJ1j6f1n169naVpjs2BSsdaDpRBckR5FIzcDfTNab9T_a-vPvZGRF6IkXuqPeq0UGo21v618mgK0nZegw1VJ8_L_JPd3m28dX7etJtmYuFrGAIQQqEHViPQjqvwbwKenPFH5ACw3t4AKwHyFK5gzchHLkqBNSqfO4wfczslMZAX2R8Va5YiBPySnUHrbilVysw3qIFltAKfoGh9Mj7", "state"=>"d71b814dafc4e5885c21596b793db01ee45a249f3566cf6d"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:21:36 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 14:21:36 UTC], ["id", 14]]
  [1m[35m (90.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 95ms (ActiveRecord: 91.2ms)


Started GET "/" for ::1 at 2016-07-10 17:21:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 44.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:21:44 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"dmgN6wCvVsWVejomDpqzWxyTG9Bsj66it/S14Hflqfsx7uGRjIsDtay43ZwENdEWeDjRKWT4KLojCk8S+EZl3g=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 17:21:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
Completed 200 OK in 35ms (Views: 34.3ms | ActiveRecord: 0.2ms)


Started DELETE "/users/15" for ::1 at 2016-07-10 17:22:13 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"a9AFQP7Fy+iScwJv9ywCD2wkWMqFY5HHtYohfUiV+h6PtI+G2OikRvHjILacRMV1sXFe+NsoqoWlTozZjAoJ8w==", "id"=>"15"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 15]]
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 71ms (ActiveRecord: 66.7ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 29ms (Views: 27.9ms | ActiveRecord: 0.2ms)


Started DELETE "/users/14" for ::1 at 2016-07-10 17:22:14 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"PvpLQxxSp8qBMCZ7AycChe49nZuinA5Aziyrt667lGLansGFOn/IZOKgBKJoT8X/M2ibqfzXNQLe6AYTaiRnjw==", "id"=>"14"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 14]]
  [1m[35m (122.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 125ms (ActiveRecord: 122.9ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:22:16 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:22:16 +0300
Started GET "/users/auth/facebook/callback?code=AQB-qwEgUnBlChcJJ9pVkrrsaGdF6kXEUZF0vUQYGQqC5AXO9JZvtTMCvPO6kNkV2cYXe8H8wLRWo39fuluJGpcqSX0FYUZy2khelTmXmi_GNlOwztgRkslH5B4HOhTpTTl3oHKxhtOroq9y4cxOHxUdIVYWyxTtq1GnXrGFaJAL3RVzksmodOWH3QxpnqTGKBK-fsGJNLPnKIM0CQCOyIvYt-CwQr7Tv0da8eOOQSGyXMd1UM_riQ_7bPLTxZTW7189oYSgmumX73fQtFIpSj8k8dg0nos9-dBxL7bASRKPtQ_30aEBcdzRoOo7k8eVS7SsPmol5grvIbd8sfolN4Ex&state=d54375c487c86aa31959ab577cd1933a18cfd00d752f0054" for ::1 at 2016-07-10 17:22:16 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB-qwEgUnBlChcJJ9pVkrrsaGdF6kXEUZF0vUQYGQqC5AXO9JZvtTMCvPO6kNkV2cYXe8H8wLRWo39fuluJGpcqSX0FYUZy2khelTmXmi_GNlOwztgRkslH5B4HOhTpTTl3oHKxhtOroq9y4cxOHxUdIVYWyxTtq1GnXrGFaJAL3RVzksmodOWH3QxpnqTGKBK-fsGJNLPnKIM0CQCOyIvYt-CwQr7Tv0da8eOOQSGyXMd1UM_riQ_7bPLTxZTW7189oYSgmumX73fQtFIpSj8k8dg0nos9-dBxL7bASRKPtQ_30aEBcdzRoOo7k8eVS7SsPmol5grvIbd8sfolN4Ex", "state"=>"d54375c487c86aa31959ab577cd1933a18cfd00d752f0054"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 14:22:16 UTC], ["updated_at", 2016-07-10 14:22:16 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$JDaGdHe5fw9rO/3aqbfzCuenkqq65aB6hL0A82ljgiS25xCFs044S"]]
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:22:17 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:22:17 UTC], ["last_sign_in_at", 2016-07-10 14:22:17 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 16]]
  [1m[35m (59.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 254ms (ActiveRecord: 126.7ms)


Started GET "/" for ::1 at 2016-07-10 17:22:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.2ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.9ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (23.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 45.0ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:29 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.2ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.6ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 35.8ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 39.1ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 44ms (Views: 42.3ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.8ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:22:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 0.6ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Redirected to http://localhost:3000/
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)


Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:22:35 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nmdF/u+JQCBeIJzXGL6+FfuiDek30ClyuVvRfde9c7uhLmy3tWXJb8Nb3QomK6OzCf4fbG4v8cwuWVbZ0buuig=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:22:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 31ms (Views: 30.3ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:22:37 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:22:37 +0300
Started GET "/users/auth/vkontakte/callback?code=44bd30272c486cca52&state=862e4b6532537d1cc4d290243a715882cfdad255e8dae9e8" for ::1 at 2016-07-10 17:22:37 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"44bd30272c486cca52", "state"=>"862e4b6532537d1cc4d290243a715882cfdad255e8dae9e8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 14:22:38 UTC], ["updated_at", 2016-07-10 14:22:38 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$73pc7bCbyNo/ktHYjeoc6O2UmxIwY8OJ2RJLrfgly/6Y.aV8RyRFC"]]
  [1m[35m (98.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:22:38 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:22:38 UTC], ["last_sign_in_at", 2016-07-10 14:22:38 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 17]]
  [1m[35m (59.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 288ms (ActiveRecord: 159.0ms)


Started GET "/" for ::1 at 2016-07-10 17:22:38 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.7ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:23:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Completed 200 OK in 39ms (Views: 36.4ms | ActiveRecord: 1.2ms)


Started DELETE "/users/16" for ::1 at 2016-07-10 17:23:12 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"8gOc0iK9y5PFWL3FDdZTThs/08ZEhxPoKh90qylupV1yFOqcTIQiDdG0gGggduzNZtkeIFD2yeK7JnsAww9tng==", "id"=>"16"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 16]]
  [1m[35m (61.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 65ms (ActiveRecord: 62.0ms)


Started GET "/users" for ::1 at 2016-07-10 17:23:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:23:15 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"xHGUhzwUvUUFzZkuVXaVmEtA58oDVKLRZaTdbl1ZPQtEZuLJUi1U2xEhpIN41iobNqYqLBcleNv0ndLFtzj1yA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:23:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 25ms (Views: 24.4ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:23:16 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:23:17 +0300
Started GET "/users/auth/facebook/callback?code=AQBeU8PIPuf5ZKPNCQ_h_rmNhUEeUUpSI3o1qZ2072QhFLJCypv2vaAq42evC2OPAjiuYgJxMKB9HVCO3zy3Q5af6gmhcOQwV2CbUhNRVPxg78Eon0gziCiS9l8MK-D8BxtZzyKlrtX_9xLbeFpiHkT-slV4Vep0fzEwkMrSUyG_DaNVEdPXguC2kI7vL273PQCXGHU5dAl20pNGI2BnGhCWu51cPqCdDw6CuIjSU5s6fm6qq--TDN0ikHxyKaKFEShYleiqMxRkp0SA1CsstGLrErWxrIj01S8Yc7I-aW4KTAz5i4dxQYddCq0JjEuIhDL0qOGyosf_VWeWPpwdDxRh&state=b430220d12c5c2abc676f9094cdc655b1b567820ad2cae0a" for ::1 at 2016-07-10 17:23:17 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBeU8PIPuf5ZKPNCQ_h_rmNhUEeUUpSI3o1qZ2072QhFLJCypv2vaAq42evC2OPAjiuYgJxMKB9HVCO3zy3Q5af6gmhcOQwV2CbUhNRVPxg78Eon0gziCiS9l8MK-D8BxtZzyKlrtX_9xLbeFpiHkT-slV4Vep0fzEwkMrSUyG_DaNVEdPXguC2kI7vL273PQCXGHU5dAl20pNGI2BnGhCWu51cPqCdDw6CuIjSU5s6fm6qq--TDN0ikHxyKaKFEShYleiqMxRkp0SA1CsstGLrErWxrIj01S8Yc7I-aW4KTAz5i4dxQYddCq0JjEuIhDL0qOGyosf_VWeWPpwdDxRh", "state"=>"b430220d12c5c2abc676f9094cdc655b1b567820ad2cae0a"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.7ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:23:31 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:23:31 +0300
Started GET "/users/auth/vkontakte/callback?code=1b1edbab7f3e279857&state=e19f672c798f8d58d6f2842f39cd40cf8ae791c2ba785398" for ::1 at 2016-07-10 17:23:32 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"1b1edbab7f3e279857", "state"=>"e19f672c798f8d58d6f2842f39cd40cf8ae791c2ba785398"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:23:32 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 14:23:32 UTC], ["id", 17]]
  [1m[35m (66.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 71ms (ActiveRecord: 67.2ms)


Started GET "/" for ::1 at 2016-07-10 17:23:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 17:23:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 34.4ms | ActiveRecord: 1.0ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:24:01 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"/csKY99jfZHjpWC+lzHWH8ONFhtVGZziQClJ2gqTaWxeE56mQ7rBXOcYVl4tpvZ8jYK2UtEJwEoJ6rmxAYnWAw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 17:24:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.6ms)
Completed 200 OK in 43ms (Views: 31.0ms | ActiveRecord: 9.8ms)


Started DELETE "/users/17" for ::1 at 2016-07-10 17:24:03 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"otiO12NtElkj+qC1Pk+LOhP3l26ZeQjDRQn9imrewvEplWr3n6rFb3xDZ9Kc/JHleJPZ418SuduA6CfmgWxEVQ==", "id"=>"17"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 17]]
  [1m[35m (120.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 125ms (ActiveRecord: 121.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:24:03 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
Completed 200 OK in 25ms (Views: 24.2ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:24:05 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:24:05 +0300
Started GET "/users/auth/vkontakte/callback?code=23a3760b9517c47e53&state=1c6e455282e0d0156bc27c1d673b704e4bed742473b09871" for ::1 at 2016-07-10 17:24:05 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"23a3760b9517c47e53", "state"=>"1c6e455282e0d0156bc27c1d673b704e4bed742473b09871"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 14:24:06 UTC], ["updated_at", 2016-07-10 14:24:06 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$maSOIdbbMOW/tPsiYY8zy.Kt0kyaYvXbLS2GLEUVatAjCTIgfrXBW"]]
  [1m[35m (58.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:24:06 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:24:06 UTC], ["last_sign_in_at", 2016-07-10 14:24:06 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 18]]
  [1m[35m (60.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 251ms (ActiveRecord: 121.0ms)


Started GET "/" for ::1 at 2016-07-10 17:24:06 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (16.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 48ms (Views: 46.1ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:24:13 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"QyzrYDezSF+BhTp0bSN9al4fph4KANymP3WjXYZW/9PfB4ctHz31P50Hf5EsBlKjklYdw5lk36DbqSwmU5DRvA=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 17:24:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.9ms)
Completed 200 OK in 43ms (Views: 42.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:24:15 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:24:15 +0300
Started GET "/users/auth/facebook/callback?code=AQB7rsLeOmLOQMBpD0s4bsvEJG1G0n4Nysgwqq9q1EvKJ7LRaXH9UQehUJvAz_h2y-kyb0h92W93iRH7Sba1NWZdeoR6GIdJTWwpAr0o5qC6oS4k5eP2airHJiDYqNv9noyl6QjGc3hIOe2Ey9yNaDcNiD9zPmoY8lZaKgkuGIR9b4uoEKo2-vXdQL4YdCLuRYI2qRD6JU0j4NC7udIXIHqX-aHALMCUHRc1gMpXjJKxE-jDnUiMhXC_AGZuKfNBXaFuD8Rw6DWUO7-uamEUi4sVVUH9tGr7FR3xTWsWqmjWVQ4z9zq0yga-Cur42fO3oUbv_e5d7cHpSHqcSgsPKEK4&state=00fc0e7b50bb423b60fa63d6db8b1e4b5411e16653041cd6" for ::1 at 2016-07-10 17:24:15 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB7rsLeOmLOQMBpD0s4bsvEJG1G0n4Nysgwqq9q1EvKJ7LRaXH9UQehUJvAz_h2y-kyb0h92W93iRH7Sba1NWZdeoR6GIdJTWwpAr0o5qC6oS4k5eP2airHJiDYqNv9noyl6QjGc3hIOe2Ey9yNaDcNiD9zPmoY8lZaKgkuGIR9b4uoEKo2-vXdQL4YdCLuRYI2qRD6JU0j4NC7udIXIHqX-aHALMCUHRc1gMpXjJKxE-jDnUiMhXC_AGZuKfNBXaFuD8Rw6DWUO7-uamEUi4sVVUH9tGr7FR3xTWsWqmjWVQ4z9zq0yga-Cur42fO3oUbv_e5d7cHpSHqcSgsPKEK4", "state"=>"00fc0e7b50bb423b60fa63d6db8b1e4b5411e16653041cd6"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:24:21 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:24:21 +0300
Started GET "/users/auth/vkontakte/callback?code=12c7cda326e685e794&state=5a430ee58ab3563232349921b79d027e0b887cf515a33433" for ::1 at 2016-07-10 17:24:21 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"12c7cda326e685e794", "state"=>"5a430ee58ab3563232349921b79d027e0b887cf515a33433"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:24:22 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 14:24:22 UTC], ["id", 18]]
  [1m[35m (57.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 64ms (ActiveRecord: 58.2ms)


Started GET "/" for ::1 at 2016-07-10 17:24:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 43.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:24:54 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"C24Ol5mVydcYwHppG4Sop4FVC40Zxdqy79WtuNM1bOOFQ0/DBWFU8hK3cNkGq6xxCwOSac3yuNM+TzV3t+59Eg=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 17:24:54 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 34ms (Views: 32.3ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:24:58 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:24:58 +0300
Started GET "/users/auth/facebook/callback?code=AQB6M651uzevTVYZ2rn2XWJ_Wu7T750eYR9DAKyDzZH1T9tWEoGzc-LQxxhba2_xTSOH56SH-QyD7EBF6oaORcGhXfILagX-DGPpF2P9c13mdOR2ic_YNmlhqDcVqsYp4OuJPqZU8Wxy34UFB2DCdfbPhkzm9otXhWFYQ8rrAoLMBnJXBOAmGyg5-XpjFJi8fwvEiS0e3roS3ptEfyAUyB_PXOQwyrGFbcBvO7sYozK3jSUa2Jwvq7_MyVTO5GAR1ko0ndv5jlwvzVWXgjwuID1K8Ao9guyUd-buEnFT_ezwLcD2s8rV3lEmCT4dDfQc0Rf5beI_Y31XxfEeh_gnR-_H&state=0d5ecfe5e7e41fb306ea662c515b7c9491ce3c071a6737d9" for ::1 at 2016-07-10 17:24:58 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB6M651uzevTVYZ2rn2XWJ_Wu7T750eYR9DAKyDzZH1T9tWEoGzc-LQxxhba2_xTSOH56SH-QyD7EBF6oaORcGhXfILagX-DGPpF2P9c13mdOR2ic_YNmlhqDcVqsYp4OuJPqZU8Wxy34UFB2DCdfbPhkzm9otXhWFYQ8rrAoLMBnJXBOAmGyg5-XpjFJi8fwvEiS0e3roS3ptEfyAUyB_PXOQwyrGFbcBvO7sYozK3jSUa2Jwvq7_MyVTO5GAR1ko0ndv5jlwvzVWXgjwuID1K8Ao9guyUd-buEnFT_ezwLcD2s8rV3lEmCT4dDfQc0Rf5beI_Y31XxfEeh_gnR-_H", "state"=>"0d5ecfe5e7e41fb306ea662c515b7c9491ce3c071a6737d9"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.0ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:31:47 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:31:47 +0300
Started GET "/users/auth/vkontakte/callback?code=f2ccd5c4f6728ec549&state=064904bb838db675db54c7bfca8801f06bcb10a8575e405e" for ::1 at 2016-07-10 17:31:48 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"f2ccd5c4f6728ec549", "state"=>"064904bb838db675db54c7bfca8801f06bcb10a8575e405e"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:31:48 UTC], ["last_sign_in_at", 2016-07-10 14:24:22 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 14:31:48 UTC], ["id", 18]]
  [1m[35m (60.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 65ms (ActiveRecord: 61.0ms)


Started GET "/" for ::1 at 2016-07-10 17:31:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.9ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:33:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 34.9ms | ActiveRecord: 0.9ms)


Started GET "/" for ::1 at 2016-07-10 17:34:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.3ms | ActiveRecord: 0.9ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:34:46 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Loe5AQRCPbvyikohlxikj/vDXgUYeWIS/TphHtwXXoviVLm3zAPZAqlSbSXAhquksxk8ICCom5qqc/nJXhnVSw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 17:34:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.5ms)
Completed 200 OK in 29ms (Views: 27.6ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:34:48 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:34:48 +0300
Started GET "/users/auth/vkontakte/callback?code=a07ae5ac6a393d56c1&state=9e7351dd0aea3d959fe555b77d58f7258061a61e643135bc" for ::1 at 2016-07-10 17:34:49 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"a07ae5ac6a393d56c1", "state"=>"9e7351dd0aea3d959fe555b77d58f7258061a61e643135bc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:34:49 UTC], ["last_sign_in_at", 2016-07-10 14:31:48 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 14:34:49 UTC], ["id", 18]]
  [1m[35m (64.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 69ms (ActiveRecord: 65.0ms)


Started GET "/" for ::1 at 2016-07-10 17:34:49 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.1ms | ActiveRecord: 0.6ms)


Started DELETE "/users/18" for ::1 at 2016-07-10 17:34:51 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"7X5HSnjkOahpSO3R9t0m7UqR0+sGmZ+5Ux3Dy+nuX8g5XbcD+6etdrMj1Tw3Wgc4uCPNQsjk+E2g9r4Hkp6/dQ==", "id"=>"18"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 18]]
  [1m[35m (92.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 97ms (ActiveRecord: 93.1ms)


Started GET "/users" for ::1 at 2016-07-10 17:34:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:34:53 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:34:53 +0300
Started GET "/users/auth/vkontakte/callback?code=f13aa3768a70810794&state=890ff384524fc0f153e42367d076f317d65eb96dc29d136f" for ::1 at 2016-07-10 17:34:53 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"f13aa3768a70810794", "state"=>"890ff384524fc0f153e42367d076f317d65eb96dc29d136f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 14:34:54 UTC], ["updated_at", 2016-07-10 14:34:54 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$i7be2wizjP4TzwURMKoeu.scpRfCSng.Tt6YskdQMdV9ByCuVVUIm"]]
  [1m[35m (142.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:34:54 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:34:54 UTC], ["last_sign_in_at", 2016-07-10 14:34:54 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 19]]
  [1m[35m (59.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 335ms (ActiveRecord: 203.7ms)


Started GET "/" for ::1 at 2016-07-10 17:34:54 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:43:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:43:17 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nei52RpZa4r2RlVf6PDFPetz8ZBpJ6dFqm0I8aQqhEZT9vYAIe+FDXrw3c6bAKhX7eZWffbvlpD4Y+//1BBGzg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 17:43:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.9ms)
Completed 200 OK in 33ms (Views: 31.4ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:43:20 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 17:43:20 +0300
Started GET "/users/auth/vkontakte/callback?code=ffb0231f3ddd1090d6&state=f13ef7e42488328c99e72e1a1202c5664fb3d583fad96b75" for ::1 at 2016-07-10 17:43:21 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"ffb0231f3ddd1090d6", "state"=>"f13ef7e42488328c99e72e1a1202c5664fb3d583fad96b75"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:43:21 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 14:43:21 UTC], ["id", 19]]
  [1m[35m (102.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 106ms (ActiveRecord: 103.1ms)


Started GET "/" for ::1 at 2016-07-10 17:43:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:43:24 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"HgfSECzh2VT4eGeP92DhY0JpwkTvJnNiSytRM9KUKmWYNYaAc8mkQx7QcI4Q8CVG9RZNmDXhQVzdgvo1ArH4lQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 17:43:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.9ms)
Completed 200 OK in 38ms (Views: 36.9ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:43:25 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:43:25 +0300
Started GET "/users/auth/facebook/callback?code=AQB39vI7USHMrXX6Y5S1Jti1MOqpemPSC4jD6H_Fey4MzwzwmjQjX-6i8mdGMYbCceFBB4bDgVorIdLIMTJzQC2Kfoy6xsA0nDLT8t_kXolu9wPg7vzNNVrOJEHpK4UWVXj32fkdUWDteLrpt8-7O_XRDHFdO1h5N40fNvZxbhJ20r2dxF9KtDdmDB-5Z9qWJjuXsJyQ3fTnZkkZDLNn8p-Mcf0UXImgrU9tTRDBvxrRXZTUYT3o39jJXuptPQdkXPWpXHXMxPEbZNL2aejDbbGFs_NPySFIyry3dHglhA2LmJvNFGCzUgpEnPrNamU5qsQ6vSFp2NL2rq3nSuVGKXwW&state=2454090afc9a0e23903ed62150f72492164556e54c0580b2" for ::1 at 2016-07-10 17:43:26 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB39vI7USHMrXX6Y5S1Jti1MOqpemPSC4jD6H_Fey4MzwzwmjQjX-6i8mdGMYbCceFBB4bDgVorIdLIMTJzQC2Kfoy6xsA0nDLT8t_kXolu9wPg7vzNNVrOJEHpK4UWVXj32fkdUWDteLrpt8-7O_XRDHFdO1h5N40fNvZxbhJ20r2dxF9KtDdmDB-5Z9qWJjuXsJyQ3fTnZkkZDLNn8p-Mcf0UXImgrU9tTRDBvxrRXZTUYT3o39jJXuptPQdkXPWpXHXMxPEbZNL2aejDbbGFs_NPySFIyry3dHglhA2LmJvNFGCzUgpEnPrNamU5qsQ6vSFp2NL2rq3nSuVGKXwW", "state"=>"2454090afc9a0e23903ed62150f72492164556e54c0580b2"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (22.1ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:44:54 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:44:54 +0300
Started GET "/users/auth/facebook/callback?code=AQCUCTCB0ZQ9rX6sUr_RIuzQxgEwkQiStSIH2Vffq3BdxVL4kF74uvPKqfy2OMGDx1j_KyuwvXjuN-oxtvq4JIVxZDMatk0DC6gh3nxgxf5cNTyOgy9eoVrWAh9EhFkbzYSnjP1EcnaLkasRXfJo4CHQ5sdRo-WUm8ErCA6NISS5deYhDpPJ_XgMQlyfmfdKy2g51ZhXdGy945VlTsciLmEZ5tHdbjfeJQVQ_eOdqAfBQd1tcHAlr3ZAhcj_mJ0l60YZ1ImM1Bb3kcFDSPFpzNRFwXOCawfzxn7X0dzidrVR6Ku9ZleOrBzP2vCBPCyuvl1N_0V81KVBabECbFKUhnTo&state=45d0702dc1513025fc2d01786dc2d4ad8435b19e992b4e8d" for ::1 at 2016-07-10 17:44:54 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCUCTCB0ZQ9rX6sUr_RIuzQxgEwkQiStSIH2Vffq3BdxVL4kF74uvPKqfy2OMGDx1j_KyuwvXjuN-oxtvq4JIVxZDMatk0DC6gh3nxgxf5cNTyOgy9eoVrWAh9EhFkbzYSnjP1EcnaLkasRXfJo4CHQ5sdRo-WUm8ErCA6NISS5deYhDpPJ_XgMQlyfmfdKy2g51ZhXdGy945VlTsciLmEZ5tHdbjfeJQVQ_eOdqAfBQd1tcHAlr3ZAhcj_mJ0l60YZ1ImM1Bb3kcFDSPFpzNRFwXOCawfzxn7X0dzidrVR6Ku9ZleOrBzP2vCBPCyuvl1N_0V81KVBabECbFKUhnTo", "state"=>"45d0702dc1513025fc2d01786dc2d4ad8435b19e992b4e8d"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.4ms)
Started GET "/users/auth/facebook/callback?code=AQCUCTCB0ZQ9rX6sUr_RIuzQxgEwkQiStSIH2Vffq3BdxVL4kF74uvPKqfy2OMGDx1j_KyuwvXjuN-oxtvq4JIVxZDMatk0DC6gh3nxgxf5cNTyOgy9eoVrWAh9EhFkbzYSnjP1EcnaLkasRXfJo4CHQ5sdRo-WUm8ErCA6NISS5deYhDpPJ_XgMQlyfmfdKy2g51ZhXdGy945VlTsciLmEZ5tHdbjfeJQVQ_eOdqAfBQd1tcHAlr3ZAhcj_mJ0l60YZ1ImM1Bb3kcFDSPFpzNRFwXOCawfzxn7X0dzidrVR6Ku9ZleOrBzP2vCBPCyuvl1N_0V81KVBabECbFKUhnTo&state=45d0702dc1513025fc2d01786dc2d4ad8435b19e992b4e8d" for ::1 at 2016-07-10 17:56:10 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQCUCTCB0ZQ9rX6sUr_RIuzQxgEwkQiStSIH2Vffq3BdxVL4kF74uvPKqfy2OMGDx1j_KyuwvXjuN-oxtvq4JIVxZDMatk0DC6gh3nxgxf5cNTyOgy9eoVrWAh9EhFkbzYSnjP1EcnaLkasRXfJo4CHQ5sdRo-WUm8ErCA6NISS5deYhDpPJ_XgMQlyfmfdKy2g51ZhXdGy945VlTsciLmEZ5tHdbjfeJQVQ_eOdqAfBQd1tcHAlr3ZAhcj_mJ0l60YZ1ImM1Bb3kcFDSPFpzNRFwXOCawfzxn7X0dzidrVR6Ku9ZleOrBzP2vCBPCyuvl1N_0V81KVBabECbFKUhnTo", "state"=>"45d0702dc1513025fc2d01786dc2d4ad8435b19e992b4e8d"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 17:56:10 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.1ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (11.6ms)
Completed 200 OK in 51ms (Views: 35.5ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:14 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:15 +0300
Started GET "/users/auth/facebook/callback?code=AQCntKsTWloB6V45D0TAGAE0YYHp7sf3sYs4xNac2omZWG1yc2QCvjLOVNlj-_FEJYX47fQeQVaL-j6hCmTbTUGZa98Cg4Tm6RliTPGyHmNKZtupiy_6xJxYpKZsJ79q0icNb7o3ooctcC5Vs1B69uxi_YsrD-jhnRbZoX3-UTRYTucK-noG7W7dVmEtWF273Dvotse9EATaXS1M0ly6nNk7Laojc_mY6tHGId8DLW4tZWCgqlKj9zeMPuYjpbzsU5jsQxoIPDHzDSQHHNTNMc_NSLqZrmocOLqTIRVtaXOOees9fa0sD8-C7qLK94xsM_SQck4bFOG5V8FAmqABv7t8&state=8daa3f5fa16a586c5ef0a11dbd8095f9df7b8d54122bab4f" for ::1 at 2016-07-10 17:56:15 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCntKsTWloB6V45D0TAGAE0YYHp7sf3sYs4xNac2omZWG1yc2QCvjLOVNlj-_FEJYX47fQeQVaL-j6hCmTbTUGZa98Cg4Tm6RliTPGyHmNKZtupiy_6xJxYpKZsJ79q0icNb7o3ooctcC5Vs1B69uxi_YsrD-jhnRbZoX3-UTRYTucK-noG7W7dVmEtWF273Dvotse9EATaXS1M0ly6nNk7Laojc_mY6tHGId8DLW4tZWCgqlKj9zeMPuYjpbzsU5jsQxoIPDHzDSQHHNTNMc_NSLqZrmocOLqTIRVtaXOOees9fa0sD8-C7qLK94xsM_SQck4bFOG5V8FAmqABv7t8", "state"=>"8daa3f5fa16a586c5ef0a11dbd8095f9df7b8d54122bab4f"}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `data' for #<Class:0x007f73183e9af8>):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.1ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:29 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:29 +0300
Started GET "/users/auth/facebook/callback?code=AQD6AT0gCMQsDIFq7l1JcB1Rp9qEae6SLzvKxTEIncF4Q7Rs00j_WYIXCRLwTsEn_9ukDv5D0y1r7-rwxl6EC3YvYuNyht2S5redhCjZ2aQkfxfX9qwyth_KqmNE5wTj3Kc7K9lDpbg5xhg6SRVStUi9TFoDdczVuIVWjAMWMIK-YDB7BWErK7WOgZTm9zotsPYFmSQxzrcbs_J-L4ESL6egTfnhWSMysDgyKHvuK8eAUSoRPDB0eJkygUZpGBipBUh-bmsjoYuA0RfU__1i2B9lsdxtytOmFOZjK5Ho7_tgfLTnXaGjlNuKzSL8fFK7B97UCgFgmCSu8_g3vy65bhaS&state=76c1c26d7e27ed6c4685ae43938b9b45ee58bd0e3704dc7f" for ::1 at 2016-07-10 17:56:29 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQD6AT0gCMQsDIFq7l1JcB1Rp9qEae6SLzvKxTEIncF4Q7Rs00j_WYIXCRLwTsEn_9ukDv5D0y1r7-rwxl6EC3YvYuNyht2S5redhCjZ2aQkfxfX9qwyth_KqmNE5wTj3Kc7K9lDpbg5xhg6SRVStUi9TFoDdczVuIVWjAMWMIK-YDB7BWErK7WOgZTm9zotsPYFmSQxzrcbs_J-L4ESL6egTfnhWSMysDgyKHvuK8eAUSoRPDB0eJkygUZpGBipBUh-bmsjoYuA0RfU__1i2B9lsdxtytOmFOZjK5Ho7_tgfLTnXaGjlNuKzSL8fFK7B97UCgFgmCSu8_g3vy65bhaS", "state"=>"76c1c26d7e27ed6c4685ae43938b9b45ee58bd0e3704dc7f"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "facebook"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:14:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.0ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:44 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:56:45 +0300
Started GET "/users/auth/facebook/callback?code=AQByk6j0TRnlA-Xc2mN82NHl-iQtnB49zbww0zlMeAF41mRlglvnQG_FwW0BdWsYnWTPp_qKZCEmzS4DbRJ6VDgi6rAB9KX20tpwqr365MPbOJwJQ-RnU10t8CVTjXBYaA9Im3fb2izVspPYhkWFM3UBNXOLPE4uHcAESdAIempVufqDUbsemzjk_YXwhMa6DprC1qpSV00Tw-oQZUIgFiCsND35GvHShC0XLoSb0R8R5paKiyYVbiKf1EPWKbLpgwQ2SK5PaDHnWK8I4IWHtfxhkehz_S2rKVCkxXDzjoyCMh4-byV5cLJgNzKC2aLqRkLnsGyLyoVhexWu9q93u8jS&state=d716cd2328da2a24079993cf1e9695f7f175946cb181995a" for ::1 at 2016-07-10 17:56:45 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQByk6j0TRnlA-Xc2mN82NHl-iQtnB49zbww0zlMeAF41mRlglvnQG_FwW0BdWsYnWTPp_qKZCEmzS4DbRJ6VDgi6rAB9KX20tpwqr365MPbOJwJQ-RnU10t8CVTjXBYaA9Im3fb2izVspPYhkWFM3UBNXOLPE4uHcAESdAIempVufqDUbsemzjk_YXwhMa6DprC1qpSV00Tw-oQZUIgFiCsND35GvHShC0XLoSb0R8R5paKiyYVbiKf1EPWKbLpgwQ2SK5PaDHnWK8I4IWHtfxhkehz_S2rKVCkxXDzjoyCMh4-byV5cLJgNzKC2aLqRkLnsGyLyoVhexWu9q93u8jS", "state"=>"d716cd2328da2a24079993cf1e9695f7f175946cb181995a"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "facebook"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 14:56:45 UTC], ["updated_at", 2016-07-10 14:56:45 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$vdte0enKR.ym6l0FpFGeeuvLn5X6FLzLdhfiKeGjaad/82RQy31vu"]]
  [1m[35m (100.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 14:56:45 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 14:56:45 UTC], ["last_sign_in_at", 2016-07-10 14:56:45 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 20]]
  [1m[35m (62.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 301ms (ActiveRecord: 165.5ms)


Started GET "/" for ::1 at 2016-07-10 17:56:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 21.2ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.0ms | ActiveRecord: 0.9ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:49 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.3ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:50 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 30.1ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.7ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:54 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.7ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.4ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 31.1ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:56:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 33.6ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:57:00 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.4ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:58:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 33.0ms | ActiveRecord: 1.0ms)


Started GET "/" for ::1 at 2016-07-10 17:58:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 26.1ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 17:58:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.8ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:58:56 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"68vgcQawGFGoqPhkayQ7mxfdnwPO9zK/7zRxl2FRyghNpU585U8li2L4EUqfvZOIhXFK4etWiRYVMb8r1oziqg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 17:58:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.2ms)
Completed 200 OK in 30ms (Views: 28.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:58:58 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:58:58 +0300
Started GET "/users/auth/facebook/callback?code=AQA4g05rakTv_scBScvhwmeZkG_yCmHfkHSj9nCXUp_z5GZakg76KvkXllPSDYJ0R8Eltd8B5fpscGD1G6rgYB_gYNS0M90wr8sdXd3LdcqXrv1lgrIzq83xLMapLxm1TKyQkWdRjRD055_aadyuAf-5g4Sk2RJjtUwNhaslfSvirIAYXF7dK-BEHJ7lrSQqqBSBm-YQoBEhwckmDdtKWW3JNFSQDCRKohjf5zZ-2msTLD6zLLlu2h7CIsJ0WQiI9r6Mh5jKEOQpehhcS5UIrB91yl1onsZNdCCcIz0P6VjyO5_uq2wLwm65O8Go-eP6o3bfUx9rm7lkNtW-Tt9NjFd4&state=1ba8be62eb6d2c6d6efb6a26deda94949b7981f6c029e016" for ::1 at 2016-07-10 17:58:59 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQA4g05rakTv_scBScvhwmeZkG_yCmHfkHSj9nCXUp_z5GZakg76KvkXllPSDYJ0R8Eltd8B5fpscGD1G6rgYB_gYNS0M90wr8sdXd3LdcqXrv1lgrIzq83xLMapLxm1TKyQkWdRjRD055_aadyuAf-5g4Sk2RJjtUwNhaslfSvirIAYXF7dK-BEHJ7lrSQqqBSBm-YQoBEhwckmDdtKWW3JNFSQDCRKohjf5zZ-2msTLD6zLLlu2h7CIsJ0WQiI9r6Mh5jKEOQpehhcS5UIrB91yl1onsZNdCCcIz0P6VjyO5_uq2wLwm65O8Go-eP6o3bfUx9rm7lkNtW-Tt9NjFd4", "state"=>"1ba8be62eb6d2c6d6efb6a26deda94949b7981f6c029e016"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:58:59 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 14:58:59 UTC], ["id", 20]]
  [1m[35m (100.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 105ms (ActiveRecord: 101.4ms)


Started GET "/" for ::1 at 2016-07-10 17:58:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.8ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (24.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 55ms (Views: 53.5ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:03 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:04 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.4ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 31.4ms | ActiveRecord: 1.1ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 17:59:27 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"CRQY5fHYbbI/K6ULuKYTJovBZQUca5RA4BOVQUA/5dPl+5L4fbiz5fLIu7Awznrh/wExtK+Fl+LQPlNqdq5apw=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 17:59:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
Completed 200 OK in 24ms (Views: 23.0ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:59:29 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 17:59:29 +0300
Started GET "/users/auth/facebook/callback?code=AQAp12iFN21savQ7uhO_3xgkUJy8gPs_jEAXLTcmEDuddOrLbbM3R8f846zv6Xi0H9mOuvjyuMzUYrDrcIC8rpbkehL1tD46Td-yaS5flD_gZHnQIel46438DNMImWBwMOBCIpHc7z1k76FUtgTksOCiWKwC6EJrnqPkvHNByU9Wo-f6FQcAKtDgmawmP_70l72fO_OhkYLsesLM3LffZaN5enx8zkdzeDuswSwn5AErbUeD3gMbSI5s8c68ENcm0P4I8rkoSURhynqSkOXkLjrnxBw2j_1LfOnv-n4F4FcXsgajLN6NRBE4AGgUqhA99wvGkY4AGg4gRN3fAIc1LcBs&state=abe646d1156609e649889d8f814d69af1ef583a7054e50ba" for ::1 at 2016-07-10 17:59:30 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAp12iFN21savQ7uhO_3xgkUJy8gPs_jEAXLTcmEDuddOrLbbM3R8f846zv6Xi0H9mOuvjyuMzUYrDrcIC8rpbkehL1tD46Td-yaS5flD_gZHnQIel46438DNMImWBwMOBCIpHc7z1k76FUtgTksOCiWKwC6EJrnqPkvHNByU9Wo-f6FQcAKtDgmawmP_70l72fO_OhkYLsesLM3LffZaN5enx8zkdzeDuswSwn5AErbUeD3gMbSI5s8c68ENcm0P4I8rkoSURhynqSkOXkLjrnxBw2j_1LfOnv-n4F4FcXsgajLN6NRBE4AGgUqhA99wvGkY4AGg4gRN3fAIc1LcBs", "state"=>"abe646d1156609e649889d8f814d69af1ef583a7054e50ba"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 14:59:30 UTC], ["last_sign_in_at", 2016-07-10 14:58:59 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 14:59:30 UTC], ["id", 20]]
  [1m[35m (60.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 65ms (ActiveRecord: 61.6ms)


Started GET "/" for ::1 at 2016-07-10 17:59:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.8ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.9ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 32.3ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 50ms (Views: 48.4ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 35.8ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 34.1ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 32.3ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.4ms | ActiveRecord: 0.8ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 20.7ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 17:59:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.8ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:03:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 37.7ms | ActiveRecord: 1.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:26 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"NU4nQN4GVARtJbBizNzr3wqalGwj8WTAow+Mv15rxNgewYlWrhnzp9LZBYgmDM9xzGCdD/sZs1wIUSdR9p3LtQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:26 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"NU4nQN4GVARtJbBizNzr3wqalGwj8WTAow+Mv15rxNgewYlWrhnzp9LZBYgmDM9xzGCdD/sZs1wIUSdR9p3LtQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:03:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 27ms (Views: 26.3ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:28 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:28 +0300
Started GET "/users/auth/facebook/callback?code=AQAO2M-KacXh5XuKNvqrrhhuDVJk0RV7FFG8TJ84qGJCtQyRhPEpIeFNPMZX9G8djR_IJx8JB_b6YAlfb1esG2CaZGtniOjo43dCMqj2eRsESL4KO3AQpQzeCBnghpx-wp8XbYY7VPjiHOhnaoKdtpG7rJfYChBH6Bmq2cp8P1mTlCFoX8cE7XHtj6-3zATRwSTlDMgndhtgGb2Mdhwu1xk1q_oGYf5vHZMVqr8OOx81lfIaIEgfxrSK0z1OSxLY58Bk5nOm3VVD6aEvOmmvU1RSGnX09wt6dIExvWL4kLy9XgV-yioq2oV0vANnac0Vi-MEox3gN7rc2-y2RkJQ_2BD&state=a00733a29620abfabc340b7b221ae08f11bab219f4cf8c5a" for ::1 at 2016-07-10 18:03:28 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAO2M-KacXh5XuKNvqrrhhuDVJk0RV7FFG8TJ84qGJCtQyRhPEpIeFNPMZX9G8djR_IJx8JB_b6YAlfb1esG2CaZGtniOjo43dCMqj2eRsESL4KO3AQpQzeCBnghpx-wp8XbYY7VPjiHOhnaoKdtpG7rJfYChBH6Bmq2cp8P1mTlCFoX8cE7XHtj6-3zATRwSTlDMgndhtgGb2Mdhwu1xk1q_oGYf5vHZMVqr8OOx81lfIaIEgfxrSK0z1OSxLY58Bk5nOm3VVD6aEvOmmvU1RSGnX09wt6dIExvWL4kLy9XgV-yioq2oV0vANnac0Vi-MEox3gN7rc2-y2RkJQ_2BD", "state"=>"a00733a29620abfabc340b7b221ae08f11bab219f4cf8c5a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 15:03:29 UTC], ["last_sign_in_at", 2016-07-10 14:59:30 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 15:03:29 UTC], ["id", 20]]
  [1m[35m (92.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 97ms (ActiveRecord: 93.0ms)


Started GET "/" for ::1 at 2016-07-10 18:03:29 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (22.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 44.3ms | ActiveRecord: 0.6ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.1ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 35.1ms | ActiveRecord: 0.8ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:34 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3WvEuVnGqENw3WZwEKjjT60L8wXuD0BFFf0R9jeb7g5gXmXjJdxkqZ6s4pwCoXsI8FdYzQ8XTW4nWPOZWWbAZQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:34 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3WvEuVnGqENw3WZwEKjjT60L8wXuD0BFFf0R9jeb7g5gXmXjJdxkqZ6s4pwCoXsI8FdYzQ8XTW4nWPOZWWbAZQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:34 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3WvEuVnGqENw3WZwEKjjT60L8wXuD0BFFf0R9jeb7g5gXmXjJdxkqZ6s4pwCoXsI8FdYzQ8XTW4nWPOZWWbAZQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:34 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3WvEuVnGqENw3WZwEKjjT60L8wXuD0BFFf0R9jeb7g5gXmXjJdxkqZ6s4pwCoXsI8FdYzQ8XTW4nWPOZWWbAZQ=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:34 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3WvEuVnGqENw3WZwEKjjT60L8wXuD0BFFf0R9jeb7g5gXmXjJdxkqZ6s4pwCoXsI8FdYzQ8XTW4nWPOZWWbAZQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:03:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 25ms (Views: 24.1ms | ActiveRecord: 0.1ms)


Started DELETE "/users/20" for ::1 at 2016-07-10 18:03:35 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"keyw8k1cgfyWDUDPKxoeSK1GLv9g3BBDlTvaelHFoRCyd/9BZz1P3DC+tzC5TJLWWOMTgj00RRCzMlR4kc70Cg==", "id"=>"20"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 20]]
  [1m[35m (121.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 125ms (ActiveRecord: 122.6ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:35 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.1ms)


Started DELETE "/users/19" for ::1 at 2016-07-10 18:03:36 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"l8eDbrMmrFTIYLr1hGXfYMcJ8KV6WFI/YGGEKTnUB3S0XMzdmUdidG7TTQoWM1P+MqzN2CewB2xGaAor+d9Sbg==", "id"=>"19"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 19]]
  [1m[35m (149.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 152ms (ActiveRecord: 150.0ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
Completed 200 OK in 24ms (Views: 23.4ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:38 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:38 +0300
Started GET "/users/auth/facebook/callback?code=AQDKyUuIod3KCaGXoAYu8j2CbzSFyhkrBeC_jjWKHUYloVpF0Jf6xuTGcaH2bQv3gkZEnmTnrE6BqHeczaNHHZ5UYgxZwVfDTrx1j9-0wQkAwHPJxYwFdp4WjFjk2aWGDessmlwaGXmWmXjswEZTlDSmSbWi972d6o7bFBIfbPYUplehypGB8iE0OQODoibAz20p0WwQtybshnDno059OCyga5B3a9HHKXU1WJJqaZuwqk4_IEfmAHFgmVud6JO8LEjcS5r8s-8cGaq5TPPWeXfUYWODXNAzYdmsgUcDcsumkuUBzfAJyGqGVdNIAg2e9wIzMOeNCwXYi2Q9nx8m6v2E&state=16b315dcc9ee68becb4f8d9d6a2d43f4106470fd5e37e552" for ::1 at 2016-07-10 18:03:38 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDKyUuIod3KCaGXoAYu8j2CbzSFyhkrBeC_jjWKHUYloVpF0Jf6xuTGcaH2bQv3gkZEnmTnrE6BqHeczaNHHZ5UYgxZwVfDTrx1j9-0wQkAwHPJxYwFdp4WjFjk2aWGDessmlwaGXmWmXjswEZTlDSmSbWi972d6o7bFBIfbPYUplehypGB8iE0OQODoibAz20p0WwQtybshnDno059OCyga5B3a9HHKXU1WJJqaZuwqk4_IEfmAHFgmVud6JO8LEjcS5r8s-8cGaq5TPPWeXfUYWODXNAzYdmsgUcDcsumkuUBzfAJyGqGVdNIAg2e9wIzMOeNCwXYi2Q9nx8m6v2E", "state"=>"16b315dcc9ee68becb4f8d9d6a2d43f4106470fd5e37e552"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?)[0m  [["created_at", 2016-07-10 15:03:39 UTC], ["updated_at", 2016-07-10 15:03:39 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$3eCnKWNep5fUXIOXvIrqeeMIW5j2nu8GPBwl/vVVQ9DV7rRPyRqMq"]]
  [1m[35m (103.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:03:39 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:03:39 UTC], ["last_sign_in_at", 2016-07-10 15:03:39 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 21]]
  [1m[35m (63.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 297ms (ActiveRecord: 168.1ms)


Started GET "/" for ::1 at 2016-07-10 18:03:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 20.7ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.7ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:47 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"8KwmqniGQHAWuReDMj7lvUjUp/aRgEEq40jIly3psUSL7KFVTsFx5yFwwDNF1oBp3c8m5Y2Ty1IBWaCyOwB+Ow=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:47 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"8KwmqniGQHAWuReDMj7lvUjUp/aRgEEq40jIly3psUSL7KFVTsFx5yFwwDNF1oBp3c8m5Y2Ty1IBWaCyOwB+Ow=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 18:03:47 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 200 OK in 29ms (Views: 28.5ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:03:49 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:03:49 +0300
Started GET "/users/auth/vkontakte/callback?code=ecb8918ff514758517&state=a11892a7dc8639be6b7882a7e62b17c2571fb28d69621621" for ::1 at 2016-07-10 18:03:50 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"ecb8918ff514758517", "state"=>"a11892a7dc8639be6b7882a7e62b17c2571fb28d69621621"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 15:03:51 UTC], ["updated_at", 2016-07-10 15:03:51 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$2zOcr46Vbc9ShgN0LY45DOsXqixFwwcYs3zthLfuiue2dQUZJu8Ni"]]
  [1m[35m (102.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:03:51 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:03:51 UTC], ["last_sign_in_at", 2016-07-10 15:03:51 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 22]]
  [1m[35m (63.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 298ms (ActiveRecord: 166.9ms)


Started GET "/" for ::1 at 2016-07-10 18:03:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 22], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:03:54 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"w1vAN6caEDI6vFoUqNZFZR8ox2Hqn+5zxn8GcJja1k/ghxj/4tV3FhvgpGaN3GIdxF21vZGfo7P6WCeqaHmXxw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:03:54 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
Completed 200 OK in 27ms (Views: 25.1ms | ActiveRecord: 0.2ms)


Started DELETE "/users/21" for ::1 at 2016-07-10 18:03:55 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"C5A4yQa/lX8IuLrHkyQ0Fec9zhGbGgklgCj1VEafjFceHatN2wl0uo+2+MXgKPNjrgd5uBovoNwxaOZjSTtCrA==", "id"=>"21"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 21]]
  [1m[35m (119.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 122ms (ActiveRecord: 119.9ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
Completed 200 OK in 23ms (Views: 21.4ms | ActiveRecord: 0.1ms)


Started DELETE "/users/22" for ::1 at 2016-07-10 18:03:57 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"J2PLvJUaB0dNpau2XXUClTQpqDa3npzWJCM8dq8BWzUy7lg4SKzmgsqr6bQuecXjfRMfnzarNS+VYy9BoKWVzg==", "id"=>"22"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 22]]
  [1m[35m (155.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 159ms (ActiveRecord: 155.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:03:57 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:58 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:03:58 +0300
Started GET "/users/auth/facebook/callback?code=AQBudxMnkyc0jU8JoxGlUbRP7jzXD_atlbsxKtGVm2H6fL0IbFpODtL__tjg7dQQSJ2Sgk-Q8LuA_-yA8wXlTwu40NqyZpKF8-WXrpu4keNqfuu2RkZG5y9a9G_kZ_MVmcbnDUCNxiLmuWTkTy-cqYhqNsMj5ayaq5GI4XX2ai5JnKLmuzygJtYHYYYkUgeiPttQFJJWd2BZRgnr67vdkYb2xMRTA4dLAd-3JqBz3z-CFUlHh55MjSI1QZBOsJGo-YUMnXfnvNZb2viBCV-onNkHneVNVwXMkXGUjHBHe7IfcmMntCkVaYw5mUiDougrKFbTA-ZTcQfJijYSveRfhgFn&state=2ab39358f5e9ae6869fc65b99ab580baf48bd0f6e88cb160" for ::1 at 2016-07-10 18:03:59 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBudxMnkyc0jU8JoxGlUbRP7jzXD_atlbsxKtGVm2H6fL0IbFpODtL__tjg7dQQSJ2Sgk-Q8LuA_-yA8wXlTwu40NqyZpKF8-WXrpu4keNqfuu2RkZG5y9a9G_kZ_MVmcbnDUCNxiLmuWTkTy-cqYhqNsMj5ayaq5GI4XX2ai5JnKLmuzygJtYHYYYkUgeiPttQFJJWd2BZRgnr67vdkYb2xMRTA4dLAd-3JqBz3z-CFUlHh55MjSI1QZBOsJGo-YUMnXfnvNZb2viBCV-onNkHneVNVwXMkXGUjHBHe7IfcmMntCkVaYw5mUiDougrKFbTA-ZTcQfJijYSveRfhgFn", "state"=>"2ab39358f5e9ae6869fc65b99ab580baf48bd0f6e88cb160"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?)[0m  [["created_at", 2016-07-10 15:03:59 UTC], ["updated_at", 2016-07-10 15:03:59 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$t4aKEgj61XyseZpg838xOuXfrTVGVicoqulOxBHGJyFV0XBs1dQFS"]]
  [1m[35m (55.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:03:59 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:03:59 UTC], ["last_sign_in_at", 2016-07-10 15:03:59 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 23]]
  [1m[35m (68.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 256ms (ActiveRecord: 125.4ms)


Started GET "/" for ::1 at 2016-07-10 18:03:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/23" for ::1 at 2016-07-10 18:04:02 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"mdFq1YZE7Ptv53G8J9kIrmkpa0dxFkxhnf1/ZM80rjaNt9CaUbUyuGbuWNSO92S+CaB75GKxxM2IoArRgucn9g==", "id"=>"23"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 23]]
  [1m[35m (113.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 116ms (ActiveRecord: 114.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:04:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:06:42 +0300
  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:16: syntax error, unexpected tSYMBEG, expecting ')'
       :url => data.url) 
        ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:16: syntax error, unexpected ')', expecting keyword_end
       :url => data.url) 
                        ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:32: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/user.rb:16: syntax error, unexpected tSYMBEG, expecting ')'
app/models/user.rb:16: syntax error, unexpected ')', expecting keyword_end
app/models/user.rb:32: syntax error, unexpected end-of-input, expecting keyword_end
config/routes.rb:10:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.1ms)
Started GET "/" for ::1 at 2016-07-10 18:09:27 +0300
  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:15: syntax error, unexpected tSYMBEG, expecting ')'
       :url => access_token.info.urls) 
        ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:15: syntax error, unexpected ')', expecting keyword_end
       :url => access_token.info.urls) 
                                      ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:31: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/user.rb:15: syntax error, unexpected tSYMBEG, expecting ')'
app/models/user.rb:15: syntax error, unexpected ')', expecting keyword_end
app/models/user.rb:31: syntax error, unexpected end-of-input, expecting keyword_end
config/routes.rb:10:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.2ms)
Started GET "/" for ::1 at 2016-07-10 18:09:29 +0300
  
ActionController::RoutingError (No route matches [GET] "/"):
  
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.8ms)
  Rendered collection of /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb [2 times] (2.2ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (22.2ms)
Started GET "/" for ::1 at 2016-07-10 18:09:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.6ms)
Completed 200 OK in 33ms (Views: 31.3ms | ActiveRecord: 1.0ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:09:42 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:09:42 +0300
Started GET "/users/auth/facebook/callback?code=AQAxXzwen4Bhrp8Vk-lmQLwvFwfZrcfi4g5oUFUjMPSpZU0JliQjaGtFYdvEQtcZKheN9zCLxrx68b6ekOhEx6Y-SJZjNQLimJfNRgujBBKmVsMrl0JYUw6bPzD3aobRuB6CSY6OvlM435qykFfImfcgHH6QqUysWak70A4NnsK5uzLLRIEjxO1MfiTHbYeqBXoFKHZWpKJeVWP7Tfh6EhhXGV-OsaaKz3m5F8Isy7LIaCdRrA9Jx52GUgq_oKIXuTR5vYTeORA8exgr0ilUQsliQRuplPMA-OHZzYYuXuQJWZEWbfo3swBdlMT4a_6fL3MpZmwB8ePFlGbDPihKPGOe&state=3a9e12a277cd863b65ce836fe86f76b5fca0959e15366096" for ::1 at 2016-07-10 18:09:42 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAxXzwen4Bhrp8Vk-lmQLwvFwfZrcfi4g5oUFUjMPSpZU0JliQjaGtFYdvEQtcZKheN9zCLxrx68b6ekOhEx6Y-SJZjNQLimJfNRgujBBKmVsMrl0JYUw6bPzD3aobRuB6CSY6OvlM435qykFfImfcgHH6QqUysWak70A4NnsK5uzLLRIEjxO1MfiTHbYeqBXoFKHZWpKJeVWP7Tfh6EhhXGV-OsaaKz3m5F8Isy7LIaCdRrA9Jx52GUgq_oKIXuTR5vYTeORA8exgr0ilUQsliQRuplPMA-OHZzYYuXuQJWZEWbfo3swBdlMT4a_6fL3MpZmwB8ePFlGbDPihKPGOe", "state"=>"3a9e12a277cd863b65ce836fe86f76b5fca0959e15366096"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 125ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:09:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:09:47 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:09:47 +0300
Started GET "/users/auth/facebook/callback?code=AQDq1qiWUaVvRPiuanZPtRRYqpxG8AZQZc99fRCDBoBB7bABBT6QPWgS6JbLYSCMktldz9l_KSBZe1F56Tm87uKhAmrcdcXDRCIurKJRXb2nC_TooTK_0DrZqcTUDjFZE5c6r4yoIPOiG7ET6y4uelDS4XBLVbuwe5gtntw8UouWXLctVofC8YhqHOsOTtIjZLuSyh8BiL-bVjL1oe2km1ZIszhvup9HcLPd0DwxSDseAG6moatiEXOY-qNxZ8lu5BYY6VDmrvt_zbVVEoWsVaveHlNSl2IsvXUfPf8dh8O3nbNH1wr69PW6K-wV_BnnKYCy3onPsD2rpBFIdYfNBBDZ&state=7382c597dbdf101eb1d7679792452db4e699e9d363d6d528" for ::1 at 2016-07-10 18:09:47 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDq1qiWUaVvRPiuanZPtRRYqpxG8AZQZc99fRCDBoBB7bABBT6QPWgS6JbLYSCMktldz9l_KSBZe1F56Tm87uKhAmrcdcXDRCIurKJRXb2nC_TooTK_0DrZqcTUDjFZE5c6r4yoIPOiG7ET6y4uelDS4XBLVbuwe5gtntw8UouWXLctVofC8YhqHOsOTtIjZLuSyh8BiL-bVjL1oe2km1ZIszhvup9HcLPd0DwxSDseAG6moatiEXOY-qNxZ8lu5BYY6VDmrvt_zbVVEoWsVaveHlNSl2IsvXUfPf8dh8O3nbNH1wr69PW6K-wV_BnnKYCy3onPsD2rpBFIdYfNBBDZ", "state"=>"7382c597dbdf101eb1d7679792452db4e699e9d363d6d528"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 122ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:09:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (2.9ms)
Completed 200 OK in 23ms (Views: 20.9ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 18:13:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.1ms)
Completed 200 OK in 34ms (Views: 31.3ms | ActiveRecord: 1.0ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:13:42 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:13:42 +0300
Started GET "/users/auth/facebook/callback?code=AQCNWCV58FJ1QVuxJWRQr8FR4oI1tfuG76K9PclCmCVxXvhdIibAyGbuVCFF-ZNWZYpH77aD57PiZdRc0T8aP3Od2rrz88Ty3L753teBe6R7bgvDCG0evx-UsDkzT8VS_UpdVKFF17z-rM6YX0CwehdHXCRQYAcqkOinPGf4YE283rIgtzExkjWc3dkqd64N_QyOSz0dJ0JqRnpbFuIAAH4WEYqUHyn2_d_whHgy3xHkQeWZPrk9ZYjgubmIw3LsugcSPvtS9UX2NWJtV5BG3KDEPrXgeJr9tvTVaFZ8ndKug283K2RKiBmzVTEHXNI8TJ1mr1f1_h-XZGRv5dNzGvNc&state=66b7c5e4c5598140d2e085f97cf351195d160c299449be0a" for ::1 at 2016-07-10 18:13:42 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCNWCV58FJ1QVuxJWRQr8FR4oI1tfuG76K9PclCmCVxXvhdIibAyGbuVCFF-ZNWZYpH77aD57PiZdRc0T8aP3Od2rrz88Ty3L753teBe6R7bgvDCG0evx-UsDkzT8VS_UpdVKFF17z-rM6YX0CwehdHXCRQYAcqkOinPGf4YE283rIgtzExkjWc3dkqd64N_QyOSz0dJ0JqRnpbFuIAAH4WEYqUHyn2_d_whHgy3xHkQeWZPrk9ZYjgubmIw3LsugcSPvtS9UX2NWJtV5BG3KDEPrXgeJr9tvTVaFZ8ndKug283K2RKiBmzVTEHXNI8TJ1mr1f1_h-XZGRv5dNzGvNc", "state"=>"66b7c5e4c5598140d2e085f97cf351195d160c299449be0a"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 123ms (ActiveRecord: 0.1ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'name' for User.):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.7ms)
Started GET "/users/auth/facebook/callback?code=AQCNWCV58FJ1QVuxJWRQr8FR4oI1tfuG76K9PclCmCVxXvhdIibAyGbuVCFF-ZNWZYpH77aD57PiZdRc0T8aP3Od2rrz88Ty3L753teBe6R7bgvDCG0evx-UsDkzT8VS_UpdVKFF17z-rM6YX0CwehdHXCRQYAcqkOinPGf4YE283rIgtzExkjWc3dkqd64N_QyOSz0dJ0JqRnpbFuIAAH4WEYqUHyn2_d_whHgy3xHkQeWZPrk9ZYjgubmIw3LsugcSPvtS9UX2NWJtV5BG3KDEPrXgeJr9tvTVaFZ8ndKug283K2RKiBmzVTEHXNI8TJ1mr1f1_h-XZGRv5dNzGvNc&state=66b7c5e4c5598140d2e085f97cf351195d160c299449be0a" for ::1 at 2016-07-10 18:14:05 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQCNWCV58FJ1QVuxJWRQr8FR4oI1tfuG76K9PclCmCVxXvhdIibAyGbuVCFF-ZNWZYpH77aD57PiZdRc0T8aP3Od2rrz88Ty3L753teBe6R7bgvDCG0evx-UsDkzT8VS_UpdVKFF17z-rM6YX0CwehdHXCRQYAcqkOinPGf4YE283rIgtzExkjWc3dkqd64N_QyOSz0dJ0JqRnpbFuIAAH4WEYqUHyn2_d_whHgy3xHkQeWZPrk9ZYjgubmIw3LsugcSPvtS9UX2NWJtV5BG3KDEPrXgeJr9tvTVaFZ8ndKug283K2RKiBmzVTEHXNI8TJ1mr1f1_h-XZGRv5dNzGvNc", "state"=>"66b7c5e4c5598140d2e085f97cf351195d160c299449be0a"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 18:14:05 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.1ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (15.1ms)
Completed 200 OK in 49ms (Views: 40.9ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:08 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:09 +0300
Started GET "/users/auth/facebook/callback?code=AQCbFwpaDFc07E-UmHgzmkOwBYYfC-4MZ7aINXh9MuH3g9fHHIcdHgx-ihz_8IV--3aCrfjq-CYbxgvT39jgOUpruInQVw-nsJriSrzYbaifalTo19j8ilXQqyMp-22y2fJ-25ACcxaqolslzjXNoR0VFsHc8Q9THX14EMEQAMTRDSuaVnSXOw55K7-E4l8jTGcGxytAbbR5rQRRUPe563rvGt7MuJGN8GB8CHTpE31dJy0zmX8R0csxVJd003hK54ASGCnEGesYva2Ulj_C6nvjEeI2BDtWN3kNIvrvRdL3dnuv8vTQNoiuXkhCz2-uTCm5hiVgoc7HioHprvSec1Sb&state=80f3222094f582025ae759433b16b889531ecf8efbf4e08a" for ::1 at 2016-07-10 18:14:09 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCbFwpaDFc07E-UmHgzmkOwBYYfC-4MZ7aINXh9MuH3g9fHHIcdHgx-ihz_8IV--3aCrfjq-CYbxgvT39jgOUpruInQVw-nsJriSrzYbaifalTo19j8ilXQqyMp-22y2fJ-25ACcxaqolslzjXNoR0VFsHc8Q9THX14EMEQAMTRDSuaVnSXOw55K7-E4l8jTGcGxytAbbR5rQRRUPe563rvGt7MuJGN8GB8CHTpE31dJy0zmX8R0csxVJd003hK54ASGCnEGesYva2Ulj_C6nvjEeI2BDtWN3kNIvrvRdL3dnuv8vTQNoiuXkhCz2-uTCm5hiVgoc7HioHprvSec1Sb", "state"=>"80f3222094f582025ae759433b16b889531ecf8efbf4e08a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 131ms (ActiveRecord: 0.2ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'name' for User.):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.4ms)
Started GET "/users/auth/facebook/callback?code=AQCbFwpaDFc07E-UmHgzmkOwBYYfC-4MZ7aINXh9MuH3g9fHHIcdHgx-ihz_8IV--3aCrfjq-CYbxgvT39jgOUpruInQVw-nsJriSrzYbaifalTo19j8ilXQqyMp-22y2fJ-25ACcxaqolslzjXNoR0VFsHc8Q9THX14EMEQAMTRDSuaVnSXOw55K7-E4l8jTGcGxytAbbR5rQRRUPe563rvGt7MuJGN8GB8CHTpE31dJy0zmX8R0csxVJd003hK54ASGCnEGesYva2Ulj_C6nvjEeI2BDtWN3kNIvrvRdL3dnuv8vTQNoiuXkhCz2-uTCm5hiVgoc7HioHprvSec1Sb&state=80f3222094f582025ae759433b16b889531ecf8efbf4e08a" for ::1 at 2016-07-10 18:14:31 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQCbFwpaDFc07E-UmHgzmkOwBYYfC-4MZ7aINXh9MuH3g9fHHIcdHgx-ihz_8IV--3aCrfjq-CYbxgvT39jgOUpruInQVw-nsJriSrzYbaifalTo19j8ilXQqyMp-22y2fJ-25ACcxaqolslzjXNoR0VFsHc8Q9THX14EMEQAMTRDSuaVnSXOw55K7-E4l8jTGcGxytAbbR5rQRRUPe563rvGt7MuJGN8GB8CHTpE31dJy0zmX8R0csxVJd003hK54ASGCnEGesYva2Ulj_C6nvjEeI2BDtWN3kNIvrvRdL3dnuv8vTQNoiuXkhCz2-uTCm5hiVgoc7HioHprvSec1Sb", "state"=>"80f3222094f582025ae759433b16b889531ecf8efbf4e08a"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 18:14:31 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.8ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 39ms (Views: 29.9ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:34 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:35 +0300
Started GET "/users/auth/facebook/callback?code=AQC3pP3VufqBWxyOIE1L-bmGv0VDgzJ3BYIG0F2srubtGOdS5Jkn74sb2RsR3b8jcKdvaB_3UoVMk-KGqMa9-9GIieklpTT3xOl-6J6rKXQQMygL33rS6YcGPeC9gSPaOjhZYJQPP9MAWfZeKc6bjrvspWPnXDfOg-R24_2q3QzwgMpsWO7cRHJyA69eAHHKxMG_l316OPRbd0ldwly3c_EDTEosl41y7UaTUAMjEDBDmVuGQfIja-fE6Km-0aS_2ItwtFnvPW-jFe17az13hsAG_BcQPcGGWRl1Ct7eh4oZPP7mSylU2fIYuFEf09iwQzjck4XHG3pclqrG6Uc23Gl5&state=a3c42f31a12febf7b5234d683703a5b570a2f514b3d12e64" for ::1 at 2016-07-10 18:14:35 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC3pP3VufqBWxyOIE1L-bmGv0VDgzJ3BYIG0F2srubtGOdS5Jkn74sb2RsR3b8jcKdvaB_3UoVMk-KGqMa9-9GIieklpTT3xOl-6J6rKXQQMygL33rS6YcGPeC9gSPaOjhZYJQPP9MAWfZeKc6bjrvspWPnXDfOg-R24_2q3QzwgMpsWO7cRHJyA69eAHHKxMG_l316OPRbd0ldwly3c_EDTEosl41y7UaTUAMjEDBDmVuGQfIja-fE6Km-0aS_2ItwtFnvPW-jFe17az13hsAG_BcQPcGGWRl1Ct7eh4oZPP7mSylU2fIYuFEf09iwQzjck4XHG3pclqrG6Uc23Gl5", "state"=>"a3c42f31a12febf7b5234d683703a5b570a2f514b3d12e64"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 123ms (ActiveRecord: 0.3ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'link' for User.):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:51 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:51 +0300
Started GET "/users/auth/facebook/callback?code=AQDMf4iWoXmSgI00HmiEIgzp0beRAFOoD7Nr6gHjzh6euPpIJDAo3HNfyXRcPerUGRkZpQ25x-XFHGWzfTqJRUtiS5DB9zfLN1vAa6d2S4VdLTUmZS-KIQZ65BoyBrSCl0ILUoMYKBymbronel3rObDI8DOtLXwmOCpRvstHMXvBHhOslkfbVDLwzCVwgIsKFYrBOYNq0HuJZq_pIz9hhSLTIhcdGMjxEdDlpZ9QaDCLCUbbi3hXNPJT3xccEOQ7_JEqH5KkeJUnwVedVeLHgGHrs7aFnfVuUF97XtdO1j87VxcmPLkqAoUTEeu8is8B_O3swliJ_e8jUhvJAKDwpg9G&state=6b76c6b42ea7bae8588a98a88fcbb235c0ab43dd8ecd480a" for ::1 at 2016-07-10 18:14:51 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDMf4iWoXmSgI00HmiEIgzp0beRAFOoD7Nr6gHjzh6euPpIJDAo3HNfyXRcPerUGRkZpQ25x-XFHGWzfTqJRUtiS5DB9zfLN1vAa6d2S4VdLTUmZS-KIQZ65BoyBrSCl0ILUoMYKBymbronel3rObDI8DOtLXwmOCpRvstHMXvBHhOslkfbVDLwzCVwgIsKFYrBOYNq0HuJZq_pIz9hhSLTIhcdGMjxEdDlpZ9QaDCLCUbbi3hXNPJT3xccEOQ7_JEqH5KkeJUnwVedVeLHgGHrs7aFnfVuUF97XtdO1j87VxcmPLkqAoUTEeu8is8B_O3swliJ_e8jUhvJAKDwpg9G", "state"=>"6b76c6b42ea7bae8588a98a88fcbb235c0ab43dd8ecd480a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 134ms (ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 18:14:52 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 26ms (Views: 24.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:56 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:14:56 +0300
Started GET "/users/auth/facebook/callback?code=AQDFWFO5UACjKKH1cIufeE5GmgYYuyHujYC71QLeKZKNRh61hy0l9K6njhjBM2LEQYyhm_MH5kAgVPS36CMdNzWcL2ACEIa7H_qWpuS6AZIJCAMx7msmNV_HWf4LtxwapqIrKlXZM20XyEv_zvO9ldw7Rube4hRYr5rtZtvLtE0Sz6Q8k90ypkrzUN-UjSWROGc8QubPRySEFE-rYVEkC7pNZjNBvIa1c4yt2tEXHlFHXhc8fUN2AQnXX0xYBvBSavBT6yX8trKOlclM_y-HVM_WRyba6yRpGTXVDdWUHztI4vNVoVDNGssJOeYOCXEOGAkg8Cpg2iIagJGtiksoYJXv&state=75fc8061f6184b46c6a4f920709ec7f461c9694516ab3c76" for ::1 at 2016-07-10 18:14:56 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDFWFO5UACjKKH1cIufeE5GmgYYuyHujYC71QLeKZKNRh61hy0l9K6njhjBM2LEQYyhm_MH5kAgVPS36CMdNzWcL2ACEIa7H_qWpuS6AZIJCAMx7msmNV_HWf4LtxwapqIrKlXZM20XyEv_zvO9ldw7Rube4hRYr5rtZtvLtE0Sz6Q8k90ypkrzUN-UjSWROGc8QubPRySEFE-rYVEkC7pNZjNBvIa1c4yt2tEXHlFHXhc8fUN2AQnXX0xYBvBSavBT6yX8trKOlclM_y-HVM_WRyba6yRpGTXVDdWUHztI4vNVoVDNGssJOeYOCXEOGAkg8Cpg2iIagJGtiksoYJXv", "state"=>"75fc8061f6184b46c6a4f920709ec7f461c9694516ab3c76"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 125ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:14:57 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 40ms (Views: 39.0ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 18:15:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.0ms)
Completed 200 OK in 38ms (Views: 35.3ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:15:51 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:15:52 +0300
Started GET "/users/auth/facebook/callback?code=AQCFQAe7Q3jtHJuPxppR3FjnQknVG7YbNPKTeXuhWDEhkBV73H2CIxTlihFVPhNaTBQiTFG7rtJnXwj8K8Y54y97FaAXKACETvbt54yvbiNmD80rOD_SonjgMwt9aPlpY8n5jO6X_6bCEKMZ7TEem9lQSjdZ1G4GxE22GDEIVPMWp2gjRKSdH5_dGzcVQIVKiS5a-OUUcdO-yNIxFscxP3OpuIR2qN94MrdTBWwibOiUqSIgulVa9rbswKl9CL5NiOfnoxlPSDyaAlCSoR1DIXvRxV8LxN9FprOMr0ZbqxNNpjhrdK8w9zXIulkeiuXCMPXBtjqfuJTnpK6HD2UqBRPF&state=943b19ca79a25e0677c6d355269dff3c7a274890e2f2b94e" for ::1 at 2016-07-10 18:15:52 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCFQAe7Q3jtHJuPxppR3FjnQknVG7YbNPKTeXuhWDEhkBV73H2CIxTlihFVPhNaTBQiTFG7rtJnXwj8K8Y54y97FaAXKACETvbt54yvbiNmD80rOD_SonjgMwt9aPlpY8n5jO6X_6bCEKMZ7TEem9lQSjdZ1G4GxE22GDEIVPMWp2gjRKSdH5_dGzcVQIVKiS5a-OUUcdO-yNIxFscxP3OpuIR2qN94MrdTBWwibOiUqSIgulVa9rbswKl9CL5NiOfnoxlPSDyaAlCSoR1DIXvRxV8LxN9FprOMr0ZbqxNNpjhrdK8w9zXIulkeiuXCMPXBtjqfuJTnpK6HD2UqBRPF", "state"=>"943b19ca79a25e0677c6d355269dff3c7a274890e2f2b94e"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 125ms (ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 18:15:52 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 25ms (Views: 24.1ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:20:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.4ms)
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 18:20:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.5ms)
Completed 200 OK in 26ms (Views: 24.3ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:20:24 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:20:24 +0300
Started GET "/users/auth/facebook/callback?code=AQBVINGTaYPIqbNSnCpZPVgEFVr2pE5CeGdt9k9Hsv4NgzRfEXxSgG8Prs9Fb2cKBPzYzCDpbH0jAbqDaE4_JXGnqPeRNuikr55GXeWxQkQ7don_W2LedWTFYDmy4DSzMTEGSvqKdfs2iR5Ds6E5dpF4mUn-qVQ-rLPYub7JWGNxjRAMzy5Hy8kLdBhwUtnEr5v2qO5QBbP2aVSKVfQ_EkKxDUADlSfeR8M6IfOaGv8BD-TKAnv9AAc-VTmnL6BCkEz34m3yjYEeWa1moGPDksucPqlA5lHYxVUaFI_qr35ztBtPt3ekyPrdjAqjUNx8_KsX7RdLawNAJheWUez92bVC&state=4317bb40973482f4f569ff0420edf9a4c35361deb771daf0" for ::1 at 2016-07-10 18:20:24 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBVINGTaYPIqbNSnCpZPVgEFVr2pE5CeGdt9k9Hsv4NgzRfEXxSgG8Prs9Fb2cKBPzYzCDpbH0jAbqDaE4_JXGnqPeRNuikr55GXeWxQkQ7don_W2LedWTFYDmy4DSzMTEGSvqKdfs2iR5Ds6E5dpF4mUn-qVQ-rLPYub7JWGNxjRAMzy5Hy8kLdBhwUtnEr5v2qO5QBbP2aVSKVfQ_EkKxDUADlSfeR8M6IfOaGv8BD-TKAnv9AAc-VTmnL6BCkEz34m3yjYEeWa1moGPDksucPqlA5lHYxVUaFI_qr35ztBtPt3ekyPrdjAqjUNx8_KsX7RdLawNAJheWUez92bVC", "state"=>"4317bb40973482f4f569ff0420edf9a4c35361deb771daf0"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:20:25 UTC], ["updated_at", 2016-07-10 15:20:25 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$IrZJO5mA/OPvWWYbnH6P4.yzVUWKb9XhViZV5kY7PNc2gbxxFowlC"]]
  [1m[35m (95.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:20:25 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:20:25 UTC], ["last_sign_in_at", 2016-07-10 15:20:25 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 24]]
  [1m[35m (64.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 293ms (ActiveRecord: 161.2ms)


Started GET "/" for ::1 at 2016-07-10 18:20:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.6ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 18:20:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 24.2ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:20:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:20:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 49ms (Views: 47.2ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:20:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 33.0ms | ActiveRecord: 0.6ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:20:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZyWUfcfsVVWjZlgsw+BXoveotuHfIKlS3orV0w3oS0ZMNsQymYTYRTrSuiBUGnVh2MuwX7IYVK+bN7GK9XC7Bg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:20:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZyWUfcfsVVWjZlgsw+BXoveotuHfIKlS3orV0w3oS0ZMNsQymYTYRTrSuiBUGnVh2MuwX7IYVK+bN7GK9XC7Bg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:20:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZyWUfcfsVVWjZlgsw+BXoveotuHfIKlS3orV0w3oS0ZMNsQymYTYRTrSuiBUGnVh2MuwX7IYVK+bN7GK9XC7Bg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:20:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZyWUfcfsVVWjZlgsw+BXoveotuHfIKlS3orV0w3oS0ZMNsQymYTYRTrSuiBUGnVh2MuwX7IYVK+bN7GK9XC7Bg=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:20:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZyWUfcfsVVWjZlgsw+BXoveotuHfIKlS3orV0w3oS0ZMNsQymYTYRTrSuiBUGnVh2MuwX7IYVK+bN7GK9XC7Bg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:20:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
Completed 200 OK in 22ms (Views: 20.9ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:21:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.4ms)
Completed 200 OK in 33ms (Views: 30.8ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 18:21:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 200 OK in 23ms (Views: 22.0ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:21:46 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:21:46 +0300
Started GET "/users/auth/facebook/callback?code=AQAdnJnhGcIGoADtu8cUcELDFJasISYvmvML9ayzjBC19LQZBzDw0wvFm0JvrJSyE71cRxDYNMzjI5-krD7nmGywUASLKRzsZvcKk0KtLl-qm9n9TwnQVywAc3qv4kF9nH_jf_5WBfLulegzHLXryinnZIvODQu3rIYFD89GUdPuq5rbUAziYl0jGhFxw5I0I5oOaXNvPiJTU4vxqLX8Kf9XDLWB56ZxsaE9aVPjXXLsRNAxtKI_G63FpCESGx5hocIYovXLZGFfStNn0YL-wok7dCU2LYGynd7R0_ffBJLMReDa9xgyjZh6Fv2V-ydRwUAB8EbbO1kUBYItPAWh-xmm&state=23ab098077daba567ea615498550d6857d7b546acef9c5b8" for ::1 at 2016-07-10 18:21:47 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAdnJnhGcIGoADtu8cUcELDFJasISYvmvML9ayzjBC19LQZBzDw0wvFm0JvrJSyE71cRxDYNMzjI5-krD7nmGywUASLKRzsZvcKk0KtLl-qm9n9TwnQVywAc3qv4kF9nH_jf_5WBfLulegzHLXryinnZIvODQu3rIYFD89GUdPuq5rbUAziYl0jGhFxw5I0I5oOaXNvPiJTU4vxqLX8Kf9XDLWB56ZxsaE9aVPjXXLsRNAxtKI_G63FpCESGx5hocIYovXLZGFfStNn0YL-wok7dCU2LYGynd7R0_ffBJLMReDa9xgyjZh6Fv2V-ydRwUAB8EbbO1kUBYItPAWh-xmm", "state"=>"23ab098077daba567ea615498550d6857d7b546acef9c5b8"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
Started GET "/users/auth/facebook/callback?code=AQAdnJnhGcIGoADtu8cUcELDFJasISYvmvML9ayzjBC19LQZBzDw0wvFm0JvrJSyE71cRxDYNMzjI5-krD7nmGywUASLKRzsZvcKk0KtLl-qm9n9TwnQVywAc3qv4kF9nH_jf_5WBfLulegzHLXryinnZIvODQu3rIYFD89GUdPuq5rbUAziYl0jGhFxw5I0I5oOaXNvPiJTU4vxqLX8Kf9XDLWB56ZxsaE9aVPjXXLsRNAxtKI_G63FpCESGx5hocIYovXLZGFfStNn0YL-wok7dCU2LYGynd7R0_ffBJLMReDa9xgyjZh6Fv2V-ydRwUAB8EbbO1kUBYItPAWh-xmm&state=23ab098077daba567ea615498550d6857d7b546acef9c5b8" for ::1 at 2016-07-10 18:23:39 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQAdnJnhGcIGoADtu8cUcELDFJasISYvmvML9ayzjBC19LQZBzDw0wvFm0JvrJSyE71cRxDYNMzjI5-krD7nmGywUASLKRzsZvcKk0KtLl-qm9n9TwnQVywAc3qv4kF9nH_jf_5WBfLulegzHLXryinnZIvODQu3rIYFD89GUdPuq5rbUAziYl0jGhFxw5I0I5oOaXNvPiJTU4vxqLX8Kf9XDLWB56ZxsaE9aVPjXXLsRNAxtKI_G63FpCESGx5hocIYovXLZGFfStNn0YL-wok7dCU2LYGynd7R0_ffBJLMReDa9xgyjZh6Fv2V-ydRwUAB8EbbO1kUBYItPAWh-xmm", "state"=>"23ab098077daba567ea615498550d6857d7b546acef9c5b8"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 18:23:40 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.2ms)
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.0ms)


Started DELETE "/users/24" for ::1 at 2016-07-10 18:23:44 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"815SORX8W0lzPNTNLemdKp4PzolkFyfHCoUOHSRdugsXkhZa/Fb/+y9y0+me4QJBEm3VMoykI7ZVgxmj9ShO7g==", "id"=>"24"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 24]]
  [1m[35m (194.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 197ms (ActiveRecord: 194.9ms)


Started GET "/users" for ::1 at 2016-07-10 18:23:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 200 OK in 26ms (Views: 25.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:23:45 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:23:46 +0300
Started GET "/users/auth/facebook/callback?code=AQAOBP5AReKPpTJ5EVQCKXrOrTGEni9DC1KVeH16PoAWA27ghHN6BzI7ag4-Re408NFzY06i-SuUjvaQany85a1okNBQL5uDLntMiEjsYhgdb-s56_FCqoc2gr482Y2mvRBY03VPN8gkdsQoUamZPZiNkkn4YNL_8_nSHBYrjsJhUigoZ2i6BXDBPi0T3X_U7FcfxOYw4IbkoJFvazmmMonDyxIIK_YpnAxDav0ocH1X7eibZHb95MQdG2lJgbajnaMEegRiA39dcps-_jfYJFeWuEDtOQ6EwrT3NvMdF21L7OIAyYhyuedWFAAgVltfgDNtWeMgCDdo8nW5JfVTRnjP&state=2973b80c00efabbe56a73b07d9c938285e7c01243254ac9f" for ::1 at 2016-07-10 18:23:46 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAOBP5AReKPpTJ5EVQCKXrOrTGEni9DC1KVeH16PoAWA27ghHN6BzI7ag4-Re408NFzY06i-SuUjvaQany85a1okNBQL5uDLntMiEjsYhgdb-s56_FCqoc2gr482Y2mvRBY03VPN8gkdsQoUamZPZiNkkn4YNL_8_nSHBYrjsJhUigoZ2i6BXDBPi0T3X_U7FcfxOYw4IbkoJFvazmmMonDyxIIK_YpnAxDav0ocH1X7eibZHb95MQdG2lJgbajnaMEegRiA39dcps-_jfYJFeWuEDtOQ6EwrT3NvMdF21L7OIAyYhyuedWFAAgVltfgDNtWeMgCDdo8nW5JfVTRnjP", "state"=>"2973b80c00efabbe56a73b07d9c938285e7c01243254ac9f"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `Facebook' for nil:NilClass):
  
app/models/user.rb:10:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.0ms)
Started DELETE "/users/24" for ::1 at 2016-07-10 18:23:59 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"815SORX8W0lzPNTNLemdKp4PzolkFyfHCoUOHSRdugsXkhZa/Fb/+y9y0+me4QJBEm3VMoykI7ZVgxmj9ShO7g==", "id"=>"24"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=24):
  
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.0ms)
Started GET "/" for ::1 at 2016-07-10 18:24:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.7ms)
Completed 200 OK in 37ms (Views: 35.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:24:15 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:24:15 +0300
Started GET "/users/auth/facebook/callback?code=AQC7MkUdUahO3oRgbtL8KEmx1Av2-wbrpuT5xiMVZVzy4s05LMT1gequgLOJHLWRlWuBtL9QE7RO58TLRCztnFVzkWh_ULRUKBCyZpFwggQ03VqBH7X7NW9XKeow4ntKq5ISaVGM8HLp4-ESBQYiH86cx_-lkqlGFKHNBWngaK0L6YSWUErWjmfs99NuQ32NfPkUCOJpXGMpun6XNQmn5y-PiTHPipNpxhKviA-Ui4wBt-ZO8cZq8MXfdRRZ0L6BjKxtivHar3lGoqcaIYqeA4y8C9osQzBqjR_XW7aANDLM-ktaTT1sA6EmbOpfv52KSKOgzTwImVLuN_Tf5rx_f2rH&state=0c706571bfa7b044940dabcd927699ed63d5469f55e6d6ed" for ::1 at 2016-07-10 18:24:15 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC7MkUdUahO3oRgbtL8KEmx1Av2-wbrpuT5xiMVZVzy4s05LMT1gequgLOJHLWRlWuBtL9QE7RO58TLRCztnFVzkWh_ULRUKBCyZpFwggQ03VqBH7X7NW9XKeow4ntKq5ISaVGM8HLp4-ESBQYiH86cx_-lkqlGFKHNBWngaK0L6YSWUErWjmfs99NuQ32NfPkUCOJpXGMpun6XNQmn5y-PiTHPipNpxhKviA-Ui4wBt-ZO8cZq8MXfdRRZ0L6BjKxtivHar3lGoqcaIYqeA4y8C9osQzBqjR_XW7aANDLM-ktaTT1sA6EmbOpfv52KSKOgzTwImVLuN_Tf5rx_f2rH", "state"=>"0c706571bfa7b044940dabcd927699ed63d5469f55e6d6ed"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:24:16 UTC], ["updated_at", 2016-07-10 15:24:16 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$yPM98K2C/Fyckh1Qbj3mAu6ZEXIKh.KceR1.VcB/pLi2tSpGu3pyq"]]
  [1m[35m (63.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:24:16 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:24:16 UTC], ["last_sign_in_at", 2016-07-10 15:24:16 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 25]]
  [1m[35m (64.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 257ms (ActiveRecord: 128.7ms)


Started GET "/" for ::1 at 2016-07-10 18:24:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.9ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:24:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 43.2ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:24:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:24:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 18:24:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.2ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:25:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (16.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 36.5ms | ActiveRecord: 1.4ms)


Started DELETE "/users/25" for ::1 at 2016-07-10 18:25:28 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"DWFbE2xUr3wCO6IgfHX/FeEAdmwtLq6tqMygYdH9tZ1IKVRPKXO08q4uYXoJ282gY6z+eQ5Lzzj+UCtfFEttUA==", "id"=>"25"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 25]]
  [1m[35m (120.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 124ms (ActiveRecord: 121.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:25:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (2.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 33.5ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:25:29 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:25:29 +0300
Started GET "/users/auth/facebook/callback?code=AQA1eyNTECR94Gm3GvJXSmUrg_JxICgakmVLuHXN7oow9YMFelWHdofYI_Ns8S6Yt5iTfznvzL16Vt5WmtKhKO1IzF8-zLkrUYzDPoEdLgzRr86QNwvx41s3d6s5O2md0HuVuL0byXzXWNn8knLQdx5TqoAhIjv-RZTTisDuYU02DvXp0d2_bSM_keOqEOlGxD3fZJ-qfoFI7RKtn8iiKwoh-zlg6tF1vSck0Ku9aiHHGyVdQIQAfWOGRuprKrOU4PnEcm1aZeTN3-MKnuwNM8UwjRlWU2aQdR-I4RIHNlPkZYi2RTx8Fgb6KrTkEULCwwuRmbLQkpFdABXTRG8oQ-Ce&state=ae975f5e8e3cf7b877b34b2234244ddb62f0ace19e9e1cc4" for ::1 at 2016-07-10 18:25:29 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQA1eyNTECR94Gm3GvJXSmUrg_JxICgakmVLuHXN7oow9YMFelWHdofYI_Ns8S6Yt5iTfznvzL16Vt5WmtKhKO1IzF8-zLkrUYzDPoEdLgzRr86QNwvx41s3d6s5O2md0HuVuL0byXzXWNn8knLQdx5TqoAhIjv-RZTTisDuYU02DvXp0d2_bSM_keOqEOlGxD3fZJ-qfoFI7RKtn8iiKwoh-zlg6tF1vSck0Ku9aiHHGyVdQIQAfWOGRuprKrOU4PnEcm1aZeTN3-MKnuwNM8UwjRlWU2aQdR-I4RIHNlPkZYi2RTx8Fgb6KrTkEULCwwuRmbLQkpFdABXTRG8oQ-Ce", "state"=>"ae975f5e8e3cf7b877b34b2234244ddb62f0ace19e9e1cc4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:25:30 UTC], ["updated_at", 2016-07-10 15:25:30 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$JrenV99XjZiuP6RM.kk9OeqgyyL3ADXwCiw6Ny2gmQ1nwxgqL/VKa"]]
  [1m[35m (87.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:25:30 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:25:30 UTC], ["last_sign_in_at", 2016-07-10 15:25:30 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 26]]
  [1m[35m (63.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 280ms (ActiveRecord: 152.2ms)


Started GET "/" for ::1 at 2016-07-10 18:25:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 26], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.6ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:26:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 26], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 33.8ms | ActiveRecord: 0.9ms)


Started DELETE "/users/26" for ::1 at 2016-07-10 18:26:14 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"mshKKvY0/z/9HfBMh8BZ7+JnRzB8fP9SQQYkyYoRqsJCCQryFH5S2JdtOsD0GJGfgR/znCGEdf5FHLeanAFRIg==", "id"=>"26"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 26]]
  [1m[35m (92.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 96ms (ActiveRecord: 92.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:26:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 26], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:26:16 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:26:16 +0300
Started GET "/users/auth/facebook/callback?code=AQAeKTHwxYTx8TYXKiIjuEpydPe_4LfRTXOPpS4vMuhGBGdzIc6lh9g0U1n2BJNmqSMEwgINvF7BZOoOb-9LjHsnzOkmlBEgFNb5rV08Xoz855mLARMrEsZs_xWPEClImh9SnqOglL1grVUqj38pA2L7C6k3iqwflt5VxlK8_575hvyRACtIjXLNgPYwzcgTsDQZuprErotr5NviPh4dyIirT5A6idXCfLnAYteq1J5MEH7Ec3CVqdBD-YlXOMxEcnLNTC9x6A9Dfvahl2W_y02cA3sorKsxvJXYm6CsSFqrJO5XTZ6eZfuB90gneDeU7fac1GYXOGIRBpos35_ru6kE&state=ca6142b59a75f1f8b63d9baf731dd355348f4b7742eedf55" for ::1 at 2016-07-10 18:26:16 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAeKTHwxYTx8TYXKiIjuEpydPe_4LfRTXOPpS4vMuhGBGdzIc6lh9g0U1n2BJNmqSMEwgINvF7BZOoOb-9LjHsnzOkmlBEgFNb5rV08Xoz855mLARMrEsZs_xWPEClImh9SnqOglL1grVUqj38pA2L7C6k3iqwflt5VxlK8_575hvyRACtIjXLNgPYwzcgTsDQZuprErotr5NviPh4dyIirT5A6idXCfLnAYteq1J5MEH7Ec3CVqdBD-YlXOMxEcnLNTC9x6A9Dfvahl2W_y02cA3sorKsxvJXYm6CsSFqrJO5XTZ6eZfuB90gneDeU7fac1GYXOGIRBpos35_ru6kE", "state"=>"ca6142b59a75f1f8b63d9baf731dd355348f4b7742eedf55"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "#<OmniAuth::AuthHash email=\"clowfinger13@gmail.com\" id=\"1707785512808666\" name=\"Mikhail  Nagaraev\">"], ["provider", "facebook"], ["created_at", 2016-07-10 15:26:17 UTC], ["updated_at", 2016-07-10 15:26:17 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$zQPtYYk7YiS.ngBnxTkZVeg8KP4udEOYXcGrTawvCLDWlwXqYPX2O"]]
  [1m[35m (95.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:26:17 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:26:17 UTC], ["last_sign_in_at", 2016-07-10 15:26:17 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 27]]
  [1m[35m (60.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 285ms (ActiveRecord: 157.3ms)


Started GET "/" for ::1 at 2016-07-10 18:26:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.1ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 18:26:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:26:57 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 33.0ms | ActiveRecord: 1.1ms)


Started GET "/" for ::1 at 2016-07-10 18:27:06 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.8ms | ActiveRecord: 0.3ms)


Started DELETE "/users/27" for ::1 at 2016-07-10 18:27:13 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"7XgaLXF0NJoRSc1Zq5aOzp80lP37dyS5TVwkGA6Um4CrGxqkH5IG1dLDxk/V/47sJUiJhfCYQ/rSG6XOp/ZgxQ==", "id"=>"27"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 27]]
  [1m[35m (120.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 124ms (ActiveRecord: 120.9ms)


Started GET "/users" for ::1 at 2016-07-10 18:27:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 20.3ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:27:14 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:27:14 +0300
Started GET "/users/auth/facebook/callback?code=AQDT3ajPh7iR0bmgRtX-2wjSlxeh0ZUvBayabfoS3jRpdFegJ3LbdkYpjOLRKhZWa8bQzdgbdUbEWiogd0WZL5V9X_n1QcpjOxTwGYpqt5EPES7cuCx5qYVvZUMjqiGvNiiCZx2_hDRjC13j1uYPPSKaZ9fb_qqm_Kyg26QQOp93E3DIGqwnuV5y4kSTpuTq0vL21ijLKTABlUAkmQiN3laOv6sPKECcs9787HKEOuH0fzmUVkP1YIbP_gBC6P5LAbyl6Jgo-gH9NODTvdwtyKp1zVC6-QC227Bp-ATZwUZ-fz67k1imrzYSXlVs5YoPDWqwUgQmFZ2I4GPiarhIOWZC&state=0fe16d85e6aa58c8c3cc685fd5c1e27ddef88eb087ddb99f" for ::1 at 2016-07-10 18:27:15 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDT3ajPh7iR0bmgRtX-2wjSlxeh0ZUvBayabfoS3jRpdFegJ3LbdkYpjOLRKhZWa8bQzdgbdUbEWiogd0WZL5V9X_n1QcpjOxTwGYpqt5EPES7cuCx5qYVvZUMjqiGvNiiCZx2_hDRjC13j1uYPPSKaZ9fb_qqm_Kyg26QQOp93E3DIGqwnuV5y4kSTpuTq0vL21ijLKTABlUAkmQiN3laOv6sPKECcs9787HKEOuH0fzmUVkP1YIbP_gBC6P5LAbyl6Jgo-gH9NODTvdwtyKp1zVC6-QC227Bp-ATZwUZ-fz67k1imrzYSXlVs5YoPDWqwUgQmFZ2I4GPiarhIOWZC", "state"=>"0fe16d85e6aa58c8c3cc685fd5c1e27ddef88eb087ddb99f"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:27:15 UTC], ["updated_at", 2016-07-10 15:27:15 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$0mKXs8v6kRMKeKEyreIrEei7wqQJZAZHNJCX.x9Y8VQOMuPVdR.Gi"]]
  [1m[35m (86.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:27:15 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:27:15 UTC], ["last_sign_in_at", 2016-07-10 15:27:15 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 28]]
  [1m[35m (63.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 279ms (ActiveRecord: 150.9ms)


Started GET "/" for ::1 at 2016-07-10 18:27:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.4ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:27:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (23.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 45.9ms | ActiveRecord: 0.7ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:27:27 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"8ADY4my3HIT/5kIGMCAbUFARGty7D6XrHtJN6qn3MLNbc8eel6kMk8BqhN8abeGsoBoVvYh20xXsU05KyU4oTQ=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:27:27 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"8ADY4my3HIT/5kIGMCAbUFARGty7D6XrHtJN6qn3MLNbc8eel6kMk8BqhN8abeGsoBoVvYh20xXsU05KyU4oTQ=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 18:27:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
Completed 200 OK in 28ms (Views: 27.3ms | ActiveRecord: 0.2ms)


Started DELETE "/users/28" for ::1 at 2016-07-10 18:27:31 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"qpic4jj+K46qASwaZYD3Zf8sZv0eHwnmXN5JuNZw2vLi0XLrgMNwgSk0sZ3lQEFZDLTv6FJTCEzhivnd0lc7NQ==", "id"=>"28"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 28]]
  [1m[35m (54.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 59ms (ActiveRecord: 55.8ms)


Started GET "/users" for ::1 at 2016-07-10 18:27:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
Completed 200 OK in 23ms (Views: 22.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:27:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:27:45 +0300
Started GET "/users/auth/vkontakte/callback?code=894dcb59f34db6cce5&state=ea30a95a439d708cfe1ad54cfbdcd0e0ee1f83463f669e2a" for ::1 at 2016-07-10 18:27:45 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"894dcb59f34db6cce5", "state"=>"ea30a95a439d708cfe1ad54cfbdcd0e0ee1f83463f669e2a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 15:27:46 UTC], ["updated_at", 2016-07-10 15:27:46 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$7sh8W5dKmv//brgywToTnudrai1jcsQ3Ka.e5WOkT8HvNRrTDqyzm"]]
  [1m[35m (63.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:27:46 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:27:46 UTC], ["last_sign_in_at", 2016-07-10 15:27:46 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 29]]
  [1m[35m (59.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 258ms (ActiveRecord: 124.1ms)


Started GET "/" for ::1 at 2016-07-10 18:27:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 29], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:27:53 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ykj2BVbgUZb7zfp0tW/hrZKPpPqm8cW9f3xwokcdwktp8itq+t/inPn3025tOXl9TTkLhjADPdWnUIJnv9QS5g=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:27:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 24ms (Views: 22.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:27:55 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:27:55 +0300
Started GET "/users/auth/facebook/callback?code=AQBP40VDuvMrqoOADHVFlUSX21oV-15vNpaIUoNuM_0zSc_QeOnzahsEfZHs6LthZSSyyTyhvsxZesP7a4tr8GdY9FARub6Qm-LZf-vnulkGuSXr0y1yhDGPos0LFakaJp30We2iwuZuDe9XCrY_tEnbFNc8KGVzU1iaLZ33dxEpbPgbP9DsdPBRFL0djyip3Z6lmfxsLtjM95GD54XHw5i-gEpdmnqe5ApeY2dlQoFVt3aT2dAd-jWBOlJ7jIyCMd-U4DF3K-SIMD54MQaS_yGhFR_BFpgrGKx86-Vu-XpNT7bA24EOqML2W5nE-xy4HOKOWLtVlUC3A1eGC7qgVFB1&state=2084a36a6df8bd5943192601e5d2df73996d2ed317e12b7f" for ::1 at 2016-07-10 18:27:56 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBP40VDuvMrqoOADHVFlUSX21oV-15vNpaIUoNuM_0zSc_QeOnzahsEfZHs6LthZSSyyTyhvsxZesP7a4tr8GdY9FARub6Qm-LZf-vnulkGuSXr0y1yhDGPos0LFakaJp30We2iwuZuDe9XCrY_tEnbFNc8KGVzU1iaLZ33dxEpbPgbP9DsdPBRFL0djyip3Z6lmfxsLtjM95GD54XHw5i-gEpdmnqe5ApeY2dlQoFVt3aT2dAd-jWBOlJ7jIyCMd-U4DF3K-SIMD54MQaS_yGhFR_BFpgrGKx86-Vu-XpNT7bA24EOqML2W5nE-xy4HOKOWLtVlUC3A1eGC7qgVFB1", "state"=>"2084a36a6df8bd5943192601e5d2df73996d2ed317e12b7f"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:27:56 UTC], ["updated_at", 2016-07-10 15:27:56 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$jPKp/R.och2rht8V5dflruGB5mXuIxzY7gUKRwAmN6WeCmE1.dpSq"]]
  [1m[35m (97.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:27:57 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:27:57 UTC], ["last_sign_in_at", 2016-07-10 15:27:57 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 30]]
  [1m[35m (63.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 292ms (ActiveRecord: 162.6ms)


Started GET "/" for ::1 at 2016-07-10 18:27:57 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 30], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.7ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:28:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 30], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 33.6ms | ActiveRecord: 1.0ms)


Started DELETE "/users/29" for ::1 at 2016-07-10 18:28:11 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"8XTAA3vCcFE8q9jmYLMfB7+1NK9/wQ20xwpPhns3SVr0nw13Xm/nkxgari5qlkMpIc/boZ8j5h88Oqf+XjKCag==", "id"=>"29"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 29]]
  [1m[35m (127.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 130ms (ActiveRecord: 128.1ms)


Started GET "/users" for ::1 at 2016-07-10 18:28:11 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 30], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.6ms | ActiveRecord: 0.4ms)


Started DELETE "/users/30" for ::1 at 2016-07-10 18:28:12 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"BVrWIubhobxTmLEJ1xVa1ZbCb2eXnqvKSKC/wJj9ff0AsRtWw0w2fncpx8HdMAb7CLiAaXd8QGGzkFe4vfi2zQ==", "id"=>"30"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 30]]
  [1m[35m (120.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 123ms (ActiveRecord: 121.0ms)


Started GET "/users" for ::1 at 2016-07-10 18:28:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 30], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.3ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:28:16 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:28:16 +0300
Started GET "/users/auth/facebook/callback?code=AQAWLBsSz3HO0kkoPz3gywnJyw03dbIiCSYJV-6NyVEw9rNrt1ihQ_WcpI-yTvTCP2qFZeyzpB2iE7T7eX-kFprHw2eFcVCHqQ3ysjAT_6YXOliEyCGjGFoWozLPOkl9CgGB8P6wgco8IvjVdS5WhVkzZX99FEXNSfnAnbzOS9JDb5VHAzYmG9oXKm9CoKYn5iah6NQJxw2qC8Y4H79NQ0IrsIUFyyPGF3xQyn4N2BKzA_-Q7b4lS2YAT4tv09oxo8F5k1loawpykbLfGTaqPBjWxt6Fc9AhJ9oH7qDtg9rdOUq_0WOZRYZz3FcaFhMnflu_ebpLtcj66eOBqCuNNRZQ&state=51d1ec2ac163de63675f2dee887882e633316c40a527c2fa" for ::1 at 2016-07-10 18:28:17 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAWLBsSz3HO0kkoPz3gywnJyw03dbIiCSYJV-6NyVEw9rNrt1ihQ_WcpI-yTvTCP2qFZeyzpB2iE7T7eX-kFprHw2eFcVCHqQ3ysjAT_6YXOliEyCGjGFoWozLPOkl9CgGB8P6wgco8IvjVdS5WhVkzZX99FEXNSfnAnbzOS9JDb5VHAzYmG9oXKm9CoKYn5iah6NQJxw2qC8Y4H79NQ0IrsIUFyyPGF3xQyn4N2BKzA_-Q7b4lS2YAT4tv09oxo8F5k1loawpykbLfGTaqPBjWxt6Fc9AhJ9oH7qDtg9rdOUq_0WOZRYZz3FcaFhMnflu_ebpLtcj66eOBqCuNNRZQ", "state"=>"51d1ec2ac163de63675f2dee887882e633316c40a527c2fa"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:28:17 UTC], ["updated_at", 2016-07-10 15:28:17 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$8/6GqDcF722DFZOsgTgm3O259Uz23qTNXp.DcK6V7kzBJsxHPrdSK"]]
  [1m[35m (81.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:28:17 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:28:17 UTC], ["last_sign_in_at", 2016-07-10 15:28:17 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 31]]
  [1m[35m (63.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 275ms (ActiveRecord: 146.1ms)


Started GET "/" for ::1 at 2016-07-10 18:28:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 31], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.3ms | ActiveRecord: 0.3ms)


Started DELETE "/users/31" for ::1 at 2016-07-10 18:28:42 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"HQTPkXFNccWmOwiYzYgV+sfoIGGH8QSRICd5cAiWG4uEe9efUAeMdTydq1p3PD97Mm0A+QjEtn3nYbem9ZObmQ==", "id"=>"31"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 31]]
  [1m[35m (73.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 85ms (ActiveRecord: 74.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:28:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 31], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.9ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:28:43 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:28:44 +0300
Started GET "/users/auth/facebook/callback?code=AQCv9ShBDLA1YGgZnYQrj5p0p09wWrec56duW1Tpb3uE8108tU1e9cf5qop8q2JL3IWTncpbgcdNjmGSe8vbZaedo95uMMcA8pl43CDR87iHCHPbcb0avA_sMQ0OwLqf59vyyGRI2I1k_FzQil2AQD5KObArEbl-BSsdJ04ADV4gxYjsgCEYXy2UrrFnsOyhGreRxvhfvf5Wp490wTqAmdfbGgULHBuW6pyR7whvgnBRlByDnFKdw3fmjC_V9YG_k_XCV2M5j9igrJAjSF8yoY-PCv5nmCRomxZouLAHeO30ySrR4O7SM5PUNUcColsf-kKNG4z27spBRudZnAphp8NL&state=92f6479de0034133fac8cd9e9f4ff3e98cd518ae25427ffd" for ::1 at 2016-07-10 18:28:44 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCv9ShBDLA1YGgZnYQrj5p0p09wWrec56duW1Tpb3uE8108tU1e9cf5qop8q2JL3IWTncpbgcdNjmGSe8vbZaedo95uMMcA8pl43CDR87iHCHPbcb0avA_sMQ0OwLqf59vyyGRI2I1k_FzQil2AQD5KObArEbl-BSsdJ04ADV4gxYjsgCEYXy2UrrFnsOyhGreRxvhfvf5Wp490wTqAmdfbGgULHBuW6pyR7whvgnBRlByDnFKdw3fmjC_V9YG_k_XCV2M5j9igrJAjSF8yoY-PCv5nmCRomxZouLAHeO30ySrR4O7SM5PUNUcColsf-kKNG4z27spBRudZnAphp8NL", "state"=>"92f6479de0034133fac8cd9e9f4ff3e98cd518ae25427ffd"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:28:44 UTC], ["updated_at", 2016-07-10 15:28:44 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$pajvNkugAeazmSMDmx0xp.vkd12P1WgxXz0mfFXbeg6TjrV7j1Que"]]
  [1m[35m (111.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:28:45 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:28:45 UTC], ["last_sign_in_at", 2016-07-10 15:28:45 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 32]]
  [1m[35m (63.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 308ms (ActiveRecord: 176.2ms)


Started GET "/" for ::1 at 2016-07-10 18:28:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 32], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/32" for ::1 at 2016-07-10 18:29:02 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"SkNEUeAoRRpi1hoSde55w1zVdnR4TxiQrKm+BOp13gpSt6bqHIxD3Ros0/wzegSDD34gDlPO6A5JxfU6NlSOPQ==", "id"=>"32"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 32]]
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 81ms (ActiveRecord: 68.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:29:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 32], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:29:03 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:29:03 +0300
Started GET "/users/auth/facebook/callback?code=AQD0ELr0Z2OzYVTFm175P01_XzuCdu3z8XCU4BkNVbsjb0e8jcDxU86IhzLddu521kdFLxQW7xddvow2m7QmuUnA5o94KzCWANL8URxuKV83OyHAX5nhO-GYPoa9OZliuMWhEftoRdIWcAyVqhhe68dQrP1k-0HBHNRl2i_NGIoJxGe65ZvFuUHpMYLQwqzOGqyImj1oAKeljJlhhA3E-RhOEFz_gj9PZV7-QeqOXrN6nMRju2oSZJCMDLxDohVndPUZJuQ3PWEgtCmmxmj9eHQEK4InHlqe8RfSbqfW893aWZG-ovbxJf-CGbHaO6jLDgRYsX-ywhT3T9SO3sI0ZgME&state=8de2a82c45094aef654091653d4a0c63a3724dc46d3c76e0" for ::1 at 2016-07-10 18:29:04 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQD0ELr0Z2OzYVTFm175P01_XzuCdu3z8XCU4BkNVbsjb0e8jcDxU86IhzLddu521kdFLxQW7xddvow2m7QmuUnA5o94KzCWANL8URxuKV83OyHAX5nhO-GYPoa9OZliuMWhEftoRdIWcAyVqhhe68dQrP1k-0HBHNRl2i_NGIoJxGe65ZvFuUHpMYLQwqzOGqyImj1oAKeljJlhhA3E-RhOEFz_gj9PZV7-QeqOXrN6nMRju2oSZJCMDLxDohVndPUZJuQ3PWEgtCmmxmj9eHQEK4InHlqe8RfSbqfW893aWZG-ovbxJf-CGbHaO6jLDgRYsX-ywhT3T9SO3sI0ZgME", "state"=>"8de2a82c45094aef654091653d4a0c63a3724dc46d3c76e0"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)


  
NoMethodError (undefined method `image' for nil:NilClass):
  
app/models/user.rb:16:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.1ms)
Started GET "/users/auth/facebook/callback?code=AQD0ELr0Z2OzYVTFm175P01_XzuCdu3z8XCU4BkNVbsjb0e8jcDxU86IhzLddu521kdFLxQW7xddvow2m7QmuUnA5o94KzCWANL8URxuKV83OyHAX5nhO-GYPoa9OZliuMWhEftoRdIWcAyVqhhe68dQrP1k-0HBHNRl2i_NGIoJxGe65ZvFuUHpMYLQwqzOGqyImj1oAKeljJlhhA3E-RhOEFz_gj9PZV7-QeqOXrN6nMRju2oSZJCMDLxDohVndPUZJuQ3PWEgtCmmxmj9eHQEK4InHlqe8RfSbqfW893aWZG-ovbxJf-CGbHaO6jLDgRYsX-ywhT3T9SO3sI0ZgME&state=8de2a82c45094aef654091653d4a0c63a3724dc46d3c76e0" for ::1 at 2016-07-10 18:29:27 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQD0ELr0Z2OzYVTFm175P01_XzuCdu3z8XCU4BkNVbsjb0e8jcDxU86IhzLddu521kdFLxQW7xddvow2m7QmuUnA5o94KzCWANL8URxuKV83OyHAX5nhO-GYPoa9OZliuMWhEftoRdIWcAyVqhhe68dQrP1k-0HBHNRl2i_NGIoJxGe65ZvFuUHpMYLQwqzOGqyImj1oAKeljJlhhA3E-RhOEFz_gj9PZV7-QeqOXrN6nMRju2oSZJCMDLxDohVndPUZJuQ3PWEgtCmmxmj9eHQEK4InHlqe8RfSbqfW893aWZG-ovbxJf-CGbHaO6jLDgRYsX-ywhT3T9SO3sI0ZgME", "state"=>"8de2a82c45094aef654091653d4a0c63a3724dc46d3c76e0"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 18:29:27 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 33ms (Views: 23.7ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:29:31 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:29:31 +0300
Started GET "/users/auth/facebook/callback?code=AQAsr25VmgD8zzI40JWHuO1JBIfYyYgNc4-q_u2ej75_CN1pLxxtMtZ_7HXKXOCX5l6H7PuDxi88c_ouRVj7W4-hMpVonZsTX2sVaZYPSITTur9tHaFLvyRnGDPSbktRa5clmCo3dYTmZdhSCrYeviyMtJeD4ii8XI2XjW188MPZ_Tr0MxjOT_EdMZun-Uy0dHje7hE87WEKuU8EEVWzIHN8CwojaClGWuTGc2_nW8-RHDEOEUcIVlxjJkPUt5nYhXRIcFJtpf9WlgTj1Y7UBylUnhz1BSw-7EmOXg9DDYGanlicgPN8pV7TagcXk-SrbVHO63txMa7VkOUw6ShJdAPL&state=6967365cee7be8037e9dcef9273804618dda4e6ba9e55f4e" for ::1 at 2016-07-10 18:29:32 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAsr25VmgD8zzI40JWHuO1JBIfYyYgNc4-q_u2ej75_CN1pLxxtMtZ_7HXKXOCX5l6H7PuDxi88c_ouRVj7W4-hMpVonZsTX2sVaZYPSITTur9tHaFLvyRnGDPSbktRa5clmCo3dYTmZdhSCrYeviyMtJeD4ii8XI2XjW188MPZ_Tr0MxjOT_EdMZun-Uy0dHje7hE87WEKuU8EEVWzIHN8CwojaClGWuTGc2_nW8-RHDEOEUcIVlxjJkPUt5nYhXRIcFJtpf9WlgTj1Y7UBylUnhz1BSw-7EmOXg9DDYGanlicgPN8pV7TagcXk-SrbVHO63txMa7VkOUw6ShJdAPL", "state"=>"6967365cee7be8037e9dcef9273804618dda4e6ba9e55f4e"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "http://graph.facebook.com/1707785512808666/picture"], ["provider", "facebook"], ["created_at", 2016-07-10 15:29:32 UTC], ["updated_at", 2016-07-10 15:29:32 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$8R.IHATdxBzGBKI3iZSw9uBrjVT0nqD5s3UKBgxN.x27PjuNd./JK"]]
  [1m[35m (140.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:29:32 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:29:32 UTC], ["last_sign_in_at", 2016-07-10 15:29:32 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 33]]
  [1m[35m (64.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 335ms (ActiveRecord: 206.6ms)


Started GET "/" for ::1 at 2016-07-10 18:29:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 33], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 0.4ms)


Started DELETE "/users/33" for ::1 at 2016-07-10 18:33:23 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"XPYbqil0wk6UY/FAiPF4wrbyOIi17bUiQ86Z29m3iQPU4GzEmvyU/yMP6UE6Xq1cQv6ziJCr54QdrRBK8ZqN5w==", "id"=>"33"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 33]]
  [1m[35m (64.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 75ms (ActiveRecord: 65.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:33:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 33], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 26.0ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:33:24 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:33:25 +0300
Started GET "/users/auth/facebook/callback?code=AQB1j2On7ZPavHGIomw2AuVcxEgL_ICTJ5mZ-zKJ6pOTKXxtrZYqyhmYcdTFnqKQm9PeB56Vg6yzOCUN7mPtzIC1pgWUaJGKt8Ajjf4OU32T2ENaBiKQ_sUfYnWQAVpxjUFQQV38Z9uNX9xaURo1fICtFNcRQBKy7LIciSObEpf5bThgFC-jqYhsJ4nZm0XQtoryZgdYz-3CywuZm_TQmwsgCN_STfiYpgT8-PvpL18SRp25TNpmH1wGfZlJIG6I5mYcDs9cZlaEzIxk1l6xiBfuNKlGJEv8rEL_gVGUNO8u_ApjkJSYiQ-TNcWIlaFdRa_aYgJsXO9KHSwFfaz5GcUd&state=aff8453d4eb3757f549984c7c01a8827c6aea276c24b0465" for ::1 at 2016-07-10 18:33:25 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB1j2On7ZPavHGIomw2AuVcxEgL_ICTJ5mZ-zKJ6pOTKXxtrZYqyhmYcdTFnqKQm9PeB56Vg6yzOCUN7mPtzIC1pgWUaJGKt8Ajjf4OU32T2ENaBiKQ_sUfYnWQAVpxjUFQQV38Z9uNX9xaURo1fICtFNcRQBKy7LIciSObEpf5bThgFC-jqYhsJ4nZm0XQtoryZgdYz-3CywuZm_TQmwsgCN_STfiYpgT8-PvpL18SRp25TNpmH1wGfZlJIG6I5mYcDs9cZlaEzIxk1l6xiBfuNKlGJEv8rEL_gVGUNO8u_ApjkJSYiQ-TNcWIlaFdRa_aYgJsXO9KHSwFfaz5GcUd", "state"=>"aff8453d4eb3757f549984c7c01a8827c6aea276c24b0465"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "facebook"], ["provider", "facebook"], ["created_at", 2016-07-10 15:33:25 UTC], ["updated_at", 2016-07-10 15:33:25 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$XWQFgLouybOiDFKzmRijs.XbZkGgUgZ9qSDt7ZH4ubhSU/mp11t1a"]]
  [1m[35m (65.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:33:25 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:33:25 UTC], ["last_sign_in_at", 2016-07-10 15:33:25 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 34]]
  [1m[35m (64.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 264ms (ActiveRecord: 131.5ms)


Started GET "/" for ::1 at 2016-07-10 18:33:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (26.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 49ms (Views: 47.9ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.3ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:09 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 32.6ms | ActiveRecord: 0.6ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:10 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 43.8ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:11 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.1ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:34:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 35.8ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:34:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GJN6lIo5b/YMGAv7KBT7uC81iwkvmTAQLwkJQ8zYuz/siqfB0088oJsRn3HVt92wMnm5eaUxkEWAFcfrwhFl3w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:34:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 31ms (Views: 30.0ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:34:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:34:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:34:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 30ms (Views: 29.2ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:34:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.4ms)
Completed 200 OK in 42ms (Views: 41.0ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:34:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
Completed 200 OK in 42ms (Views: 40.6ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:34:19 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:34:20 +0300
Started GET "/users/auth/vkontakte/callback?code=5ab4b810cedbddea1e&state=61000469492dd53956b5b9e6634e5945f4f5c51598d0c82d" for ::1 at 2016-07-10 18:34:20 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"5ab4b810cedbddea1e", "state"=>"61000469492dd53956b5b9e6634e5945f4f5c51598d0c82d"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 15:34:21 UTC], ["updated_at", 2016-07-10 15:34:21 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$1KnBKo7nqpsZILNREus16eF5f9XqhkpAD/Uj8rrBUkUZ0JhwQtoHC"]]
  [1m[35m (113.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:34:21 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:34:21 UTC], ["last_sign_in_at", 2016-07-10 15:34:21 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 35]]
  [1m[35m (63.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 308ms (ActiveRecord: 178.7ms)


Started GET "/" for ::1 at 2016-07-10 18:34:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:34:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (28.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 50ms (Views: 48.5ms | ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 18:34:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.0ms | ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 18:34:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 53ms (Views: 51.5ms | ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 18:34:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 36.3ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:36:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 31.7ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 18:36:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:36:23 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"XZwzQlC/ddscjt6DfxXNEJH1ULeJfJu+1V4KiWbdILyl6b1MOM1D9u2nbU6oE+qmXV92BDkDMMNq6XJ1urXjWQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:36:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
Completed 200 OK in 31ms (Views: 29.3ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:36:25 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:36:25 +0300
Started GET "/users/auth/facebook/callback?code=AQCzPjL3vG71v0Kep29OFJEYIqz5OFCLVDBfXqto99A6YmdveFrkQvFNtCEDR0T-ZctwYkGFFBIxb_mkJyrXdl5Bvl0GXF3_oW_ydmf_E40Krc2qli-Mec1npLz6AsbqEAKC4TCWIYamPXL8N9DjX5Hb7lkynsg4Ff1f597MUzqi4SWejmRHpv4LTfcLBmE1hArTasvmsuzyXpKDDVbVqc1oedaArFoDNvjDafDpzA1Amu0yv-NCVbKKmvvuYt27lp-1Gt1Hk-2LAT7o8bReKEdQUp8hAtCsvJS5WhrbOtyHtiHzo74R-dTtp3KEVSE08rUhPUWc7L88OX7eZwzAKyeG&state=3aede8ec9abe5b7343481dea38d9b66186a719ed71f27343" for ::1 at 2016-07-10 18:36:25 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCzPjL3vG71v0Kep29OFJEYIqz5OFCLVDBfXqto99A6YmdveFrkQvFNtCEDR0T-ZctwYkGFFBIxb_mkJyrXdl5Bvl0GXF3_oW_ydmf_E40Krc2qli-Mec1npLz6AsbqEAKC4TCWIYamPXL8N9DjX5Hb7lkynsg4Ff1f597MUzqi4SWejmRHpv4LTfcLBmE1hArTasvmsuzyXpKDDVbVqc1oedaArFoDNvjDafDpzA1Amu0yv-NCVbKKmvvuYt27lp-1Gt1Hk-2LAT7o8bReKEdQUp8hAtCsvJS5WhrbOtyHtiHzo74R-dTtp3KEVSE08rUhPUWc7L88OX7eZwzAKyeG", "state"=>"3aede8ec9abe5b7343481dea38d9b66186a719ed71f27343"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 15:36:25 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 15:36:25 UTC], ["id", 34]]
  [1m[35m (96.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 101ms (ActiveRecord: 97.1ms)


Started GET "/" for ::1 at 2016-07-10 18:36:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (22.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.8ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:36:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 18:36:58 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 18:36:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 37.5ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 18:36:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 35.1ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:37:00 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 39.3ms | ActiveRecord: 0.9ms)


Started GET "/" for ::1 at 2016-07-10 18:37:00 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
Completed 200 OK in 50ms (Views: 47.7ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 14ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:02 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHaZ5F6n1/+eDtYZSc9pZJWIPlH3GfPeaZKt03Mwmi3vWfuiC2ptV2ihHKbOkgGMnUuH2xfP+Wg1J2cMWwymGg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:37:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.1ms)


Started DELETE "/users/35" for ::1 at 2016-07-10 18:37:04 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"K6/P2l0EqRlvNUhBQrUO++cYgNbkpNf+N2yTd/TJtVYi8b9PPtY9aSe2edsy8nbjMg1eaBhlG6OKzvZ3U6o3bQ==", "id"=>"35"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 35]]
  [1m[35m (106.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 109ms (ActiveRecord: 106.7ms)


Started GET "/users" for ::1 at 2016-07-10 18:37:04 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/34" for ::1 at 2016-07-10 18:37:05 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"A7Mz/Ev02nT3jbBl1NCBxB7NQo5tCZRltPVw5L63oTIK7UNpKCZOBL8Ogf+kl/ncy9icMJHIWDgJVxXkGdQjCQ==", "id"=>"34"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 34]]
  [1m[35m (153.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 156ms (ActiveRecord: 154.1ms)


Started GET "/users" for ::1 at 2016-07-10 18:37:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.5ms)
Completed 200 OK in 24ms (Views: 22.7ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:37:07 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:37:07 +0300
Started GET "/users/auth/vkontakte/callback?code=887abba68d55680f7f&state=d5e55e4ca0b2e10c5f72b1abadc73030bc85cc64507da159" for ::1 at 2016-07-10 18:37:07 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"887abba68d55680f7f", "state"=>"d5e55e4ca0b2e10c5f72b1abadc73030bc85cc64507da159"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 15:37:08 UTC], ["updated_at", 2016-07-10 15:37:08 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$oLcKTrmixdMQEDy03hwy9Owf0Fws.N.gJ9aPGasNZ254Tp45iWg5y"]]
  [1m[35m (140.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:37:08 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:37:08 UTC], ["last_sign_in_at", 2016-07-10 15:37:08 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 36]]
  [1m[35m (68.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 339ms (ActiveRecord: 209.6ms)


Started GET "/" for ::1 at 2016-07-10 18:37:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:37:11 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.8ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:37:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 32.8ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 18:37:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 33.3ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:18 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"oCblBZvJR7c+AzNRezMQ6DrPyTMf1We9sBrUtXVijVfYQp+HjuRgoPSmOhtQSKwCJQop3dIq5HTxp5W4ClD79Q=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:18 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"oCblBZvJR7c+AzNRezMQ6DrPyTMf1We9sBrUtXVijVfYQp+HjuRgoPSmOhtQSKwCJQop3dIq5HTxp5W4ClD79Q=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:18 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"oCblBZvJR7c+AzNRezMQ6DrPyTMf1We9sBrUtXVijVfYQp+HjuRgoPSmOhtQSKwCJQop3dIq5HTxp5W4ClD79Q=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:18 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"oCblBZvJR7c+AzNRezMQ6DrPyTMf1We9sBrUtXVijVfYQp+HjuRgoPSmOhtQSKwCJQop3dIq5HTxp5W4ClD79Q=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:18 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"oCblBZvJR7c+AzNRezMQ6DrPyTMf1We9sBrUtXVijVfYQp+HjuRgoPSmOhtQSKwCJQop3dIq5HTxp5W4ClD79Q=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 18:37:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:37:22 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:37:22 +0300
Started GET "/users/auth/vkontakte/callback?code=e0c8b17ce7be842a4b&state=bc9e77fec130c4d66cc082b2d745c35e7d606fceff10c83a" for ::1 at 2016-07-10 18:37:22 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e0c8b17ce7be842a4b", "state"=>"bc9e77fec130c4d66cc082b2d745c35e7d606fceff10c83a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 15:37:23 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 15:37:23 UTC], ["id", 36]]
  [1m[35m (152.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 157ms (ActiveRecord: 153.6ms)


Started GET "/" for ::1 at 2016-07-10 18:37:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:37:37 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"gS3S7Lku29kv9YowziiOIttc5HU2aKXQyTF7VUUG/6RXj5vKsmEdgZn5NMuAJtm0/amAwIGBdLmwr0XmaB6jaw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:37:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 40ms (Views: 39.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:37:53 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:37:53 +0300
Started GET "/users/auth/facebook/callback?code=AQCUbiR7Ouya2kaN2LQpZsmU38gtnr6Rt5vOjSTj1caF27JebcwfO4daIOdbMJ8qP49z3cXKSKaKgyk6Wh-dBMoFXWxdsUkbBPTkiLNnYZZeDSQMAj19X2MLhuUyYFAZcq-0cLxYUYPUkYnn-N9nnH-p5iVAUPDox_hCe5FqpnjPtKmXHmT6V8yGNdFPGZxvNr4OUeVYemAzw-JJcYivU0yoXaLWz5LM6evyR05IqvPSj80BUABA4Jse8m8ghesT7EtZQLF_mIp1JK0yWcktF3m6_Nn84jEPE9PGIan3-RfPvLmn6ElRk41m8BlFbBBQC8g7mzxWx-_iGS0zfY2t8JHg&state=c309c71c7141cac3c73bd6695ebaefde988adbcfed6a2eed" for ::1 at 2016-07-10 18:37:54 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCUbiR7Ouya2kaN2LQpZsmU38gtnr6Rt5vOjSTj1caF27JebcwfO4daIOdbMJ8qP49z3cXKSKaKgyk6Wh-dBMoFXWxdsUkbBPTkiLNnYZZeDSQMAj19X2MLhuUyYFAZcq-0cLxYUYPUkYnn-N9nnH-p5iVAUPDox_hCe5FqpnjPtKmXHmT6V8yGNdFPGZxvNr4OUeVYemAzw-JJcYivU0yoXaLWz5LM6evyR05IqvPSj80BUABA4Jse8m8ghesT7EtZQLF_mIp1JK0yWcktF3m6_Nn84jEPE9PGIan3-RfPvLmn6ElRk41m8BlFbBBQC8g7mzxWx-_iGS0zfY2t8JHg", "state"=>"c309c71c7141cac3c73bd6695ebaefde988adbcfed6a2eed"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "facebook"], ["provider", "facebook"], ["created_at", 2016-07-10 15:37:55 UTC], ["updated_at", 2016-07-10 15:37:55 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$hOtsBzrHuplidlK2WdFk4u9TxJVbM7n.GaCyLByf2hO3BwC/rPG1m"]]
  [1m[35m (57.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:37:55 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:37:55 UTC], ["last_sign_in_at", 2016-07-10 15:37:55 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 37]]
  [1m[35m (60.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 248ms (ActiveRecord: 118.7ms)


Started GET "/" for ::1 at 2016-07-10 18:37:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 37], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/37" for ::1 at 2016-07-10 18:38:30 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"ivtez/tTtoa36jn+9bVIElRLU1qNnQIKF/N3YrC7a1MkzuUHwzM17grwcp4rFYkqA/RBe3wqN6VticjsgL4pxQ==", "id"=>"37"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 37]]
  [1m[35m (65.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 77ms (ActiveRecord: 66.6ms)


Started GET "/users" for ::1 at 2016-07-10 18:38:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 37], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/36" for ::1 at 2016-07-10 18:38:31 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"j8XZP6KcJ/XbTEQof1gHKdC1yTuHiWrjj9oq4gcKRjAh8GL3mvyknWZWD0ih+MYRhwrbGnY+X0z1oJVsNw8Epg==", "id"=>"36"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 36]]
  [1m[35m (118.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 122ms (ActiveRecord: 119.6ms)


Started GET "/users" for ::1 at 2016-07-10 18:38:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 24ms (Views: 23.0ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:38:32 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:38:32 +0300
Started GET "/users/auth/facebook/callback?code=AQAr2GINKww0XKUSunds9tXx75ADPd170nz-bIISx_dYDNj5FvAU4UUyTAtG3YmDMM34LVOCAtanVU6zn90ye_GAI9sMYFkJbn_Cy00pKLsS89QRvyFHJ2rfSZ5LHj8wxiQYbXfXzEAIFQDmtkKxrNAZdA1jgiL7ByVh6fjwjqHaq0ZFXhOPnyhJwzy42xr50dqasph94x1uiZ4-ZZlsFiItHxkVqCs1FQno5pBgJaqaDFZFGm74T3se6maGaqsWndHvXIkqD5AVvRuMI-mUCoaJWgVHqK_qdW9hT83P-oi5aZeUJRRjQGGSHCaP98PJToKZLMt4AK3Hg2Ln9ulLo4e5&state=d533a6247177261ef35fe04927a36a67d2282f88577adf1b" for ::1 at 2016-07-10 18:38:32 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAr2GINKww0XKUSunds9tXx75ADPd170nz-bIISx_dYDNj5FvAU4UUyTAtG3YmDMM34LVOCAtanVU6zn90ye_GAI9sMYFkJbn_Cy00pKLsS89QRvyFHJ2rfSZ5LHj8wxiQYbXfXzEAIFQDmtkKxrNAZdA1jgiL7ByVh6fjwjqHaq0ZFXhOPnyhJwzy42xr50dqasph94x1uiZ4-ZZlsFiItHxkVqCs1FQno5pBgJaqaDFZFGm74T3se6maGaqsWndHvXIkqD5AVvRuMI-mUCoaJWgVHqK_qdW9hT83P-oi5aZeUJRRjQGGSHCaP98PJToKZLMt4AK3Hg2Ln9ulLo4e5", "state"=>"d533a6247177261ef35fe04927a36a67d2282f88577adf1b"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:38:33 UTC], ["updated_at", 2016-07-10 15:38:33 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$xCju1wiCjwNLZ0xR37DNPONN1VwHgmS79uegQKQ8Ty5b74A4dPjBK"]]
  [1m[35m (109.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:38:33 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:38:33 UTC], ["last_sign_in_at", 2016-07-10 15:38:33 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 38]]
  [1m[35m (63.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 301ms (ActiveRecord: 173.6ms)


Started GET "/" for ::1 at 2016-07-10 18:38:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 38], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 26.0ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:38:40 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nt5iEnH4UWrOW9GmugLRK8yiLXwzpRfVxCqlU2wV/5otwJRI7LFHhRvs9IhYmvZCLoiSC9YNMqDD91TbFYgx/A=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 18:38:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
Completed 200 OK in 22ms (Views: 21.1ms | ActiveRecord: 0.2ms)


Started DELETE "/users/38" for ::1 at 2016-07-10 18:38:41 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"xEYtRz/u0p/egEt0y+2CrPuJGl8iHs4qPx5boEiLmQMB75ZvhgCvE72UiYVgRcSSl5nlrDqbBdv7D+w8I3kSxg==", "id"=>"38"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 38]]
  [1m[35m (144.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 147ms (ActiveRecord: 145.0ms)


Started GET "/users" for ::1 at 2016-07-10 18:38:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.0ms)
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:38:43 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:38:43 +0300
Started GET "/users/auth/facebook/callback?code=AQAIk33Q2XWXRGewIDjQtMHexwmu7u7ZL1WFWqys4vikU1QZFitvkMe4GlfKlDOlXqbZTHOrdkXF4IttqMY6NTLyYSFmLWjsP_kMGgV8cOzprVIfd3SP8QEzErUJXc9vGCIr_Jc9so-iLdDxxN8E9_j-9OJ22Zsnuu3euaepmc1yOIO2_3T74HN2jiORk83YWB_23YaRiF5f4Ib-OuKNYldflukSPzRAl3VlyoH9TgS2uM8hqDj9U0_MxmU0O1F8KkTIjBmy9d6enZmvgihkhfDQSiwwE9QIMoX5eonWOSMZVa7jWjD3kxv-hhUXOUZiEx-TsDKrdwv_WhcZGFQYTLk8&state=4c7b2feac18ed2ee3d361db2a9eaead3ca3a7e445bef9651" for ::1 at 2016-07-10 18:38:43 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAIk33Q2XWXRGewIDjQtMHexwmu7u7ZL1WFWqys4vikU1QZFitvkMe4GlfKlDOlXqbZTHOrdkXF4IttqMY6NTLyYSFmLWjsP_kMGgV8cOzprVIfd3SP8QEzErUJXc9vGCIr_Jc9so-iLdDxxN8E9_j-9OJ22Zsnuu3euaepmc1yOIO2_3T74HN2jiORk83YWB_23YaRiF5f4Ib-OuKNYldflukSPzRAl3VlyoH9TgS2uM8hqDj9U0_MxmU0O1F8KkTIjBmy9d6enZmvgihkhfDQSiwwE9QIMoX5eonWOSMZVa7jWjD3kxv-hhUXOUZiEx-TsDKrdwv_WhcZGFQYTLk8", "state"=>"4c7b2feac18ed2ee3d361db2a9eaead3ca3a7e445bef9651"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:38:43 UTC], ["updated_at", 2016-07-10 15:38:43 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$s53LomASvFkm9wYSfsL24On0HSuTd1ehA6V9kW0N9zjB1dOUaNOX2"]]
  [1m[35m (94.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:38:44 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:38:44 UTC], ["last_sign_in_at", 2016-07-10 15:38:44 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 39]]
  [1m[35m (64.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 291ms (ActiveRecord: 159.6ms)


Started GET "/" for ::1 at 2016-07-10 18:38:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 39], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.3ms)


Started DELETE "/users/39" for ::1 at 2016-07-10 18:38:47 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"+8uhsRNS06CNGybyiN4kubZxS5B1ABfa0jJ7DMqKcYkAKT7KTiFw33TEcxdFKYQVuCbXVynKMW/Ggin+baNFiw==", "id"=>"39"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 39]]
  [1m[35m (153.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 156ms (ActiveRecord: 154.3ms)


Started GET "/users" for ::1 at 2016-07-10 18:38:47 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 39], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.1ms | ActiveRecord: 0.7ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 18:49:01 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+8uhsRNS06CNGybyiN4kubZxS5B1ABfa0jJ7DMqKcYkAKT7KTiFw33TEcxdFKYQVuCbXVynKMW/Ggin+baNFiw=="}
Redirected to http://localhost:3000/
Filter chain halted as :verify_signed_out_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-07-10 18:49:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (11.0ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
     7:     = csrf_meta_tags )
     8:     / Le HTML5 shim, for IE6-8 support of HTML elements
     9:     /[if lt IE 9]
    10:    /   = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:    / = stylesheet_link_tag "application", :media => "all"
    12:    / %link(href="images/favicon.ico" rel="shortcut icon")
    13:    / %link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
  
app/views/layouts/application.html.haml:10
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (16.9ms)
Started GET "/" for ::1 at 2016-07-10 18:49:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.1ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
     9:     /[if lt IE 9]
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:    /%link(href="images/favicon.ico" rel="shortcut icon")
    13:     /%link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
    14:     /%link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72")
    15:     %link(href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114")
  
app/views/layouts/application.html.haml:12
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.8ms)
Started GET "/" for ::1 at 2016-07-10 18:49:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
     9:     /[if lt IE 9]
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:    /%link(href="images/favicon.ico" rel="shortcut icon")
    13:     /%link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
    14:     /%link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72")
    15:     %link(href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114")
  
app/views/layouts/application.html.haml:12
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (20.0ms)
Started GET "/" for ::1 at 2016-07-10 18:49:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
     9:     /[if lt IE 9]
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:    %link(href="images/favicon.ico" rel="shortcut icon")
    13:     /%link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
    14:     /%link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72")
    15:     %link(href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114")
  
app/views/layouts/application.html.haml:12
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.4ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (20.1ms)
Started GET "/" for ::1 at 2016-07-10 18:50:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
Completed 200 OK in 24ms (Views: 22.6ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:50:11 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 18:50:11 +0300
Started GET "/users/auth/facebook/callback?code=AQB2pzYeyJrOmGV0RhGMi8jRu8sqS15qi52OaI4d5cyb89WiHs6RRdifEtf38rBVQm21o7twV5ULbXrNeHx5TtCoM_h7srSuCO0vv4brnrTrnxfFbE2IyvBAdUtoied15aXfz8lokjJeOSpN5dD3FoxthTcuan1Q8P2KEHkTwPNGmPo5Y-jgnjSXP3gMiv52CLjREdRFIxbHr7K5Gp5zOG-SgExPRcFmLPF5mtQDphbnh2-Wy5L8AHi2NpV4vrN1CG9kSODpxVIDf_kLnRMU0zXac1R3yccmRCSlv530aeX_sXkMIoJBstNAFRPDlZ9M4J9CwOKqOqzDBgEZ1ahtb-ox&state=29e24b24820a8a1507aed93b8f4049e43d56020e04cbf8ab" for ::1 at 2016-07-10 18:50:12 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB2pzYeyJrOmGV0RhGMi8jRu8sqS15qi52OaI4d5cyb89WiHs6RRdifEtf38rBVQm21o7twV5ULbXrNeHx5TtCoM_h7srSuCO0vv4brnrTrnxfFbE2IyvBAdUtoied15aXfz8lokjJeOSpN5dD3FoxthTcuan1Q8P2KEHkTwPNGmPo5Y-jgnjSXP3gMiv52CLjREdRFIxbHr7K5Gp5zOG-SgExPRcFmLPF5mtQDphbnh2-Wy5L8AHi2NpV4vrN1CG9kSODpxVIDf_kLnRMU0zXac1R3yccmRCSlv530aeX_sXkMIoJBstNAFRPDlZ9M4J9CwOKqOqzDBgEZ1ahtb-ox", "state"=>"29e24b24820a8a1507aed93b8f4049e43d56020e04cbf8ab"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 15:50:12 UTC], ["updated_at", 2016-07-10 15:50:12 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$K0ZUuTEiuq.inyHdhZBs5u5FhXKKnPbk1Sz/Ed8Nc3u7Jae11B5c."]]
  [1m[35m (130.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:50:12 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:50:12 UTC], ["last_sign_in_at", 2016-07-10 15:50:12 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 40]]
  [1m[35m (59.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 327ms (ActiveRecord: 190.8ms)


Started GET "/" for ::1 at 2016-07-10 18:50:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 40], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/40" for ::1 at 2016-07-10 18:50:16 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"zj3Niseuce3wtBx1qotvIk/CixiyN8F+JqB87smRVqCsKIaaA4/H0D5456ZXOAD+0xQYgAdP/hn8UyqRyKPERQ==", "id"=>"40"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 40]]
  [1m[35m (98.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 102ms (ActiveRecord: 98.8ms)


Started GET "/users" for ::1 at 2016-07-10 18:50:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 40], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.0ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:50:18 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 18:50:18 +0300
Started GET "/users/auth/vkontakte/callback?code=c7693b3632dd38c3ab&state=8e723441ba403458da906bb91fd971524fa9ef4cc2b1a7bd" for ::1 at 2016-07-10 18:50:19 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"c7693b3632dd38c3ab", "state"=>"8e723441ba403458da906bb91fd971524fa9ef4cc2b1a7bd"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 15:50:20 UTC], ["updated_at", 2016-07-10 15:50:20 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$oSVkwwyiMg/MTLAkcBtbKeTxCj/KrEOzdk31RYBBeC9588de4LBnS"]]
  [1m[35m (62.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 15:50:20 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 15:50:20 UTC], ["last_sign_in_at", 2016-07-10 15:50:20 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 41]]
  [1m[35m (64.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 257ms (ActiveRecord: 128.2ms)


Started GET "/" for ::1 at 2016-07-10 18:50:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 41], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.1ms | ActiveRecord: 0.6ms)


Started DELETE "/users/41" for ::1 at 2016-07-10 18:50:22 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"8lRIc1BeA0gKpO7yD+xdR/KWWAkKixv2Hyl9j995nvHIz0KLl1N1Z5Xxu9Ej3ZblEGJKslyFjnOwFZDa4VGHcw==", "id"=>"41"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 41]]
  [1m[35m (108.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 111ms (ActiveRecord: 109.5ms)


Started GET "/users" for ::1 at 2016-07-10 18:50:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 41], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 18:50:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.0ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.1ms)


  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected ')', expecting tSTRING_DEND
));}\n  </head>\n  <body>\n    ...
  ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n            <span class='ico...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
.../span>\n            <span class='icon-bar'></span>\n        ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected '<'
...       <span class='icon-bar'></span>\n            <span cla...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n          </a>\n          <a...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
...'brand' href='http://localhost:3000'>Authproviders</a>\n    ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...          <div class='container nav-collapse'>\n            ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
... class='container nav-collapse'>\n            <ul class='nav...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:8: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...e'>\n            <ul class='nav'>\n", 5, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...div>\n    <div class='container'>\n      <div class='content...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...er'>\n      <div class='content'>\n        <div class='row'>...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...tent'>\n        <div class='row'>\n          <div class='spa...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...'>\n          <div class='span9'>\n            #{_hamlout.ad...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...v>\n          <div class='span3'>\n            <div class='w...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n            <div class='well sidebar-nav'>\n             ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...  <div class='well sidebar-nav'>\n              <h3>Provider...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n              <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...       <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:27: unterminated string meets end of file):
  
app/views/layouts/application.html.haml:8: syntax error, unexpected ')', expecting tSTRING_DEND
app/views/layouts/application.html.haml:8: unknown regexp options - pa
app/views/layouts/application.html.haml:8: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:8: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:8: syntax error, unexpected '<'
app/views/layouts/application.html.haml:8: unknown regexp options - pa
app/views/layouts/application.html.haml:8: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:8: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:8: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:8: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:8: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:22: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:27: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:27: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:27: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:27: unterminated string meets end of file
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.1ms)
Started GET "/" for ::1 at 2016-07-10 18:50:58 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.1ms)


  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected ')', expecting tSTRING_DEND
));}\n  </head>\n  <body>\n    ...
  ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n            <span class='ico...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
.../span>\n            <span class='icon-bar'></span>\n        ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected '<'
...       <span class='icon-bar'></span>\n            <span cla...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n          </a>\n          <a...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
...'brand' href='http://localhost:3000'>Authproviders</a>\n    ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...          <div class='container nav-collapse'>\n            ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
... class='container nav-collapse'>\n            <ul class='nav...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...e'>\n            <ul class='nav'>\n", 5, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...div>\n    <div class='container'>\n      <div class='content...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...er'>\n      <div class='content'>\n        <div class='row'>...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...tent'>\n        <div class='row'>\n          <div class='spa...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...'>\n          <div class='span9'>\n            #{_hamlout.ad...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...v>\n          <div class='span3'>\n            <div class='w...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n            <div class='well sidebar-nav'>\n             ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...  <div class='well sidebar-nav'>\n              <h3>Provider...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n              <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...       <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: unterminated string meets end of file):
  
app/views/layouts/application.html.haml:12: syntax error, unexpected ')', expecting tSTRING_DEND
app/views/layouts/application.html.haml:12: unknown regexp options - pa
app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:12: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected '<'
app/views/layouts/application.html.haml:12: unknown regexp options - pa
app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:12: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:12: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:31: unterminated string meets end of file
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.8ms)
Started GET "/" for ::1 at 2016-07-10 18:51:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms)


  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected ')', expecting tSTRING_DEND
));}\n  </head>\n  <body>\n    ...
  ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n            <span class='ico...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
.../span>\n            <span class='icon-bar'></span>\n        ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected '<'
...       <span class='icon-bar'></span>\n            <span cla...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: unknown regexp options - pa
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
...<span class='icon-bar'></span>\n          </a>\n          <a...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
...'brand' href='http://localhost:3000'>Authproviders</a>\n    ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...          <div class='container nav-collapse'>\n            ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
... class='container nav-collapse'>\n            <ul class='nav...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...e'>\n            <ul class='nav'>\n", 5, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...div>\n    <div class='container'>\n      <div class='content...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...er'>\n      <div class='content'>\n        <div class='row'>...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...tent'>\n        <div class='row'>\n          <div class='spa...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...'>\n          <div class='span9'>\n            #{_hamlout.ad...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...v>\n          <div class='span3'>\n            <div class='w...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n            <div class='well sidebar-nav'>\n             ...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...  <div class='well sidebar-nav'>\n              <h3>Provider...
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...>\n              <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...       <ul class='nav nav-list'>\n", 2, false);
...                               ^
/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/views/layouts/application.html.haml:31: unterminated string meets end of file):
  
app/views/layouts/application.html.haml:12: syntax error, unexpected ')', expecting tSTRING_DEND
app/views/layouts/application.html.haml:12: unknown regexp options - pa
app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:12: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected '<'
app/views/layouts/application.html.haml:12: unknown regexp options - pa
app/views/layouts/application.html.haml:12: syntax error, unexpected $undefined
app/views/layouts/application.html.haml:12: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:12: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:12: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:26: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:31: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/views/layouts/application.html.haml:31: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/views/layouts/application.html.haml:31: unterminated string meets end of file
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.6ms)
Started GET "/" for ::1 at 2016-07-10 18:51:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 200 OK in 25ms (Views: 23.0ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 18:51:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.2ms)
Completed 200 OK in 22ms (Views: 21.3ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 18:51:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.1ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
     9:     /[if lt IE 9]
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:    %body
    13:     .navbar.navbar-fixed-top
    14:       .navbar-inner
    15:         .container
  
app/views/layouts/application.html.haml:12
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (18.1ms)
Started GET "/" for ::1 at 2016-07-10 18:51:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.6ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:     
    13:    %body
    14:     .navbar.navbar-fixed-top
    15:       .navbar-inner
    16:         .container
  
app/views/layouts/application.html.haml:13
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.7ms)
Started GET "/" for ::1 at 2016-07-10 18:51:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (Inconsistent indentation: 3 spaces used for indentation, but the rest of the document was indented using 2 spaces.):
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:     
    13:    %body
    14:     .navbar.navbar-fixed-top
    15:       .navbar-inner
    16:         .container
  
app/views/layouts/application.html.haml:13
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.3ms)
Started GET "/" for ::1 at 2016-07-10 18:52:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.3ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 19:28:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (22.3ms)
Completed 200 OK in 42ms (Views: 39.9ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:28:55 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:28:55 +0300
Started GET "/users/auth/facebook/callback?code=AQAzMPAkz9gJGG75No16dLa0oQj253t7SMTxFqAZmgEekB1dzdkUMIwGldlBUAu2kWZWi1ngUNSoqpZdGPWtYzucnSzP90hGTl5S_RIq_2Op4YvERDBXPZOpz9DdjTGUNW_0RcKqWgPMc4XnxFv0GKonvko-7u78dvg0RihZCWQC-bpbGwvOtO87xlIj2UhrSmX_lkWec3hZQxsweTbdbX_qAo2GKAmXv-Tsmda9puMKQC5HQJbluWoEBcs7UboiBx17LJmb6ya5_VZdUVcqmCe4zUmZTI_9RQLUYAFTWVsJp5WRORKDEVs1uQy8cI-OLyw4d5qGtCw34joUr7Tn_BAt&state=73528495f7b030f25d1878d89af448970627ba601f6650f6" for ::1 at 2016-07-10 19:28:55 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAzMPAkz9gJGG75No16dLa0oQj253t7SMTxFqAZmgEekB1dzdkUMIwGldlBUAu2kWZWi1ngUNSoqpZdGPWtYzucnSzP90hGTl5S_RIq_2Op4YvERDBXPZOpz9DdjTGUNW_0RcKqWgPMc4XnxFv0GKonvko-7u78dvg0RihZCWQC-bpbGwvOtO87xlIj2UhrSmX_lkWec3hZQxsweTbdbX_qAo2GKAmXv-Tsmda9puMKQC5HQJbluWoEBcs7UboiBx17LJmb6ya5_VZdUVcqmCe4zUmZTI_9RQLUYAFTWVsJp5WRORKDEVs1uQy8cI-OLyw4d5qGtCw34joUr7Tn_BAt", "state"=>"73528495f7b030f25d1878d89af448970627ba601f6650f6"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["created_at", 2016-07-10 16:28:56 UTC], ["updated_at", 2016-07-10 16:28:56 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$0gA//UQBiwBpreK63IMAmuN1wM3f4jKR5KBahB8secfquPM6EkSQm"]]
  [1m[35m (93.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:28:56 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:28:56 UTC], ["last_sign_in_at", 2016-07-10 16:28:56 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 42]]
  [1m[35m (68.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 294ms (ActiveRecord: 163.4ms)


Started GET "/" for ::1 at 2016-07-10 19:28:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 42], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:31:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 42], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 31.8ms | ActiveRecord: 0.9ms)


Started DELETE "/users/42" for ::1 at 2016-07-10 19:31:22 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"fUPlb/ShDhENovosIWGlj92xHN1V/TMw70mD3JT21Qk7bob1YKREAem3ntaoDwFA3bUfGN5tdClAmy/fWE4vNA==", "id"=>"42"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 42]]
  [1m[35m (129.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 132ms (ActiveRecord: 130.1ms)


Started GET "/users" for ::1 at 2016-07-10 19:31:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 42], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.8ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:31:23 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:31:23 +0300
Started GET "/users/auth/facebook/callback?code=AQAb2YdD7GZCW3mzcupA5lFIrtiYI0LYrR7zuTqwTkblX2P-lJHFMjXcVkOyu-AQVf-5LIzJa60BuL8SNILagojbhvhc_GonhpuVr86he5nJuSDCbZwklUW2OjISL_BpcelSH3cxZlOcqlHRp4AVrd_s42cW0UxhJdQF30U8FXcb02pg2M2eguZ-Z_Y6oWQRtOgPvThyOS7IL2l_fgkrDo2DrS8Xjz5nihboBNoLi-5zqLtHBkm8d_a6scqKxunMJMDydO4Uj1C2I9kuluohopm7csLr5E84IuqYGadV_u6w3R4QZ9tvdBIDF2G0MqFOtfe_kI85FdufhLwflSScX9JY&state=3f886056bd2879cdd7499c5957b1e6963fc3d01fa0d2a0c0" for ::1 at 2016-07-10 19:31:23 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAb2YdD7GZCW3mzcupA5lFIrtiYI0LYrR7zuTqwTkblX2P-lJHFMjXcVkOyu-AQVf-5LIzJa60BuL8SNILagojbhvhc_GonhpuVr86he5nJuSDCbZwklUW2OjISL_BpcelSH3cxZlOcqlHRp4AVrd_s42cW0UxhJdQF30U8FXcb02pg2M2eguZ-Z_Y6oWQRtOgPvThyOS7IL2l_fgkrDo2DrS8Xjz5nihboBNoLi-5zqLtHBkm8d_a6scqKxunMJMDydO4Uj1C2I9kuluohopm7csLr5E84IuqYGadV_u6w3R4QZ9tvdBIDF2G0MqFOtfe_kI85FdufhLwflSScX9JY", "state"=>"3f886056bd2879cdd7499c5957b1e6963fc3d01fa0d2a0c0"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "clowfinger13@gmail.com"], ["provider", "facebook"], ["created_at", 2016-07-10 16:31:24 UTC], ["updated_at", 2016-07-10 16:31:24 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$x9cHUBBqah8eIEJn.aP28uyo58DmE0Tour9tssxch7JXoPev0U2i2"]]
  [1m[35m (109.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:31:24 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:31:24 UTC], ["last_sign_in_at", 2016-07-10 16:31:24 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 43]]
  [1m[35m (63.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 306ms (ActiveRecord: 173.8ms)


Started GET "/" for ::1 at 2016-07-10 19:31:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 19:33:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 19:33:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.4ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 19:33:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.4ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 19:33:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 44.0ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 19:33:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 34.9ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:14 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"3pA52qBfsrK8iUmeITF3ISL4r1xYgAzkPu28maXa16AvO45J0jhVO+4X0DkFNFj7g9oe1Prd0pQ+d8onGAafkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:34:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:34:20 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:34:20 +0300
Started GET "/users/auth/facebook/callback?code=AQCm8R7L-6DXWr6znPizCXlSni_j8PN34F17ohJSHj6r2_4Zsuf_85AnDK6sgLrafp5vdK3YeRDP_-WkuBb5lN_eFhqHLU_CkAN7HQrGGzk_QuX_b5c7WhS5BA9qKq7gaqflY1-9g5iKTsQOz-swhaPaIRVlvSCSeB4iLJcbX1J2a0agvRGjTfbFp21WFUdQ_jZSP7gj52nhu-6sk_aGfhTE2Tpe5XztUHymdJAkpml4pqrt8EHXtM5Xjpm8vutsLK52bMgqaDWUBGR7gkPncd6S-Y_rPnHE656KHmBuve0F7ko22CbPN8L6zEJEjtNMVOqcpyKpaoQ0iZ6nvkGiH-jb&state=619c693241b7235a2279fe3148215012ed129718be52420d" for ::1 at 2016-07-10 19:34:20 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCm8R7L-6DXWr6znPizCXlSni_j8PN34F17ohJSHj6r2_4Zsuf_85AnDK6sgLrafp5vdK3YeRDP_-WkuBb5lN_eFhqHLU_CkAN7HQrGGzk_QuX_b5c7WhS5BA9qKq7gaqflY1-9g5iKTsQOz-swhaPaIRVlvSCSeB4iLJcbX1J2a0agvRGjTfbFp21WFUdQ_jZSP7gj52nhu-6sk_aGfhTE2Tpe5XztUHymdJAkpml4pqrt8EHXtM5Xjpm8vutsLK52bMgqaDWUBGR7gkPncd6S-Y_rPnHE656KHmBuve0F7ko22CbPN8L6zEJEjtNMVOqcpyKpaoQ0iZ6nvkGiH-jb", "state"=>"619c693241b7235a2279fe3148215012ed129718be52420d"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 16:34:20 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 16:34:20 UTC], ["id", 43]]
  [1m[35m (102.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 106ms (ActiveRecord: 103.3ms)


Started GET "/" for ::1 at 2016-07-10 19:34:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:34:25 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"48gKQ1l3FLF15B4HQoBlMBJG9RnCMPy+jJk4pItRcVrHQGudd12sZvZMZ0hI73av3o641QAta1mxCZb8fKsrbw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:34:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:34:54 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:34:54 +0300
Started GET "/users/auth/facebook/callback?error_code=4201&error_message=User+canceled+the+Dialog+flow&state=b23c0f3cd04020f6fef77d12aea907959473596f456f3d87" for ::1 at 2016-07-10 19:35:39 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"error_code"=>"4201", "error_message"=>"User canceled the Dialog flow", "state"=>"b23c0f3cd04020f6fef77d12aea907959473596f456f3d87"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 19:35:39 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.0ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 28ms (Views: 27.4ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-07-10 19:35:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 28ms (Views: 26.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:35:55 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:35:56 +0300
Started GET "/users/auth/facebook/callback?error_code=4201&error_message=User+canceled+the+Dialog+flow&state=434ad2b2ff78b5881cb794651b130fef578be02515f7cc80" for ::1 at 2016-07-10 19:36:01 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"error_code"=>"4201", "error_message"=>"User canceled the Dialog flow", "state"=>"434ad2b2ff78b5881cb794651b130fef578be02515f7cc80"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 19:36:01 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.0ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:36:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:36:05 +0300
Started GET "/users/auth/vkontakte/callback?code=8f76743bf7436ed493&state=8c05126a57170ecc6d7d604fea34f2fcfa22918da4352993" for ::1 at 2016-07-10 19:36:05 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"8f76743bf7436ed493", "state"=>"8c05126a57170ecc6d7d604fea34f2fcfa22918da4352993"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 16:36:06 UTC], ["updated_at", 2016-07-10 16:36:06 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$onc/JfGj5.cKZuriDZerLOMyRb2wYJ5HIAAkX49MHm9u.gkIfa/c2"]]
  [1m[35m (108.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:36:06 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:36:06 UTC], ["last_sign_in_at", 2016-07-10 16:36:06 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 44]]
  [1m[35m (62.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 303ms (ActiveRecord: 172.1ms)


Started GET "/" for ::1 at 2016-07-10 19:36:06 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.2ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 19:36:09 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 27.6ms | ActiveRecord: 0.4ms)


Started GET "/users" for ::1 at 2016-07-10 19:36:10 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 36.3ms | ActiveRecord: 0.7ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:36:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"LtQPCdJFPDT7DGDGXi/BFSBqUgPvqTDHwss2DnFfyMcY8rzQx95oby3CghcyxVcWA8J0KuebtbHDia1zqkvESQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:36:12 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"LtQPCdJFPDT7DGDGXi/BFSBqUgPvqTDHwss2DnFfyMcY8rzQx95oby3CghcyxVcWA8J0KuebtbHDia1zqkvESQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:36:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
Completed 200 OK in 27ms (Views: 26.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:36:14 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:36:14 +0300
Started GET "/users/auth/facebook/callback?error_code=4201&error_message=User+canceled+the+Dialog+flow&state=576143bfc7629e3fc4f2404a91df83579c191de561670db1" for ::1 at 2016-07-10 19:36:18 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"error_code"=>"4201", "error_message"=>"User canceled the Dialog flow", "state"=>"576143bfc7629e3fc4f2404a91df83579c191de561670db1"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 19:36:18 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.0ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 35ms (Views: 33.2ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-07-10 19:36:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.9ms)
Completed 200 OK in 33ms (Views: 31.7ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:36:36 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:36:36 +0300
Started GET "/" for ::1 at 2016-07-10 19:37:13 +0300
  
SyntaxError (/home/mikhail/Projects/Ruby/rails_projects/authprovider/app/models/user.rb:32: syntax error, unexpected keyword_end, expecting end-of-input):
  
app/models/user.rb:32: syntax error, unexpected keyword_end, expecting end-of-input
config/routes.rb:10:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.4ms)
Started GET "/" for ::1 at 2016-07-10 19:37:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.6ms)
Completed 200 OK in 35ms (Views: 33.6ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:37:21 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:37:21 +0300
Started GET "/" for ::1 at 2016-07-10 19:39:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.9ms)
Completed 200 OK in 34ms (Views: 31.9ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:39:30 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:39:30 +0300
Started GET "/users/auth/facebook/callback?error_code=4201&error_message=User+canceled+the+Dialog+flow&state=1c8eb45e020c1cd617ce8ea54b04258e94b7ae041db24998" for ::1 at 2016-07-10 19:39:35 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"error_code"=>"4201", "error_message"=>"User canceled the Dialog flow", "state"=>"1c8eb45e020c1cd617ce8ea54b04258e94b7ae041db24998"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 19:39:35 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 22ms (Views: 21.1ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-07-10 19:39:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.2ms)
Completed 200 OK in 31ms (Views: 29.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:16 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:17 +0300
Started GET "/users/auth/facebook/callback?code=AQC2SRofagGw7LLFGrB9HxgSP5GyBP1el3juTjgR2fBvuYmeAPgUDQ4RA2s2cqs9aYXHaxRVgBSaM5DyNhOkdtYMKU2T0CoSR1-evqf4LbFhVKH3KePfNBnrqbZsIszOsikjVbRIGb9fRmscGKiPnS0WHp7vIh28ySg-LLVPtzSvX3--zKXmSShqV__l8394b4M6JWOh_on4o6brcRjWkJ3Y-oxfgLXqQqFEeUBmXLf5GF3GhhcjZRZ0lM01GJcA7WJnhBm4gCqdMrC08LQn6Bjcr2fCLC0CH9h0wXCL79IJDkJihU_ar5FKjKAafMPOcspqqpqJOh5U53-_UIAb5jH9&state=b6f3ee7beb7056e9123eab4a95e62f0ec6a7d64f257cb4c2" for ::1 at 2016-07-10 19:48:17 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC2SRofagGw7LLFGrB9HxgSP5GyBP1el3juTjgR2fBvuYmeAPgUDQ4RA2s2cqs9aYXHaxRVgBSaM5DyNhOkdtYMKU2T0CoSR1-evqf4LbFhVKH3KePfNBnrqbZsIszOsikjVbRIGb9fRmscGKiPnS0WHp7vIh28ySg-LLVPtzSvX3--zKXmSShqV__l8394b4M6JWOh_on4o6brcRjWkJ3Y-oxfgLXqQqFEeUBmXLf5GF3GhhcjZRZ0lM01GJcA7WJnhBm4gCqdMrC08LQn6Bjcr2fCLC0CH9h0wXCL79IJDkJihU_ar5FKjKAafMPOcspqqpqJOh5U53-_UIAb5jH9", "state"=>"b6f3ee7beb7056e9123eab4a95e62f0ec6a7d64f257cb4c2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 16:48:17 UTC], ["last_sign_in_at", 2016-07-10 16:34:20 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 16:48:17 UTC], ["id", 43]]
  [1m[35m (77.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 82ms (ActiveRecord: 77.5ms)


Started GET "/" for ::1 at 2016-07-10 19:48:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.4ms)


Started DELETE "/users/43" for ::1 at 2016-07-10 19:48:22 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"6YKmOosPqiOLRPJfAItxtHXyAnrSNtlATLVaKzdvCAM+FZhk+z6J1i2dYBxk/xiUT/YI+mcT2k3brdi5QJnkrA==", "id"=>"43"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 43]]
  [1m[35m (138.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 142ms (ActiveRecord: 139.5ms)


Started GET "/users" for ::1 at 2016-07-10 19:48:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.8ms | ActiveRecord: 0.4ms)


Started DELETE "/users/44" for ::1 at 2016-07-10 19:48:23 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"hSl9R1ejc7CAI5ZYDWZ0RmccqM/jqrX7XI7sVAn5hglSvkMZJ5JQRSb6BBtpEh1mXRiiT1aPtvbLlm7Gfg9qpg==", "id"=>"44"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 44]]
  [1m[35m (126.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 130ms (ActiveRecord: 127.4ms)


Started GET "/users" for ::1 at 2016-07-10 19:48:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 27ms (Views: 24.9ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:24 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:24 +0300
Started GET "/users/auth/facebook/callback?code=AQCYG6lCGXDqunGGSaoDe3DBUoNhLLI1MAfIMgxTinOBr6Sp2zJe9KKWcpSlSnLD_ro1ZzufV01yl-UXgu_1jBtuxXar5V_YRefU2i3Gp16QMqhiyfj-wmDddJuByWfRKBwvB2Kw04ARSKH9UbFN4ynhnLUFAMnSUE4tcv9ZRD-3ODLU-NLOgNGVmqTe0Xoq3RLmUYQ0ko_WIjSqmPJnvRz0Tp13CSj3cmTxGeBOv8Dl2VA8_87jFhE91wLeolXGkX1JA0bnuqsBq_8fQ7HjCVWoNU7MDilIGxjVALgRlGNRvAPB7-qcdDFPfAanlF3qGXwlTE3moEdsgFtRmb2rgTfZ&state=f66f8d5b36c42fbaa3732b0479356f7e6f1729456220ac05" for ::1 at 2016-07-10 19:48:25 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCYG6lCGXDqunGGSaoDe3DBUoNhLLI1MAfIMgxTinOBr6Sp2zJe9KKWcpSlSnLD_ro1ZzufV01yl-UXgu_1jBtuxXar5V_YRefU2i3Gp16QMqhiyfj-wmDddJuByWfRKBwvB2Kw04ARSKH9UbFN4ynhnLUFAMnSUE4tcv9ZRD-3ODLU-NLOgNGVmqTe0Xoq3RLmUYQ0ko_WIjSqmPJnvRz0Tp13CSj3cmTxGeBOv8Dl2VA8_87jFhE91wLeolXGkX1JA0bnuqsBq_8fQ7HjCVWoNU7MDilIGxjVALgRlGNRvAPB7-qcdDFPfAanlF3qGXwlTE3moEdsgFtRmb2rgTfZ", "state"=>"f66f8d5b36c42fbaa3732b0479356f7e6f1729456220ac05"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "clowfinger13@gmail.com"], ["provider", "facebook"], ["created_at", 2016-07-10 16:48:25 UTC], ["updated_at", 2016-07-10 16:48:25 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$HZAA0cByBh9yAMpj5AC02uPBw5KdhubwFGptdsr/DvSQ2PiY.ZIfe"]]
  [1m[35m (101.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:48:25 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:48:25 UTC], ["last_sign_in_at", 2016-07-10 16:48:25 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 45]]
  [1m[35m (54.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 289ms (ActiveRecord: 156.9ms)


Started GET "/" for ::1 at 2016-07-10 19:48:25 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:48:29 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"qsYOAW5bWqw5CG7cKvJgGXJHFrtvdpclHoQT6Z+lN7pCSyQE8lEo9gCnpSYvYsN/wQLh5wSUiM3PkAI+G6AEDw=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 19:48:29 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.1ms)
Completed 200 OK in 26ms (Views: 24.8ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:48 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:48:49 +0300
Started GET "/users/auth/facebook/callback?code=AQDD50L9Fjda0an8bCoGvJ1a-uR5asiBx2KOtpTQb0HSVoJSDVlwg22Lj4k61RRbNzpBlKjCM_n_KtZSfxEQ_U2hVQ7_YmWjT8CrY-L1eeQnsvCjXE2D3HajiHxkfkjwvIKG3JgsEMce_cbWHpaY6Vk4p6xWKAUloPbkkFvU4wSS_8sJPCeYEE0T48MSjHxx0TYtDqfdY5d8Ns7fjkum2GuFnn8wMhLpop4ai4RK8PMdoaYmO49o_XLKT5k5oXlKWAblXYeg9jlMgyIlY0E_-sZFiPt15L33P5e6qoBRxPA5TxoUqGu3B0mPyistBF31smHffxeyvqrlkCP9zneSt7F0&state=7ed5f3735b14b1471acef86253298569bfbe64083aab4431" for ::1 at 2016-07-10 19:49:13 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDD50L9Fjda0an8bCoGvJ1a-uR5asiBx2KOtpTQb0HSVoJSDVlwg22Lj4k61RRbNzpBlKjCM_n_KtZSfxEQ_U2hVQ7_YmWjT8CrY-L1eeQnsvCjXE2D3HajiHxkfkjwvIKG3JgsEMce_cbWHpaY6Vk4p6xWKAUloPbkkFvU4wSS_8sJPCeYEE0T48MSjHxx0TYtDqfdY5d8Ns7fjkum2GuFnn8wMhLpop4ai4RK8PMdoaYmO49o_XLKT5k5oXlKWAblXYeg9jlMgyIlY0E_-sZFiPt15L33P5e6qoBRxPA5TxoUqGu3B0mPyistBF31smHffxeyvqrlkCP9zneSt7F0", "state"=>"7ed5f3735b14b1471acef86253298569bfbe64083aab4431"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" IS NULL ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 16:49:14 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 16:49:14 UTC], ["id", 45]]
  [1m[35m (380.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 385ms (ActiveRecord: 381.4ms)


Started GET "/" for ::1 at 2016-07-10 19:49:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.7ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 19:49:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 23.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:51:22 +0300
Processing by Devise::SessionsController#destroy as HTML
Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:51:22 +0300
  Parameters: {"authenticity_token"=>"AVgsMYHRxoQ5PxDCgI6NVHszEZbNVzMbXM7DK8cht1JBvg9N0B3CuJDilQfseEsG7k3XIRlRnID748ONSzCA1A=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 0.7ms)


Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"AVgsMYHRxoQ5PxDCgI6NVHszEZbNVzMbXM7DK8cht1JBvg9N0B3CuJDilQfseEsG7k3XIRlRnID748ONSzCA1A=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 14ms (ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 19:51:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.2ms)


Started DELETE "/users/45" for ::1 at 2016-07-10 19:51:23 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"uXwSzC/uv3TSeuET/scAuiCtXqaz1hDTRV5WUZ8xKRXoOfT7Ulwu8bx9YqM1cN3SYNcPkVeqkExLx+p1GvffDQ==", "id"=>"45"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 45]]
  [1m[35m (139.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 144ms (ActiveRecord: 140.3ms)


Started GET "/users" for ::1 at 2016-07-10 19:51:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.9ms)
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:51:25 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:51:25 +0300
Started GET "/users/auth/facebook/callback?code=AQDr6avDmrAAZDWoDPrD9GTuGiqEi6BqgdGvq1FeMIuWDJ_1nJ7gBelsIrdDRw-g1VlfLIgkrWfjG5WLZxGoqljhoHtFBccn4YyYTtxY9-DfcKU61ufrT4APB-sMQYM0iEe3gHkjmCEbNkxer2-eKjZPtdxpkZSuutV_wCucN2xlsWVONmzrD4FOxXtyeXB0PwW49RYAAwFt-lnLOyL8Ib9btcNHOWd-Eu0hDvl9kGsHm-H6hKbs6ds6smaJC-sJfsLzuwcwInU_XYXif8_n974BXUqSwZzaSlfixut0WGyAWhyaaNW9oFS1WmHZb0YACXmybPQXEjrJWIPWGDJvL-57&state=dfa7d2778c29150c531aa93185413aca3f573598563bb6b2" for ::1 at 2016-07-10 19:51:26 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDr6avDmrAAZDWoDPrD9GTuGiqEi6BqgdGvq1FeMIuWDJ_1nJ7gBelsIrdDRw-g1VlfLIgkrWfjG5WLZxGoqljhoHtFBccn4YyYTtxY9-DfcKU61ufrT4APB-sMQYM0iEe3gHkjmCEbNkxer2-eKjZPtdxpkZSuutV_wCucN2xlsWVONmzrD4FOxXtyeXB0PwW49RYAAwFt-lnLOyL8Ib9btcNHOWd-Eu0hDvl9kGsHm-H6hKbs6ds6smaJC-sJfsLzuwcwInU_XYXif8_n974BXUqSwZzaSlfixut0WGyAWhyaaNW9oFS1WmHZb0YACXmybPQXEjrJWIPWGDJvL-57", "state"=>"dfa7d2778c29150c531aa93185413aca3f573598563bb6b2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "strukov.yura.1996@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Yury Strukov"], ["nickname", "strukov.yura.1996@gmail.com"], ["provider", "facebook"], ["created_at", 2016-07-10 16:51:26 UTC], ["updated_at", 2016-07-10 16:51:26 UTC], ["email", "strukov.yura.1996@gmail.com"], ["encrypted_password", "$2a$11$mM.tljLMACq6lQ91SIkSZeUH2vxov7oKFj3d1dEQZsWApddoXSaz6"]]
  [1m[35m (124.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:51:26 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:51:26 UTC], ["last_sign_in_at", 2016-07-10 16:51:26 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 46]]
  [1m[35m (59.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 316ms (ActiveRecord: 185.2ms)


Started GET "/" for ::1 at 2016-07-10 19:51:27 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:52:03 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"NtcPL5DT0m0aq51IE57MJopJWAoGrusy7NUw9rC9J4sRtsxwAytfPilWKD0BBBx10tYXqX931y8WnSe/oNyBwg=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:52:03 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (3.7ms)
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:52:05 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:52:05 +0300
Started GET "/users/auth/facebook/callback?code=AQBKQEY96yIrap-PD1LYhexWvekfZpcUO3EkKxlPScki9zesZd5vUj59U41X6xw7AUnGDv2HHZK3MJMw2lvDJ7wSupzu6Ucb8FGRznKO6Dt78qKRyxNS3ya6t7hlBMFiP2_5YKcQ5i2ULp9Cn-qb1FiekE57g5DQAvqtgSZRl4ATNcquLwY56VCYorXnQO2_oDV776YHuda7Kj0J6ekdydj8Mk6Tg6L8m57jpU_UbvYRdMz_mWafhilkBSvqstXVro5bLgyZQLXaWXBKCHqTvq3yx-RnxNnMbXMW6zmm7d3GPVfLZAiOxaA1TB9G-2U6SMve1gD5xmf9GzIYGlOqKut2&state=60c72edb78fe8139b0ddfa4cfbe181c0146dc8b19879bcd1" for ::1 at 2016-07-10 19:52:05 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBKQEY96yIrap-PD1LYhexWvekfZpcUO3EkKxlPScki9zesZd5vUj59U41X6xw7AUnGDv2HHZK3MJMw2lvDJ7wSupzu6Ucb8FGRznKO6Dt78qKRyxNS3ya6t7hlBMFiP2_5YKcQ5i2ULp9Cn-qb1FiekE57g5DQAvqtgSZRl4ATNcquLwY56VCYorXnQO2_oDV776YHuda7Kj0J6ekdydj8Mk6Tg6L8m57jpU_UbvYRdMz_mWafhilkBSvqstXVro5bLgyZQLXaWXBKCHqTvq3yx-RnxNnMbXMW6zmm7d3GPVfLZAiOxaA1TB9G-2U6SMve1gD5xmf9GzIYGlOqKut2", "state"=>"60c72edb78fe8139b0ddfa4cfbe181c0146dc8b19879bcd1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["nickname", "clowfinger13@gmail.com"], ["provider", "facebook"], ["created_at", 2016-07-10 16:52:06 UTC], ["updated_at", 2016-07-10 16:52:06 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$ABd6JMfBEx1bQVi1jTYbdeuDVIaoui4AxgJcVB/D8fyE7Kshocbau"]]
  [1m[35m (93.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:52:06 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:52:06 UTC], ["last_sign_in_at", 2016-07-10 16:52:06 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 47]]
  [1m[35m (63.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 289ms (ActiveRecord: 158.2ms)


Started GET "/" for ::1 at 2016-07-10 19:52:06 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.3ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:54:54 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Qu0ghMeeDDWhUUj4J+tUYgtGnl6AX4Bwls0l9RLF3gjL3z39W9CoZuN6nyFyFNbFjSbCj48WtyYHYja/nKrt1Q=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 19:54:54 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 28ms (Views: 26.4ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:54:58 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:54:58 +0300
Started GET "/users/auth/facebook/callback?code=AQB0WqnZ5cgUtifHjHWZtirw42yaci-APdpMlDKQefIrzHrish9FZDhc86t-EDE7jytqpa1el01QHEV9f__EJK5BPZoISSWo4k47pZgQQOSat78zOEjIWMr2bhIhUXRrfSqNYSERJDusJEgTxL8Ub_92Y6cC9PGfsww8VWk6jvqBWY73PvjQnqIeUZ9pkC-XGPE9TkwRtBhN77qx2tXCWyKj_lolGwUf03FIszDwdlLLqrTlLdeXxCXTGvM1kh_vE9HMgfILHii9UlVOD28HDt0ggG8DXAkzfeXs-Q7bFfcnj3CfeNoov9c-SvsLeI3_5T4Nw3BPkVjtBt_byBH9-kGw&state=fcf4558b2590d51e1d1b32d242dccfe22a37566843385fbb" for ::1 at 2016-07-10 19:54:59 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB0WqnZ5cgUtifHjHWZtirw42yaci-APdpMlDKQefIrzHrish9FZDhc86t-EDE7jytqpa1el01QHEV9f__EJK5BPZoISSWo4k47pZgQQOSat78zOEjIWMr2bhIhUXRrfSqNYSERJDusJEgTxL8Ub_92Y6cC9PGfsww8VWk6jvqBWY73PvjQnqIeUZ9pkC-XGPE9TkwRtBhN77qx2tXCWyKj_lolGwUf03FIszDwdlLLqrTlLdeXxCXTGvM1kh_vE9HMgfILHii9UlVOD28HDt0ggG8DXAkzfeXs-Q7bFfcnj3CfeNoov9c-SvsLeI3_5T4Nw3BPkVjtBt_byBH9-kGw", "state"=>"fcf4558b2590d51e1d1b32d242dccfe22a37566843385fbb"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.1ms)
Started GET "/" for ::1 at 2016-07-10 19:55:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.8ms)
Completed 200 OK in 41ms (Views: 39.7ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:55:53 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 19:55:53 +0300
Started GET "/users/auth/facebook/callback?code=AQAwKZocPeNsH7wWR6sQmWJQlZzH5OVe77pTWd_zWBuGw4tjV91ral7yodUloJWdXFiCkj6KqzmOO__J4RUmaMzylSJLPFlcHgGBYfYxzC5xdiUUhLDVkBf-1cYTks9aVwAGQGmgR2wrXwzaAR8oQoVOglY9Ckx51KoONmaUG-qTm9nhubLlfMqinYvw4pf3c3bf7P_yNfoeVttgSWR1ykYaR7WQIbdkPoIruC4FbGW7DsyTCHaD_zkRAD3HkMEPj-eBG3EtUrNlLyuQdNGhqCICD6YE8datcSN2RMPID4TRlzOJgmEkHn39S7RRYp-KDpTKTwXXnEhQ9TGbBV7HlNxK&state=da5af240343f2c41ba057262076e7714596ef8c7ef161773" for ::1 at 2016-07-10 19:55:53 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAwKZocPeNsH7wWR6sQmWJQlZzH5OVe77pTWd_zWBuGw4tjV91ral7yodUloJWdXFiCkj6KqzmOO__J4RUmaMzylSJLPFlcHgGBYfYxzC5xdiUUhLDVkBf-1cYTks9aVwAGQGmgR2wrXwzaAR8oQoVOglY9Ckx51KoONmaUG-qTm9nhubLlfMqinYvw4pf3c3bf7P_yNfoeVttgSWR1ykYaR7WQIbdkPoIruC4FbGW7DsyTCHaD_zkRAD3HkMEPj-eBG3EtUrNlLyuQdNGhqCICD6YE8datcSN2RMPID4TRlzOJgmEkHn39S7RRYp-KDpTKTwXXnEhQ9TGbBV7HlNxK", "state"=>"da5af240343f2c41ba057262076e7714596ef8c7ef161773"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 130ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:13:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.2ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:55:57 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:55:57 +0300
Started GET "/users/auth/vkontakte/callback?code=77c3c7bf7dd99902e1&state=45b17d08e2737bdb74b9a3d32e86c26f7dc2fcb93df86c60" for ::1 at 2016-07-10 19:55:58 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"77c3c7bf7dd99902e1", "state"=>"45b17d08e2737bdb74b9a3d32e86c26f7dc2fcb93df86c60"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 16:55:58 UTC], ["updated_at", 2016-07-10 16:55:58 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$/DqNKQ0YpQHSwmnFP4RBxOOdLx8K1UTgWJfFqfqjDyg2yQZYzd8Ly"]]
  [1m[35m (89.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 16:55:58 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 16:55:58 UTC], ["last_sign_in_at", 2016-07-10 16:55:58 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 48]]
  [1m[35m (65.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 287ms (ActiveRecord: 156.5ms)


Started GET "/" for ::1 at 2016-07-10 19:55:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 48], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.1ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 19:56:08 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Fowex2LUmLM2PNOP8DfQ8NsEbn5FvXUrlGRqtGWyF+dMB0dU8YRtEJfyiWOl1DKz2RnxlzVzS5+ZzgdAADegTg=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 19:56:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:56:09 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 19:56:10 +0300
Started GET "/users/auth/vkontakte/callback?code=f291ae680075b5a27f&state=f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b" for ::1 at 2016-07-10 19:56:46 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"f291ae680075b5a27f", "state"=>"f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 123ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/users/auth/vkontakte/callback?code=af7fcc4a6188559bdf&state=f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b" for ::1 at 2016-07-10 19:57:15 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"af7fcc4a6188559bdf", "state"=>"f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 0.7ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.6ms)
Started GET "/users/auth/vkontakte/callback?code=597a2eb102de583f85&state=f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b" for ::1 at 2016-07-10 19:57:28 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"597a2eb102de583f85", "state"=>"f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.5ms)
Started GET "/users/auth/vkontakte/callback?code=7723391f3291621311&state=f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b" for ::1 at 2016-07-10 19:57:36 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7723391f3291621311", "state"=>"f2353511fd8c53d98e9ec5829fe8ecd621e42b61d801aa8b"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 130ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.1ms)
Started GET "/" for ::1 at 2016-07-10 19:57:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
Completed 200 OK in 30ms (Views: 27.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:00:41 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:00:41 +0300
Started GET "/users/auth/facebook/callback?code=AQCeYi9rv2Mz8nZrC01zHKd4NJvhzvYMVKSQ6c97u-ZMUn-s7WLVCXxRZ29hWWfBvkea2Siy47YZd1CHm7nn9atUZs9aywK3qBiulRMoGq9N9rKrWxq5-6dq_P0rlCMxWCTXFFqsetjVE7bIkiXUwy_bTa0uJBr9TW6YmDUi_sEHcJ2UoY9POCTuPZUeBlB5PGgXNFye5eZxNRYZJAZKsnAW4Ug_mG9C9KdF-ZOZ8zBhM5YEXMmTdWXlYz0SRIN23Kk7LaBN1CzCNpw8WY19SajWKM4wDy_nis5jYFV07pZy6XXtwnteviSR5M0IomigiPowF209lCVf6BvGBaXWY-4e&state=3180d19ff597c56fa7022996e33c76141b62a918709ecac8" for ::1 at 2016-07-10 20:00:41 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCeYi9rv2Mz8nZrC01zHKd4NJvhzvYMVKSQ6c97u-ZMUn-s7WLVCXxRZ29hWWfBvkea2Siy47YZd1CHm7nn9atUZs9aywK3qBiulRMoGq9N9rKrWxq5-6dq_P0rlCMxWCTXFFqsetjVE7bIkiXUwy_bTa0uJBr9TW6YmDUi_sEHcJ2UoY9POCTuPZUeBlB5PGgXNFye5eZxNRYZJAZKsnAW4Ug_mG9C9KdF-ZOZ8zBhM5YEXMmTdWXlYz0SRIN23Kk7LaBN1CzCNpw8WY19SajWKM4wDy_nis5jYFV07pZy6XXtwnteviSR5M0IomigiPowF209lCVf6BvGBaXWY-4e", "state"=>"3180d19ff597c56fa7022996e33c76141b62a918709ecac8"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:00:42 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:00:42 UTC], ["id", 47]]
  [1m[35m (94.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 106ms (ActiveRecord: 95.5ms)


Started GET "/" for ::1 at 2016-07-10 20:00:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 21.9ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:00:46 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"7z5FEmdAHH+iplSUeeIBohobveTI/dYsz1xHp5DyIU5eE6/TCz0hJZXT6rZQY+8vfqr0JpfZHV2JfMPR+lRtjA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:00:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
Completed 200 OK in 30ms (Views: 28.6ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:01:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:01:04 +0300
Started GET "/users/auth/vkontakte/callback?code=360d9339a1ff67a7a7&state=7bdd637c59d76b882b2786c400a3140ab271cec3e7cb476d" for ::1 at 2016-07-10 20:01:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:01:14 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:01:14 +0300
Started GET "/users/auth/vkontakte/callback?code=00c7fb3d04e69155bf&state=9900fc610f62bf62629c145c7457654d537b3e4aa1d1de7b" for ::1 at 2016-07-10 20:01:15 +0300
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (6.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (21.8ms)
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:04 +0300
  Parameters: {"code"=>"00c7fb3d04e69155bf", "state"=>"9900fc610f62bf62629c145c7457654d537b3e4aa1d1de7b"}
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:04 +0300
Started DELETE "/users/48" for ::1 at 2016-07-10 20:02:04 +0300
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
Started DELETE "/users/48" for ::1 at 2016-07-10 20:02:04 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:04 +0300
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 145ms (ActiveRecord: 1.1ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.8ms)
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"jPAXISukPOxmRgsXRYlZRSVzzmPUMwgJbtjzHQE90DxiD06ydNgn+coIUEDkq/JkRpJYETe1jxzM5oYpQ8KTgQ==", "id"=>"48"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 48], ["LIMIT", 1]]
Processing by UsersController#destroy as HTML
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  Parameters: {"authenticity_token"=>"jPAXISukPOxmRgsXRYlZRSVzzmPUMwgJbtjzHQE90DxiD06ydNgn+coIUEDkq/JkRpJYETe1jxzM5oYpQ8KTgQ==", "id"=>"48"}
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 48]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (63.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Redirected to http://localhost:3000/users
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 48]]
Completed 302 Found in 70ms (ActiveRecord: 63.7ms)


  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 68ms (ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 20:02:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 29ms (Views: 27.1ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:07 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:07 +0300
Started GET "/users/auth/vkontakte/callback?code=0a18cde28d8dba9682&state=1936a3d6457c1a71be9137987b797c43a184b8af82ad720f" for ::1 at 2016-07-10 20:02:07 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"0a18cde28d8dba9682", "state"=>"1936a3d6457c1a71be9137987b797c43a184b8af82ad720f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Юрий Струков"], ["nickname", "yura_str"], ["url", "http://vk.com/yura_str"], ["created_at", 2016-07-10 17:02:08 UTC], ["updated_at", 2016-07-10 17:02:08 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$NeUnK58pT26ls/nTkRfvgOPShe76QXadjsdLDdFAlvUD34ztRRH0e"]]
  [1m[35m (68.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:02:08 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:02:08 UTC], ["last_sign_in_at", 2016-07-10 17:02:08 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 49]]
  [1m[35m (64.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 262ms (ActiveRecord: 134.1ms)


Started GET "/" for ::1 at 2016-07-10 20:02:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 49], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:02:17 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"TPDd9duQcswDtWwLV2Kzqc3su+R4+udfgd3qasAG5wVUzjJMUlHUlz3p/8A0mBC28mWWZYJuzmQ0BwwDC0iuHQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:02:17 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.4ms)
Completed 200 OK in 26ms (Views: 24.7ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:20 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:20 +0300
Started GET "/users/auth/vkontakte/callback?code=cf4f0a745f12098ee6&state=52e9c96f9c2237a4ea7151f68aae81343dac8cdc02abb7c3" for ::1 at 2016-07-10 20:02:20 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"cf4f0a745f12098ee6", "state"=>"52e9c96f9c2237a4ea7151f68aae81343dac8cdc02abb7c3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:02:21 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:02:21 UTC], ["id", 49]]
  [1m[35m (62.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 67ms (ActiveRecord: 63.0ms)


Started GET "/" for ::1 at 2016-07-10 20:02:21 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 49], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.4ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:02:46 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"qeMgXJ3e9kGdBaCnJ2kxTlqETiq6oh2JOUTMMvtYRuU8JpoyVaCERkjt8x2M/UICDIiw0e8/VoxVVcVgeKqHNg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:02:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.4ms)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:48 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:02:49 +0300
Started GET "/users/auth/vkontakte/callback?code=f76f6b656d5857d65a&state=fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060" for ::1 at 2016-07-10 20:03:00 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"f76f6b656d5857d65a", "state"=>"fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 130ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (19.9ms)
Started GET "/users/auth/vkontakte/callback?code=9e0328dd86a8673b79&state=fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060" for ::1 at 2016-07-10 20:05:11 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"9e0328dd86a8673b79", "state"=>"fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 133ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.5ms)
Started GET "/users/auth/vkontakte/callback?code=42b179bb18f537addd&state=fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060" for ::1 at 2016-07-10 20:05:13 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"42b179bb18f537addd", "state"=>"fddc24da023a49914eed5f97ac84b0e4ad1f45785ba4d060"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 133ms (ActiveRecord: 1.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.4ms)
Started GET "/" for ::1 at 2016-07-10 20:05:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.1ms)
Completed 200 OK in 33ms (Views: 31.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:05:20 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:05:20 +0300
Started GET "/users/auth/vkontakte/callback?code=05795a4974ef052678&state=004c80b9acb003207c100557beffef920eeb4f320ee9bb55" for ::1 at 2016-07-10 20:05:21 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"05795a4974ef052678", "state"=>"004c80b9acb003207c100557beffef920eeb4f320ee9bb55"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 125ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.9ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:22 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:22 +0300
Started GET "/users/auth/vkontakte/callback?code=fe6071ff40c784c623&state=ea4b3b0970854336f3e8a7e272e33ef2a69ebed85e3706c5" for ::1 at 2016-07-10 20:06:22 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"fe6071ff40c784c623", "state"=>"ea4b3b0970854336f3e8a7e272e33ef2a69ebed85e3706c5"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (19.0ms)
Started DELETE "/users/49" for ::1 at 2016-07-10 20:06:30 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"Sry3avX/BoQ5EDqjs5zhKAiZEeTBNR9n5b4X2dfsVx73T1ZoRwd4xe99Nf9BjTbUS7CXARSnZIr7s1nBpGl7aw==", "id"=>"49"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 49]]
  [1m[35m (111.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 114ms (ActiveRecord: 112.1ms)


Started GET "/users" for ::1 at 2016-07-10 20:06:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.9ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:31 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:32 +0300
Started GET "/users/auth/vkontakte/callback?code=8232bf1cdcd5219b82&state=a0efd99e8195b01f92c1f96e8a1ce75f66b5268c95110c5f" for ::1 at 2016-07-10 20:06:32 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"8232bf1cdcd5219b82", "state"=>"a0efd99e8195b01f92c1f96e8a1ce75f66b5268c95110c5f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 17:06:33 UTC], ["updated_at", 2016-07-10 17:06:33 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$i6674B78btsaP0G6KztOru6QVTfeAS/ekk5jVy7hUWksxlp/W41Ua"]]
  [1m[35m (68.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:06:33 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:06:33 UTC], ["last_sign_in_at", 2016-07-10 17:06:33 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 50]]
  [1m[35m (72.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 270ms (ActiveRecord: 142.3ms)


Started GET "/" for ::1 at 2016-07-10 20:06:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.5ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 20:06:38 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 36.5ms | ActiveRecord: 0.8ms)


Started GET "/users" for ::1 at 2016-07-10 20:06:41 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (18.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 36.1ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:06:42 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"/JPbS7UGSKlnhwfvKhuZHh5BQmRIpmvqvfT1q4uhg7mJ5W+w/eipLLtCp2si/yg+U39hxr8AGZiHSS03I/ZTKg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:06:42 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"/JPbS7UGSKlnhwfvKhuZHh5BQmRIpmvqvfT1q4uhg7mJ5W+w/eipLLtCp2si/yg+U39hxr8AGZiHSS03I/ZTKg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:06:42 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"/JPbS7UGSKlnhwfvKhuZHh5BQmRIpmvqvfT1q4uhg7mJ5W+w/eipLLtCp2si/yg+U39hxr8AGZiHSS03I/ZTKg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:06:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 24ms (Views: 22.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:06:44 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:06:44 +0300
Started GET "/users/auth/facebook/callback?code=AQCHTARsDBHFHRB8LBXX0Ez2-4hcSCvUO1p0xFWhDQrJnVNyFHm5XwvdqvTr7Ra-RAIUhNdtLwhEAAAILRV0DEZmK71YFgjoUSjPqxKWWXlG-ZVIVXqxIpzesFb4-9THD9HqsApYHBCqa5mKPnboMVO7PcCOgYWk85bxr1B6jzHasvLolAYd3hfA6khhZbZy5uVmjlWym_gtc_Gp5W9TlQWYFtc3dgohOJIZd8AoIlc7mUi4-bWQp4gv-EsDnevb_VSmr0BseIEwmEpg2vP1PdqldnMatxR2rU0YWiAh8fE8DYnySYpmzIM8g0iZpSqvWlh_hDssGQe5mJtCyT09GWvL&state=e0a76b1fafefe9bff23f44dca0770e1f858b3d186e8b0bd9" for ::1 at 2016-07-10 20:06:44 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCHTARsDBHFHRB8LBXX0Ez2-4hcSCvUO1p0xFWhDQrJnVNyFHm5XwvdqvTr7Ra-RAIUhNdtLwhEAAAILRV0DEZmK71YFgjoUSjPqxKWWXlG-ZVIVXqxIpzesFb4-9THD9HqsApYHBCqa5mKPnboMVO7PcCOgYWk85bxr1B6jzHasvLolAYd3hfA6khhZbZy5uVmjlWym_gtc_Gp5W9TlQWYFtc3dgohOJIZd8AoIlc7mUi4-bWQp4gv-EsDnevb_VSmr0BseIEwmEpg2vP1PdqldnMatxR2rU0YWiAh8fE8DYnySYpmzIM8g0iZpSqvWlh_hDssGQe5mJtCyT09GWvL", "state"=>"e0a76b1fafefe9bff23f44dca0770e1f858b3d186e8b0bd9"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:06:45 UTC], ["last_sign_in_at", 2016-07-10 17:00:42 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 17:06:45 UTC], ["id", 47]]
  [1m[35m (107.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 112ms (ActiveRecord: 108.3ms)


Started GET "/" for ::1 at 2016-07-10 20:06:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 44ms (Views: 41.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:06:47 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"CL3WBNM5SXEUEjNb6EZboRIrY4uI4kltgwcUMOemogu3hcPP6gPEImZGzb2ORhJY5EegjQM1bKaEZ3IoaTnzCw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:06:47 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 25ms (Views: 22.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:49 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:49 +0300
Started GET "/users/auth/vkontakte/callback?code=7f6352b42a940b00ae&state=6db28b6d89c7ad939f08142789a3b34640ee0b330d614579" for ::1 at 2016-07-10 20:06:50 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7f6352b42a940b00ae", "state"=>"6db28b6d89c7ad939f08142789a3b34640ee0b330d614579"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:06:50 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:06:50 UTC], ["id", 50]]
  [1m[35m (67.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 72ms (ActiveRecord: 68.3ms)


Started GET "/" for ::1 at 2016-07-10 20:06:50 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:06:55 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ccZmJ5wQLQlHpEN9IFGoMOauoJ9GSavDmTmB+rqO2oGxyQmwuYWQxKsIm146M51H2qm7SsRsdT0oYhd6fOsrsw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:06:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.7ms)
Completed 200 OK in 32ms (Views: 30.2ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:06:59 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:07:00 +0300
Started GET "/users/auth/vkontakte/callback?code=65749b5379438153a7&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:08:07 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"65749b5379438153a7", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 123ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.0ms)
Started GET "/users/auth/vkontakte/callback?code=6d809ebc3d7e2a6a15&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:11:08 +0300
Started GET "/users/auth/vkontakte/callback?code=e4c0ebe761b6da71e6&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:11:09 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"6d809ebc3d7e2a6a15", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:11:09 UTC], ["last_sign_in_at", 2016-07-10 17:06:50 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 17:11:09 UTC], ["id", 50]]
  [1m[35m (104.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 109ms (ActiveRecord: 105.4ms)


Started GET "/users/auth/vkontakte/callback?code=e4c0ebe761b6da71e6&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:11:09 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e4c0ebe761b6da71e6", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:11:09 UTC], ["last_sign_in_at", 2016-07-10 17:11:09 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 17:11:09 UTC], ["id", 50]]
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"e4c0ebe761b6da71e6", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
Redirected to http://localhost:3000/users/sign_in
  [1m[35m (158.2ms)[0m  [1m[36mcommit transaction[0m
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Redirected to http://localhost:3000/
Started GET "/users/auth/vkontakte/callback?code=e4c0ebe761b6da71e6&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:11:10 +0300
Completed 302 Found in 164ms (ActiveRecord: 158.8ms)


Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"e4c0ebe761b6da71e6", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/auth/vkontakte/callback?code=82bdc41082b79d3751&state=0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715" for ::1 at 2016-07-10 20:11:11 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"82bdc41082b79d3751", "state"=>"0e26ee826a9e33db6c31e8482a8bb9022d76086d5b291715"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:11:11 UTC], ["last_sign_in_at", 2016-07-10 17:11:09 UTC], ["sign_in_count", 5], ["updated_at", 2016-07-10 17:11:11 UTC], ["id", 50]]
  [1m[35m (93.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 98ms (ActiveRecord: 94.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:11:15 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:11:15 +0300
Started GET "/users/auth/vkontakte/callback?code=de2bbbf7d0de6732a5&state=73c3d9a962a1e2d4fa9cb077b0e3c27abb7cefe81fb06e36" for ::1 at 2016-07-10 20:11:15 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"de2bbbf7d0de6732a5", "state"=>"73c3d9a962a1e2d4fa9cb077b0e3c27abb7cefe81fb06e36"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:11:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:11:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.7ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:11:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 24.4ms | ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 20:11:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 30.0ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:11:36 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"G2zFS4tHngP/FJnVchts31JtEHrabla5bS/RpFRccemE+SMz3yYdn5HB3nHInWEmbhRC+hdfgyQsr6z6iWWhUw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:11:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 24ms (Views: 22.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:11:38 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:11:38 +0300
Started GET "/users/auth/vkontakte/callback?code=86993102282d24b7b8&state=db2c8d9b4165ed3e4107f3c031d42fd00b3028b94dc8015c" for ::1 at 2016-07-10 20:11:38 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"86993102282d24b7b8", "state"=>"db2c8d9b4165ed3e4107f3c031d42fd00b3028b94dc8015c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (12.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:11:39 UTC], ["last_sign_in_at", 2016-07-10 17:11:11 UTC], ["sign_in_count", 6], ["updated_at", 2016-07-10 17:11:39 UTC], ["id", 50]]
  [1m[35m (59.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 76ms (ActiveRecord: 71.9ms)


Started GET "/" for ::1 at 2016-07-10 20:11:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 26.1ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:13:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"im3hPumAWMiLGLnWCUU7o4CUA4cUZb3tGm2WsSshZK20aX5bCkJbun7h/InF3jzPX8gx0ND/4C8mHsFnxsR02g=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 20:13:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:13:34 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:13:34 +0300
Started GET "/users/auth/facebook/callback?code=AQD15t45hjRAL2zqp5QYDyCVGSw7kwCr7dPXRs3-htDSiCVZB2q-IB-ZoXuDcg6Zco_cJZApj4f2jzccJo-EQ6I1jZ6cOEOAhZ-B-TQUwohXtL0qEOSyaOhxeT5LX-ZjmWqJNk3RkRQxlKZSCouDld9XMmURTllOlxa-0GAOPjpRIkaaggYvQF1o8cmKcpSsPNW-02B6mAEzv7u40aTX2GKxaKD_ZDfWQENwzNqBg8R9fvdm5fGrlEKbeZSkFo53ysNMjAHaZbVo-_UORXz8eBijv2L0mfELK7gq-TvMJbWPf7PX3eZiwQyp55oSIO1nyioaN8mY9Dh7LeRcTdQbaS9w&state=a19c3dbf2819ab2f482edbcdadac6db4c5c4142496a14640" for ::1 at 2016-07-10 20:13:35 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQD15t45hjRAL2zqp5QYDyCVGSw7kwCr7dPXRs3-htDSiCVZB2q-IB-ZoXuDcg6Zco_cJZApj4f2jzccJo-EQ6I1jZ6cOEOAhZ-B-TQUwohXtL0qEOSyaOhxeT5LX-ZjmWqJNk3RkRQxlKZSCouDld9XMmURTllOlxa-0GAOPjpRIkaaggYvQF1o8cmKcpSsPNW-02B6mAEzv7u40aTX2GKxaKD_ZDfWQENwzNqBg8R9fvdm5fGrlEKbeZSkFo53ysNMjAHaZbVo-_UORXz8eBijv2L0mfELK7gq-TvMJbWPf7PX3eZiwQyp55oSIO1nyioaN8mY9Dh7LeRcTdQbaS9w", "state"=>"a19c3dbf2819ab2f482edbcdadac6db4c5c4142496a14640"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:13:36 UTC], ["last_sign_in_at", 2016-07-10 17:06:45 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 17:13:36 UTC], ["id", 47]]
  [1m[35m (111.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 115ms (ActiveRecord: 111.9ms)


Started GET "/" for ::1 at 2016-07-10 20:13:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.9ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:13:49 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"pmYMcsovcQYX94hSpgFugwal7n0NNLam/yE0iHR9mNPs055R4BVyPBSutjzrgKOurSCv9ldpv/YO5ZIYUSstyQ=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 20:13:50 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.7ms)
Completed 200 OK in 28ms (Views: 27.3ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:13:51 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:13:51 +0300
Started GET "/users/auth/facebook/callback?code=AQCQDr2IBCKJD6HYj8EDQR1uO6NVJKJzMZATvY7f8SDTyBO_F_v5P83EanfmG0pYUyD-3khz734FrkXvUzJbYYR4tJV6r_IGHL5TPke9hnEbKRnk56-q0nCczA8Nr_P2Sx6UYmM6loliBBu-yL_F_khEXm0Ujl0pPtFrnf4gUugbogvPHw5xks4PiACKXj9rApuZlikXR_RFpnPeeaT9i2IU0fwgiZNuj-dyT7_rhaBQedGbCcELnbRwouNDc7d4x0Ze8z2-Ch1UmtJ8lNsv5U3cjEUls9YaXdolJcg2c7eJ3YSc61I5gDDR_qkHOJUffkCy08N5ngOzfjX3juCUhuqe&state=f37bc600de1a0ece6b2041e34ad1c28c6e73141159490c94" for ::1 at 2016-07-10 20:14:19 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCQDr2IBCKJD6HYj8EDQR1uO6NVJKJzMZATvY7f8SDTyBO_F_v5P83EanfmG0pYUyD-3khz734FrkXvUzJbYYR4tJV6r_IGHL5TPke9hnEbKRnk56-q0nCczA8Nr_P2Sx6UYmM6loliBBu-yL_F_khEXm0Ujl0pPtFrnf4gUugbogvPHw5xks4PiACKXj9rApuZlikXR_RFpnPeeaT9i2IU0fwgiZNuj-dyT7_rhaBQedGbCcELnbRwouNDc7d4x0Ze8z2-Ch1UmtJ8lNsv5U3cjEUls9YaXdolJcg2c7eJ3YSc61I5gDDR_qkHOJUffkCy08N5ngOzfjX3juCUhuqe", "state"=>"f37bc600de1a0ece6b2041e34ad1c28c6e73141159490c94"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:14:19 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:14:19 UTC], ["id", 46]]
  [1m[35m (112.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 116ms (ActiveRecord: 112.8ms)


Started GET "/" for ::1 at 2016-07-10 20:14:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.2ms | ActiveRecord: 0.6ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:14:24 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"rzDXh0MtmQtJX20nPB4CI1L98iR/7+wnOPIn89EMrrulV+9inGGTRWuNj44gdJdggMsRXOJuUUO+3NQVHtau0A=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:14:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:14:25 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:14:25 +0300
Started GET "/users/auth/facebook/callback?code=AQBfuFqDfUUSHIBEfzE6LJ6hupwpjlWrWbeN9lnMAcFCRxADhAocn4_EbdjHTVknBovDyaNW8AqXoHcvc8OdaG10HXuoj15Rq2xJK5RlB9jaPOM_wxs_d4SUloWuqNg_z20vgM97EdjyHH0RSnJikXYOqJRuvP7z0vgcjmVRqDdRvrhnl_67j_chgiMu3tNH2lJPoxcwCruNl7hI5t7e2y9nzgcSTBELNwcjjSK2xAnbuJKgtJlLa9kjrgyVzNrMi1RgocTICCmfcFDpb7xVLEMPXbgP0O9JsjvEbP4RAX5OH1oRjxf3d14Ml211rGyIXg9dsTXKpFrSyc-U6RJTBBoD&state=e3f43b1a41159dee908b560b7b72aab73a3714584067a428" for ::1 at 2016-07-10 20:14:25 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBfuFqDfUUSHIBEfzE6LJ6hupwpjlWrWbeN9lnMAcFCRxADhAocn4_EbdjHTVknBovDyaNW8AqXoHcvc8OdaG10HXuoj15Rq2xJK5RlB9jaPOM_wxs_d4SUloWuqNg_z20vgM97EdjyHH0RSnJikXYOqJRuvP7z0vgcjmVRqDdRvrhnl_67j_chgiMu3tNH2lJPoxcwCruNl7hI5t7e2y9nzgcSTBELNwcjjSK2xAnbuJKgtJlLa9kjrgyVzNrMi1RgocTICCmfcFDpb7xVLEMPXbgP0O9JsjvEbP4RAX5OH1oRjxf3d14Ml211rGyIXg9dsTXKpFrSyc-U6RJTBBoD", "state"=>"e3f43b1a41159dee908b560b7b72aab73a3714584067a428"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:14:26 UTC], ["last_sign_in_at", 2016-07-10 17:14:19 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 17:14:26 UTC], ["id", 46]]
  [1m[35m (113.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 118ms (ActiveRecord: 114.2ms)


Started GET "/" for ::1 at 2016-07-10 20:14:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 42ms (Views: 40.9ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:14:29 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"DT6QJw67MCeSGCoRehttKK7eWBaj46kJa1U+RwcNLeVVYaxfoHZcKTsEybrsdjhqq8qnZ7tpEmrJcUlazYMJmQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:14:29 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
Completed 200 OK in 25ms (Views: 23.9ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:14:32 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:14:33 +0300
Started GET "/users/auth/vkontakte/callback?code=9c4c2b0c794baf0de6&state=3b18d57391ce4754e9f4aefd942d4a4f56f50c6dd8209d43" for ::1 at 2016-07-10 20:14:33 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"9c4c2b0c794baf0de6", "state"=>"3b18d57391ce4754e9f4aefd942d4a4f56f50c6dd8209d43"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:14:33 UTC], ["last_sign_in_at", 2016-07-10 17:11:39 UTC], ["sign_in_count", 7], ["updated_at", 2016-07-10 17:14:33 UTC], ["id", 50]]
  [1m[35m (69.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 75ms (ActiveRecord: 70.4ms)


Started GET "/" for ::1 at 2016-07-10 20:14:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:14:39 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"f3pHzowokQ39GbpU5At248gY8qsBenBTI2LmfFvJExg9hYyPjgnzSmBKjluri2zrnn8RNCo5etPSplMgI+nPUg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:14:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.1ms)
Completed 200 OK in 27ms (Views: 25.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:14:40 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:14:40 +0300
Started GET "/users/auth/vkontakte/callback?code=47a13cad2841844c94&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:14:55 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"47a13cad2841844c94", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 134ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.2ms)
Started GET "/users/auth/vkontakte/callback?code=55232aacc7ab58a523&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:16:08 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"55232aacc7ab58a523", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.2ms)
Started GET "/users/auth/vkontakte/callback?code=b3727987b31f60940d&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:16:09 +0300
Started GET "/users/auth/vkontakte/callback?code=d5246e86ff4e2f0abf&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:16:10 +0300
Started GET "/users/auth/vkontakte/callback?code=d5246e86ff4e2f0abf&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:16:10 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"b3727987b31f60940d", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (21.5ms)
Started GET "/users/auth/vkontakte/callback?code=d5246e86ff4e2f0abf&state=4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2" for ::1 at 2016-07-10 20:16:10 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"d5246e86ff4e2f0abf", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"d5246e86ff4e2f0abf", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 127ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.9ms)
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"d5246e86ff4e2f0abf", "state"=>"4eaf6c87aaea1b556bea7be80182c7df5ce6d1402d3399d2"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-07-10 20:16:14 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (16.7ms)
Completed 200 OK in 40ms (Views: 38.4ms | ActiveRecord: 0.5ms)


Started DELETE "/users/50" for ::1 at 2016-07-10 20:16:16 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"c+4dEyVNxBUWC7A7RmLIR++5psREzYtrY7rwmg+YxTBMtgyZ6J3Fa3uA+xZ4cE2N5ZwuoDge+LCBGiDoudEpnQ==", "id"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 50]]
  [1m[35m (163.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 166ms (ActiveRecord: 163.9ms)


Started GET "/users" for ::1 at 2016-07-10 20:16:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
Completed 200 OK in 37ms (Views: 36.2ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:16:18 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:16:18 +0300
Started GET "/users/auth/vkontakte/callback?code=44517af4dec2a7096f&state=2c19af7a9811ef4f6589a87038e82928d8cadb64bcf72967" for ::1 at 2016-07-10 20:16:18 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"44517af4dec2a7096f", "state"=>"2c19af7a9811ef4f6589a87038e82928d8cadb64bcf72967"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Юрий Струков"], ["nickname", "yura_str"], ["provider", "vkontakte"], ["url", "http://vk.com/yura_str"], ["created_at", 2016-07-10 17:16:19 UTC], ["updated_at", 2016-07-10 17:16:19 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$gd0vu.glC/q7AxO6yrsO0eLYiU4amDBtiLnapexGTMLAmxrimJo3O"]]
  [1m[35m (110.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:16:19 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:16:19 UTC], ["last_sign_in_at", 2016-07-10 17:16:19 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 51]]
  [1m[35m (63.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 303ms (ActiveRecord: 174.6ms)


Started GET "/" for ::1 at 2016-07-10 20:16:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 51], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 29.3ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:16:37 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Rv6TY+eeQuOLViNviEdhxLiHEQWYYu5otYVWRsMZlXmOtOV/F/sftBx8MWNs97ziOQjmZivYN3skfrctxmQgzg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:16:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
Completed 200 OK in 24ms (Views: 23.2ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:16:39 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:16:39 +0300
Started GET "/users/auth/vkontakte/callback?code=7f148add152cfc1880&state=8562b2c0c3ed3a70fb0fbcd7ded7fcc306f3895b21ef15e9" for ::1 at 2016-07-10 20:16:45 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7f148add152cfc1880", "state"=>"8562b2c0c3ed3a70fb0fbcd7ded7fcc306f3895b21ef15e9"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."nickname" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["nickname", "tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.7ms)
Started GET "/" for ::1 at 2016-07-10 20:17:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.8ms)
Completed 200 OK in 37ms (Views: 34.8ms | ActiveRecord: 0.9ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:17:21 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:17:21 +0300
Started GET "/users/auth/vkontakte/callback?code=aa71b6137d572171b6&state=c1668188ca86d4f8c22c1f453c3d59e036c5ef40a33496d6" for ::1 at 2016-07-10 20:17:22 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"aa71b6137d572171b6", "state"=>"c1668188ca86d4f8c22c1f453c3d59e036c5ef40a33496d6"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 125ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.9ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.7ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:18:27 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:18:27 +0300
Started GET "/users/auth/facebook/callback?code=AQANV7Ks5XHCPuQqOZeCjTMLEonTXzy859z15YT30i6sRNi5QNkTR9Qyy5FCu95RR728gcE9rLt-NKqDktkbTxBsc9qpQqthP28SjuRD5oUjInyioNfVKOoc0-2cov16StVP2-V1nR6VE4UBm0N_IM4IJ7O61TX8Xns6cK8VFCUwON9srXcmC10T7u9uRM8EDDIeOqZnFjDnHfuNbld6Fev67FpMbnJ5MMqmyiLv2GrypUzNfDBVH3RAR8KC-dlU8bjRi8GugiwMYPRqpkRWr6XNXmUTWKCEk12OIS2852g3pJdCZPfgPwjXQB2WZTpDrQ1Ktkc4cFT905JwC0pgynXQ&state=68491fc51b20f0093549db6d07c38406228868b11f55f7f3" for ::1 at 2016-07-10 20:18:27 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQANV7Ks5XHCPuQqOZeCjTMLEonTXzy859z15YT30i6sRNi5QNkTR9Qyy5FCu95RR728gcE9rLt-NKqDktkbTxBsc9qpQqthP28SjuRD5oUjInyioNfVKOoc0-2cov16StVP2-V1nR6VE4UBm0N_IM4IJ7O61TX8Xns6cK8VFCUwON9srXcmC10T7u9uRM8EDDIeOqZnFjDnHfuNbld6Fev67FpMbnJ5MMqmyiLv2GrypUzNfDBVH3RAR8KC-dlU8bjRi8GugiwMYPRqpkRWr6XNXmUTWKCEk12OIS2852g3pJdCZPfgPwjXQB2WZTpDrQ1Ktkc4cFT905JwC0pgynXQ", "state"=>"68491fc51b20f0093549db6d07c38406228868b11f55f7f3"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:18:28 UTC], ["last_sign_in_at", 2016-07-10 17:14:26 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 17:18:28 UTC], ["id", 46]]
  [1m[35m (99.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 115ms (ActiveRecord: 100.2ms)


Started GET "/" for ::1 at 2016-07-10 20:18:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:18:32 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"M4NZrUVenadg7rm4BoZzJLWlSbzwIdxadTO8HnNKFfJ+Hpgex4QmN1GjPEsegKnv/+BtAvnr2FOmHBz++Uc5vA=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 20:18:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:34 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:34 +0300
Started GET "/users/auth/vkontakte/callback?code=bc8954df3c573a53a0&state=4f6b43747dc30661c8091adf7652155a007e4c774fd63f9b" for ::1 at 2016-07-10 20:18:34 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"bc8954df3c573a53a0", "state"=>"4f6b43747dc30661c8091adf7652155a007e4c774fd63f9b"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 127ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (29.6ms)
Started DELETE "/users/51" for ::1 at 2016-07-10 20:18:39 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"46P4OiqYfds9i0BOQOiUkRUgjSVDtBFjKuN53te1Bpbok9AQ4BVznaz4LSzNLkMesvqHfDg8yM/VTkXKzxeQfA==", "id"=>"51"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 51]]
  [1m[35m (141.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 146ms (ActiveRecord: 143.1ms)


Started GET "/users" for ::1 at 2016-07-10 20:18:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:40 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:41 +0300
Started GET "/users/auth/vkontakte/callback?code=94eaae39033fa58228&state=78970a121a0772f1de3bd163567fc5387378e086974d95e2" for ::1 at 2016-07-10 20:18:41 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"94eaae39033fa58228", "state"=>"78970a121a0772f1de3bd163567fc5387378e086974d95e2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "nickname", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["nickname", "tell_me_the_truth_mother_fucker"], ["provider", "vkontakte"], ["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["created_at", 2016-07-10 17:18:42 UTC], ["updated_at", 2016-07-10 17:18:42 UTC], ["email", "access_token.extra.raw_info.domain+@vk.com"], ["encrypted_password", "$2a$11$GrGR5zttBoZ0/x9DPPnNpe7K2887PC8R4PQrYGQNa0aWTBSTwSuhS"]]
  [1m[35m (62.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:18:42 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:18:42 UTC], ["last_sign_in_at", 2016-07-10 17:18:42 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 52]]
  [1m[35m (64.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 259ms (ActiveRecord: 128.5ms)


Started GET "/" for ::1 at 2016-07-10 20:18:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.1ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:18:45 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"9jmKvO4D/C7oXAlpqbPO7I1TM+oLy75vKaSn/pN3+SjE7IKK7oR9LFBJWdp6blOWOncDWr32pY/ayyhRCgAkkg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:18:45 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.0ms)
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:45 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:46 +0300
Started GET "/users/auth/vkontakte/callback?code=57ccfb199599ab42e3&state=c59b06c5031ecf17b9c766559a2f86e90f6758d3a36291b7" for ::1 at 2016-07-10 20:18:46 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"57ccfb199599ab42e3", "state"=>"c59b06c5031ecf17b9c766559a2f86e90f6758d3a36291b7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:18:47 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:18:47 UTC], ["id", 52]]
  [1m[35m (98.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 103ms (ActiveRecord: 99.1ms)


Started GET "/" for ::1 at 2016-07-10 20:18:47 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:18:48 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"PttL+LiYbsrUr7OyXVq1Yp+9agRYfUstaaXcDTSFG8ijdxNjjgd4Hcrlse/iXo+6+rB3QtC3rQ1Rbqv5EcCHbg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:18:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.6ms)
Completed 200 OK in 27ms (Views: 25.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:59 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:18:59 +0300
Started GET "/users/auth/vkontakte/callback?code=684a76a912dabfe319&state=77d65d31893973728a4077fa2205d8ea4147806c513e96c1" for ::1 at 2016-07-10 20:19:03 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"684a76a912dabfe319", "state"=>"77d65d31893973728a4077fa2205d8ea4147806c513e96c1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 124ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.6ms)
Started GET "/" for ::1 at 2016-07-10 20:26:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (19.6ms)
Completed 200 OK in 42ms (Views: 39.6ms | ActiveRecord: 0.8ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:26:40 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:26:40 +0300
Started GET "/users/auth/vkontakte/callback?code=b5c974a5e0c118c2ef&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:26:44 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"b5c974a5e0c118c2ef", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:26:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (19.2ms)
Started GET "/users/auth/vkontakte/callback?code=0645376e4f5e44e027&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:34:05 +0300
Started GET "/users/auth/vkontakte/callback?code=0645376e4f5e44e027&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:34:05 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"0645376e4f5e44e027", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:34:05 UTC], ["last_sign_in_at", 2016-07-10 17:18:47 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 17:34:05 UTC], ["id", 52]]
  [1m[35m (107.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 127ms (ActiveRecord: 108.4ms)


Started GET "/users/auth/vkontakte/callback?code=0645376e4f5e44e027&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:34:06 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"0645376e4f5e44e027", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
  Parameters: {"code"=>"0645376e4f5e44e027", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
Redirected to http://localhost:3000/users/sign_in
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/auth/vkontakte/callback?code=cabf334d31f3e0fd8e&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:34:06 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"cabf334d31f3e0fd8e", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:34:07 UTC], ["last_sign_in_at", 2016-07-10 17:34:05 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 17:34:07 UTC], ["id", 52]]
  [1m[35m (62.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 77ms (ActiveRecord: 64.4ms)


Started GET "/users/auth/vkontakte/callback?code=7f50398fe864a2aff4&state=95ec74d632e318c827d3b5ddaa143646c6b766499397a281" for ::1 at 2016-07-10 20:34:07 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7f50398fe864a2aff4", "state"=>"95ec74d632e318c827d3b5ddaa143646c6b766499397a281"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:34:08 UTC], ["last_sign_in_at", 2016-07-10 17:34:07 UTC], ["sign_in_count", 5], ["updated_at", 2016-07-10 17:34:08 UTC], ["id", 52]]
  [1m[35m (155.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 159ms (ActiveRecord: 156.2ms)


Started GET "/" for ::1 at 2016-07-10 20:34:10 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 29.2ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:34:19 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"fNTMyE/2H6ACkHIPDePokTHmOBCFEuo5bAN6TMb9pRwxKkYiwwPFR0KnVKAmkxM0oWA6G0B0Y5b/g6NXwkO5kg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:34:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.1ms)
Completed 200 OK in 31ms (Views: 30.2ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:34:21 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:34:22 +0300
Started GET "/users/auth/vkontakte/callback?code=df0fdf959efa0f26b7&state=4bf8aa38771dd18e1a9539ec2b75e21ccaeffca4623c7724" for ::1 at 2016-07-10 20:34:22 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"df0fdf959efa0f26b7", "state"=>"4bf8aa38771dd18e1a9539ec2b75e21ccaeffca4623c7724"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:34:22 UTC], ["last_sign_in_at", 2016-07-10 17:34:08 UTC], ["sign_in_count", 6], ["updated_at", 2016-07-10 17:34:22 UTC], ["id", 52]]
  [1m[35m (102.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 107ms (ActiveRecord: 103.0ms)


Started GET "/" for ::1 at 2016-07-10 20:34:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.9ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 20:35:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (16.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 38.5ms | ActiveRecord: 1.0ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:35:48 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"OkEuWmnktQ6RD+xZ8LzLA8hItL+ILfUOCTvhYYTXK8XxVtI6eYM8gBrs3CxgfGkW60F3lbSqVwMgZbt/STRePQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:35:48 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.9ms)
Completed 200 OK in 30ms (Views: 28.9ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:38:46 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:38:46 +0300
Started GET "/users/auth/vkontakte/callback?code=15b65f99e4089f0a6a&state=fe2a8a3d54c318006ff288ff89cd62e71304ecdb6f435900" for ::1 at 2016-07-10 20:38:47 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"15b65f99e4089f0a6a", "state"=>"fe2a8a3d54c318006ff288ff89cd62e71304ecdb6f435900"}
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."url" = ? LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `persisted?' for true:TrueClass):
  
app/controllers/users/omniauth_callbacks_controller.rb:15:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (21.0ms)
Started GET "/users/auth/vkontakte/callback?code=15b65f99e4089f0a6a&state=fe2a8a3d54c318006ff288ff89cd62e71304ecdb6f435900" for ::1 at 2016-07-10 20:39:12 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"15b65f99e4089f0a6a", "state"=>"fe2a8a3d54c318006ff288ff89cd62e71304ecdb6f435900"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 20:39:13 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 37ms (Views: 26.4ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2016-07-10 20:39:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.4ms)
Completed 200 OK in 31ms (Views: 29.9ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:42:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.7ms)
Completed 200 OK in 37ms (Views: 35.6ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:42:42 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:42:43 +0300
Started GET "/users/auth/facebook/callback?code=AQCQ8fmCA4mmBYsV1Ux1tLzZKOjBx3FvLelDbn2JgQfd6InUDEweiZe3TdCXKei9kMfIgmofRdYNROegRvfgkVKgbKb0KCFp-aIl6oHfk7MJ_Ot_Qf446r4-sle5tralzx_G1e-fs3hnZU4JVU7X65bAuSiEyzGB3fsd7jwNLdwyNHM5j-modyinKfRBjgAJ4WhwtKxrYkjrwSNyiqCOAZnGRSMhz_wbDzohD7tNoDzyZZKo6BRfPTqPgGtoCb8mvi4dpdHsCEE-b3OBecN1nl0eVGwJmxuxfktzHXTRdsptU0RK3U6bd8BMW81a15oDttPFq_DeqAY5rno2hu_A0cwn&state=2ed094aab43944a8ede7465d9693c32deca59a1787a7e2d9" for ::1 at 2016-07-10 20:42:43 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCQ8fmCA4mmBYsV1Ux1tLzZKOjBx3FvLelDbn2JgQfd6InUDEweiZe3TdCXKei9kMfIgmofRdYNROegRvfgkVKgbKb0KCFp-aIl6oHfk7MJ_Ot_Qf446r4-sle5tralzx_G1e-fs3hnZU4JVU7X65bAuSiEyzGB3fsd7jwNLdwyNHM5j-modyinKfRBjgAJ4WhwtKxrYkjrwSNyiqCOAZnGRSMhz_wbDzohD7tNoDzyZZKo6BRfPTqPgGtoCb8mvi4dpdHsCEE-b3OBecN1nl0eVGwJmxuxfktzHXTRdsptU0RK3U6bd8BMW81a15oDttPFq_DeqAY5rno2hu_A0cwn", "state"=>"2ed094aab43944a8ede7465d9693c32deca59a1787a7e2d9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:42:44 UTC], ["last_sign_in_at", 2016-07-10 17:18:28 UTC], ["sign_in_count", 5], ["updated_at", 2016-07-10 17:42:44 UTC], ["id", 46]]
  [1m[35m (101.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 106ms (ActiveRecord: 101.6ms)


Started GET "/" for ::1 at 2016-07-10 20:42:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.2ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:42:53 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"DP3wkjItDD2llloHHy5q/77+ZLlfPxDjUNzNixrAnOLfTKTFfoKw3QyK2hoTZuu0+acTuujLtpiqsnrYUIq+fA=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 13ms (ActiveRecord: 1.0ms)


Started GET "/" for ::1 at 2016-07-10 20:42:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
Completed 200 OK in 36ms (Views: 35.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:42:55 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:42:56 +0300
Started GET "/users/auth/vkontakte/callback?code=685742e4efb7887b19&state=a1f19e2c0ee7bd1a66fc74fd08275e3a08e70573b5d5977b" for ::1 at 2016-07-10 20:42:57 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"685742e4efb7887b19", "state"=>"a1f19e2c0ee7bd1a66fc74fd08275e3a08e70573b5d5977b"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 124ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.4ms)
Started GET "/" for ::1 at 2016-07-10 20:44:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.1ms)
Completed 200 OK in 35ms (Views: 33.3ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:44:27 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:44:27 +0300
Started GET "/users/auth/vkontakte/callback?code=5d94a88585d51bd8a7&state=aa14bc32e593d6b4c8dbef9e681f13bbf8cb7ddaf953682c" for ::1 at 2016-07-10 20:44:27 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"5d94a88585d51bd8a7", "state"=>"aa14bc32e593d6b4c8dbef9e681f13bbf8cb7ddaf953682c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)


  
NoMethodError (undefined method `persisted?' for nil:NilClass):
  
app/controllers/users/omniauth_callbacks_controller.rb:15:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.8ms)
Started GET "/" for ::1 at 2016-07-10 20:46:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.6ms)
Completed 200 OK in 32ms (Views: 30.4ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:46:44 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:46:44 +0300
Started GET "/users/auth/vkontakte/callback?code=5d7ec01179acec607d&state=15ed1d7cfcc9b599003a75b52c3ff9f32b89e3424ae187b1" for ::1 at 2016-07-10 20:46:44 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"5d7ec01179acec607d", "state"=>"15ed1d7cfcc9b599003a75b52c3ff9f32b89e3424ae187b1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (17.0ms)
Started GET "/users/auth/vkontakte/callback?code=5d7ec01179acec607d&state=15ed1d7cfcc9b599003a75b52c3ff9f32b89e3424ae187b1" for ::1 at 2016-07-10 20:47:08 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"5d7ec01179acec607d", "state"=>"15ed1d7cfcc9b599003a75b52c3ff9f32b89e3424ae187b1"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 20:47:09 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 34ms (Views: 22.5ms | ActiveRecord: 0.5ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:47:11 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:47:11 +0300
Started GET "/users/auth/vkontakte/callback?code=6e71488f6600beafec&state=dd279dc1cc805ca88ae8de2a4b59def7099ca87e69761d30" for ::1 at 2016-07-10 20:47:11 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"6e71488f6600beafec", "state"=>"dd279dc1cc805ca88ae8de2a4b59def7099ca87e69761d30"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "access_token.extra.raw_info.domain+@vk.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.2ms)
Started GET "/users/auth/vkontakte/callback?code=6e71488f6600beafec&state=dd279dc1cc805ca88ae8de2a4b59def7099ca87e69761d30" for ::1 at 2016-07-10 20:47:38 +0300
Started GET "/" for ::1 at 2016-07-10 20:47:54 +0300
  
Faraday::ConnectionFailed (execution expired):
  
/usr/lib/ruby/2.3.0/net/http.rb:880:in `initialize'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `open'
/usr/lib/ruby/2.3.0/net/http.rb:880:in `block in connect'
/usr/lib/ruby/2.3.0/timeout.rb:101:in `timeout'
/usr/lib/ruby/2.3.0/net/http.rb:878:in `connect'
/usr/lib/ruby/2.3.0/net/http.rb:863:in `do_start'
/usr/lib/ruby/2.3.0/net/http.rb:852:in `start'
/usr/lib/ruby/2.3.0/net/http.rb:1398:in `request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:82:in `perform_request'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:40:in `block in call'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'
faraday (0.9.2) lib/faraday/adapter/net_http.rb:32:in `call'
faraday (0.9.2) lib/faraday/request/url_encoded.rb:15:in `call'
faraday (0.9.2) lib/faraday/rack_builder.rb:139:in `build_response'
faraday (0.9.2) lib/faraday/connection.rb:377:in `run_request'
oauth2 (1.2.0) lib/oauth2/client.rb:93:in `request'
oauth2 (1.2.0) lib/oauth2/client.rb:138:in `get_token'
oauth2 (1.2.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
omniauth-oauth2 (1.4.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
omniauth-vkontakte (1.3.7) lib/omniauth/strategies/vkontakte.rb:141:in `callback_phase'
omniauth (1.3.1) lib/omniauth/strategy.rb:227:in `callback_call'
omniauth (1.3.1) lib/omniauth/strategy.rb:184:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
omniauth (1.3.1) lib/omniauth/strategy.rb:186:in `call!'
omniauth (1.3.1) lib/omniauth/strategy.rb:164:in `call'
warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
warden (1.2.6) lib/warden/manager.rb:34:in `catch'
warden (1.2.6) lib/warden/manager.rb:34:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.0) lib/active_record/migration.rb:552:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0) lib/rails/engine.rb:522:in `call'
puma (3.4.0) lib/puma/configuration.rb:224:in `call'
puma (3.4.0) lib/puma/server.rb:569:in `handle_request'
puma (3.4.0) lib/puma/server.rb:406:in `process_client'
puma (3.4.0) lib/puma/server.rb:271:in `block in run'
puma (3.4.0) lib/puma/thread_pool.rb:114:in `block in spawn_thread'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.0ms)
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.7ms)
Started GET "/" for ::1 at 2016-07-10 20:48:39 +0300
Processing by UsersController#index as HTML
Started GET "/" for ::1 at 2016-07-10 20:48:39 +0300
Started GET "/" for ::1 at 2016-07-10 20:48:39 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendering users/index.html.haml within layouts/application
  Rendering users/index.html.haml within layouts/application
Completed 200 OK in 52ms (Views: 50.0ms | ActiveRecord: 0.7ms)


  Rendered users/index.html.haml within layouts/application (10.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (15.1ms)
  Rendered users/index.html.haml within layouts/application (15.8ms)
Completed 200 OK in 64ms (Views: 59.1ms | ActiveRecord: 0.2ms)


Completed 200 OK in 80ms (Views: 76.9ms | ActiveRecord: 0.3ms)


Completed 200 OK in 64ms (Views: 62.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:48:42 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:48:42 +0300
Started GET "/users/auth/vkontakte/callback?code=e6fd881397a728508b&state=492432f39340b0de5dfaa1167456fc123eb5e3b3878992ad" for ::1 at 2016-07-10 20:48:42 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"e6fd881397a728508b", "state"=>"492432f39340b0de5dfaa1167456fc123eb5e3b3878992ad"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 124ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.6ms)
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:49:23 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:49:24 +0300
Started GET "/users/auth/vkontakte/callback?code=18e09bd0df4e3c4e5c&state=6b21b521fd3c182814a0e86f005cf1d8e60133911d8ce793" for ::1 at 2016-07-10 20:49:24 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"18e09bd0df4e3c4e5c", "state"=>"6b21b521fd3c182814a0e86f005cf1d8e60133911d8ce793"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 133ms (ActiveRecord: 0.7ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (29.8ms)
Started GET "/" for ::1 at 2016-07-10 20:49:50 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.8ms)
Completed 200 OK in 33ms (Views: 31.3ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:49:51 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:49:51 +0300
Started GET "/users/auth/vkontakte/callback?code=7edd8eb1e82e46420f&state=9999e2e408f42c80a0a0c5bdc4318775574771a5b43de939" for ::1 at 2016-07-10 20:49:52 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"7edd8eb1e82e46420f", "state"=>"9999e2e408f42c80a0a0c5bdc4318775574771a5b43de939"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."provider" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["provider", "t"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 123ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Email can't be blank):
  
app/models/user.rb:25:in `find_for_vkontakte_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:14:in `vkontakte'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.4ms)
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:50:00 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:50:00 +0300
Started GET "/users/auth/facebook/callback?code=AQBcn1YYWNQYvxqWgis96UGQcJ0bfdR3trlLlz3gYtdVcu8aDODSpcPLq6aEO5PyfhvFtclUn3preQqJHVWohjecybsZiHY17i6N93zd_GUh_yeT1pRGovmKOoN8LNejsFYD59NuBjdE2UQ3UOjJ4nrWWB3Nj2i510L9dTfYRY-U70BXfikZ77KL267RfmQD8w0BZQzOizGsSaifEU8JZ53heOgP7XVBRFw9gIAaVzSuQ-15PAwtVtjRoUf5RQd2PX0fJxtN2WirUnVdfy5A6oMd71srVjAGwU8HTeBDzKciDpEB2FY2Qu7amuwwtRi3KdqqE3DpDRm699xHDVcVFgWh&state=b0c9768c7b9cc80fcd617147619c823c53998c298879f9f9" for ::1 at 2016-07-10 20:50:00 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBcn1YYWNQYvxqWgis96UGQcJ0bfdR3trlLlz3gYtdVcu8aDODSpcPLq6aEO5PyfhvFtclUn3preQqJHVWohjecybsZiHY17i6N93zd_GUh_yeT1pRGovmKOoN8LNejsFYD59NuBjdE2UQ3UOjJ4nrWWB3Nj2i510L9dTfYRY-U70BXfikZ77KL267RfmQD8w0BZQzOizGsSaifEU8JZ53heOgP7XVBRFw9gIAaVzSuQ-15PAwtVtjRoUf5RQd2PX0fJxtN2WirUnVdfy5A6oMd71srVjAGwU8HTeBDzKciDpEB2FY2Qu7amuwwtRi3KdqqE3DpDRm699xHDVcVFgWh", "state"=>"b0c9768c7b9cc80fcd617147619c823c53998c298879f9f9"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:50:01 UTC], ["last_sign_in_at", 2016-07-10 17:42:44 UTC], ["sign_in_count", 6], ["updated_at", 2016-07-10 17:50:01 UTC], ["id", 46]]
  [1m[35m (65.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 78ms (ActiveRecord: 66.7ms)


Started GET "/" for ::1 at 2016-07-10 20:50:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 28.0ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:50:04 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"YmfmZxUG/TU5iNn2829Tinp21o3ULlJbdb7t9DsNd4xS8C7kZRv9UzQQyh5FwZWvhx8HZq7CHSBojn8MeH5WMw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:50:04 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:50:06 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:50:06 +0300
Started GET "/users/auth/facebook/callback?code=AQBTTBwPtdcWV1GxdLOquSIjNCGA6iRo4bUW_qSHYjhs2nnGlsCKA9Zwf7N7bOUsKDa0ZUUl2-I9yTRDnQXmoF7YHvqxYOmx33mvsrcYZrRWGZ1L5BvkX40yKgQo0pKFa0z5XHW1MD7bJxcomPiQ3AQ4otLP_KF0XMsEoAuoEWWw20SuqaYm8m-2GYB60BpDh2LUmJMIpQHRiCwggs5fTPNATsU_uBDofjqmRo1-T_4-1ixYEHKlk_SsHObjjaMf49ds6h8INAyuOeTOHMIkw8Ti_ikYa2EtB_mTb29KFNKTyQIwHRtdcM7kSs_1rk8yfyNyLCBBDX53ul4GIw4OkOug&state=96c0763103d1c7545ddedf330e300e91ee4c7f94d54323fd" for ::1 at 2016-07-10 20:50:07 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBTTBwPtdcWV1GxdLOquSIjNCGA6iRo4bUW_qSHYjhs2nnGlsCKA9Zwf7N7bOUsKDa0ZUUl2-I9yTRDnQXmoF7YHvqxYOmx33mvsrcYZrRWGZ1L5BvkX40yKgQo0pKFa0z5XHW1MD7bJxcomPiQ3AQ4otLP_KF0XMsEoAuoEWWw20SuqaYm8m-2GYB60BpDh2LUmJMIpQHRiCwggs5fTPNATsU_uBDofjqmRo1-T_4-1ixYEHKlk_SsHObjjaMf49ds6h8INAyuOeTOHMIkw8Ti_ikYa2EtB_mTb29KFNKTyQIwHRtdcM7kSs_1rk8yfyNyLCBBDX53ul4GIw4OkOug", "state"=>"96c0763103d1c7545ddedf330e300e91ee4c7f94d54323fd"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:50:07 UTC], ["last_sign_in_at", 2016-07-10 17:50:01 UTC], ["sign_in_count", 7], ["updated_at", 2016-07-10 17:50:07 UTC], ["id", 46]]
  [1m[35m (66.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 73ms (ActiveRecord: 67.3ms)


Started GET "/" for ::1 at 2016-07-10 20:50:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 39.0ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:50:08 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"gMxijgPkjhyQWaF8kQfMJCKB07gBgGeq7MUh/Imfq1RCHit61QNlwRvimIS99+Se/nhJywVIkCGVLlO5X9ud6w=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:50:08 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.4ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-07-10 20:51:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.6ms)
Completed 200 OK in 34ms (Views: 31.7ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:10 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:11 +0300
Started GET "/users/auth/vkontakte/callback?code=6c8bc7d7a6ef3ed1e0&state=eb4cfc7dd3e479a8c0649b14b81e2651df7b55329a3c525a" for ::1 at 2016-07-10 20:51:11 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"6c8bc7d7a6ef3ed1e0", "state"=>"eb4cfc7dd3e479a8c0649b14b81e2651df7b55329a3c525a"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/tell_me_the_truth_mother_fucker"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:51:11 UTC], ["last_sign_in_at", 2016-07-10 17:34:22 UTC], ["sign_in_count", 7], ["updated_at", 2016-07-10 17:51:11 UTC], ["id", 52]]
  [1m[35m (60.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 66ms (ActiveRecord: 61.4ms)


Started GET "/" for ::1 at 2016-07-10 20:51:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:51:24 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"9xUuoQ+RPFCAucjBrVNBSaA/dZkwBy38Y+rxBI/mnYigVThWXD9cajiKo1uJ+Yt5GjrQgIl0WMwsSUiChXy1OQ=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 20:51:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:25 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:25 +0300
Started GET "/users/auth/vkontakte/callback?code=b7d0c087189b9dcada&state=769b65b2a5da7e70f41935fef9c250bf9ad49d5bbdc64526" for ::1 at 2016-07-10 20:51:29 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"b7d0c087189b9dcada", "state"=>"769b65b2a5da7e70f41935fef9c250bf9ad49d5bbdc64526"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "http://vk.com/yura_str@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Юрий Струков"], ["provider", "vkontakte"], ["url", "http://vk.com/yura_str"], ["created_at", 2016-07-10 17:51:30 UTC], ["updated_at", 2016-07-10 17:51:30 UTC], ["email", "http://vk.com/yura_str@vk.com"], ["encrypted_password", "$2a$11$VkfWPcWZ/uBh7VhedCD0vOvuGHn16aWQg5Cf2P/ExVh84V6cwCBTe"]]
  [1m[35m (106.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:51:30 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:51:30 UTC], ["last_sign_in_at", 2016-07-10 17:51:30 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 53]]
  [1m[35m (63.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 299ms (ActiveRecord: 171.3ms)


Started GET "/" for ::1 at 2016-07-10 20:51:30 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 53], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.9ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:51:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"b9+lLp6p0jbeqRn1ikMGt/1AZYOE9mjIu74h350V+cWQkfbO7bTxxws4TsCw21v7+ykKNhC45sO0eXjm9L7eEw=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 53], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-07-10 20:51:33 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.3ms)
Completed 200 OK in 32ms (Views: 30.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:34 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 20:51:35 +0300
Started GET "/users/auth/vkontakte/callback?code=3ceb75d38fbd08c9d9&state=8e96cb7770b1b190f69716ccddbf91b1dd266a3f30cc3b61" for ::1 at 2016-07-10 20:51:36 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"3ceb75d38fbd08c9d9", "state"=>"8e96cb7770b1b190f69716ccddbf91b1dd266a3f30cc3b61"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/yura_str"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:51:37 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 17:51:37 UTC], ["id", 53]]
  [1m[35m (120.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 125ms (ActiveRecord: 121.0ms)


Started GET "/" for ::1 at 2016-07-10 20:51:37 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 53], ["LIMIT", 1]]
Completed 200 OK in 39ms (Views: 37.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:51:43 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"frpaO3IX0VRRAC1v4JXRPlD2fxkvR7jSuJQo5ALDE0V0vVc0/Mo/amiXPicAJeYAAvYf31Xi/hqpfO+lqFdKYw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 53], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:51:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.2ms)
Completed 200 OK in 27ms (Views: 26.1ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:51:45 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:51:45 +0300
Started GET "/users/auth/facebook/callback?code=AQCc47oEOU3ZJ8eyJcG13yBTfeljSABeYpChp6LQyCmwWHtWywDrvS7EcD8ERyXow5Hd9yLLehJ1Zx5thGOMQYZweh3ZUwcsocC57QBBp1pZqTCSlzWVfi6KWg2_4TyEUKgH8OfsCgksp-B4AOXp21cPe7YshC13_McY0EOOiBDa9f1alKGJboe7zY2phNERDZABq_E9me3PqSgEktLHMc2g3a8F3RoDQBxjlxbRkOLiCMfSk_Of05xryfQl_wTGAINYKeJqAZsdWYXBbdhs-GK5INz0tdfFq2jhP4oSMBOhMcPLbtL5ehSvfz0BfYvYRNHabRJBU57VpkhGvjLPkwm_&state=c9bedf0a4b8f9a5323fd6b38e27034bf80f14906d3607205" for ::1 at 2016-07-10 20:51:46 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCc47oEOU3ZJ8eyJcG13yBTfeljSABeYpChp6LQyCmwWHtWywDrvS7EcD8ERyXow5Hd9yLLehJ1Zx5thGOMQYZweh3ZUwcsocC57QBBp1pZqTCSlzWVfi6KWg2_4TyEUKgH8OfsCgksp-B4AOXp21cPe7YshC13_McY0EOOiBDa9f1alKGJboe7zY2phNERDZABq_E9me3PqSgEktLHMc2g3a8F3RoDQBxjlxbRkOLiCMfSk_Of05xryfQl_wTGAINYKeJqAZsdWYXBbdhs-GK5INz0tdfFq2jhP4oSMBOhMcPLbtL5ehSvfz0BfYvYRNHabRJBU57VpkhGvjLPkwm_", "state"=>"c9bedf0a4b8f9a5323fd6b38e27034bf80f14906d3607205"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:51:46 UTC], ["last_sign_in_at", 2016-07-10 17:50:07 UTC], ["sign_in_count", 8], ["updated_at", 2016-07-10 17:51:46 UTC], ["id", 46]]
  [1m[35m (62.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 67ms (ActiveRecord: 62.8ms)


Started GET "/" for ::1 at 2016-07-10 20:51:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:52:00 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"OyPzKyjKA9PNGtieVcN3kGEF5yhaEbmbjRUrGiFb5Yde2q15m9UmcAsRwyUJYPyELQIG1fcgnLPj2rcTjBQpNw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:52:00 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.8ms)
Completed 200 OK in 28ms (Views: 26.1ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:52:01 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:52:02 +0300
Started GET "/users/auth/facebook/callback?code=AQAftY4mJ-Qq3E31YGsRL_Mg2InPo9G2LR0-Q-4o3zR84_3O5DtSIe3edwgDEb4fYx2DvQB9HC2Q-PvmmisNou3FVeDXJdfDhdh0C-z_Q7XP_rAdoYBNCHB4gA3OKQKYWh4mcNsJl3AYm1Hhu6gmF9XM5pj5DZHRAleHuZBdGWRpfb1CSf9UJS2DRg70apB6wrNaZXGfugtj2Osbgf9JI07HltlvZb5ilA2bRgBOZK-l8PaatE3XvluYCXHGSOhB1DDV2xT_Nf4bdBlDIdoUECBaQbl0-59yarmEPa8hwksa5VUOUEJbb5ckTkdJpz3khkilW7-q_cBiq2FHNWsdkZhv&state=b4f43b2980fbdcfd0c4befe27e370c11cbc6f4cf1a8ef338" for ::1 at 2016-07-10 20:52:04 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAftY4mJ-Qq3E31YGsRL_Mg2InPo9G2LR0-Q-4o3zR84_3O5DtSIe3edwgDEb4fYx2DvQB9HC2Q-PvmmisNou3FVeDXJdfDhdh0C-z_Q7XP_rAdoYBNCHB4gA3OKQKYWh4mcNsJl3AYm1Hhu6gmF9XM5pj5DZHRAleHuZBdGWRpfb1CSf9UJS2DRg70apB6wrNaZXGfugtj2Osbgf9JI07HltlvZb5ilA2bRgBOZK-l8PaatE3XvluYCXHGSOhB1DDV2xT_Nf4bdBlDIdoUECBaQbl0-59yarmEPa8hwksa5VUOUEJbb5ckTkdJpz3khkilW7-q_cBiq2FHNWsdkZhv", "state"=>"b4f43b2980fbdcfd0c4befe27e370c11cbc6f4cf1a8ef338"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:52:04 UTC], ["last_sign_in_at", 2016-07-10 17:13:36 UTC], ["sign_in_count", 5], ["updated_at", 2016-07-10 17:52:04 UTC], ["id", 47]]
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 70ms (ActiveRecord: 66.3ms)


Started GET "/" for ::1 at 2016-07-10 20:52:05 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.0ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:52:07 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"davXCAzSDWJyKiVIvf/cNzIzoS7+gTy+D2H7+vtlU0T2vcFO18NG0m3R1XYygBHwgrXdV+7bsPnuranzYdh+NA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:52:07 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
Completed 200 OK in 34ms (Views: 32.5ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:52:12 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:52:12 +0300
Started GET "/users/auth/facebook/callback?code=AQCt_Q3b0sd-wEpoJ3ahrtQLA95lBeHFLzV6pbyE0HkmIpgBZ1v2wD_GE7vpuW6GPctLjTdD-7LGcSDLg0ZsZVy65Bvf-PMpeRG92l0ZfhXvZptRZKHiiEWU0DLuQTtaKd_6e1bZynvZIUrVYmF7XiV1O_N_D7pX8cm3n570SekcrFucyaAo7OSrcoiPcj4IDPa6LhSWnK4und4xUondcGjB1j4dLbYRU-dN85TP0ndmy5Va0EzsEoAvjn1oS5L7oMYaxJQ0z5p5zAUX1aiGNaU83541djF-kQbU_YvngtEz031hIsntXRNLhq4cd940Se5v2CyyVlN_HJ1UYuWJ85SS&state=17488e188ab9929392f4959d3dbeb3f66fa34c813fb75c56" for ::1 at 2016-07-10 20:52:12 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCt_Q3b0sd-wEpoJ3ahrtQLA95lBeHFLzV6pbyE0HkmIpgBZ1v2wD_GE7vpuW6GPctLjTdD-7LGcSDLg0ZsZVy65Bvf-PMpeRG92l0ZfhXvZptRZKHiiEWU0DLuQTtaKd_6e1bZynvZIUrVYmF7XiV1O_N_D7pX8cm3n570SekcrFucyaAo7OSrcoiPcj4IDPa6LhSWnK4und4xUondcGjB1j4dLbYRU-dN85TP0ndmy5Va0EzsEoAvjn1oS5L7oMYaxJQ0z5p5zAUX1aiGNaU83541djF-kQbU_YvngtEz031hIsntXRNLhq4cd940Se5v2CyyVlN_HJ1UYuWJ85SS", "state"=>"17488e188ab9929392f4959d3dbeb3f66fa34c813fb75c56"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 17:52:13 UTC], ["last_sign_in_at", 2016-07-10 17:52:04 UTC], ["sign_in_count", 6], ["updated_at", 2016-07-10 17:52:13 UTC], ["id", 47]]
  [1m[35m (93.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 98ms (ActiveRecord: 94.1ms)


Started GET "/" for ::1 at 2016-07-10 20:52:13 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.8ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:52:15 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"W8i58R5zTEGI5yKadBBD0gmr0ljHrxeaU2VTQ+l/eaNYmgvt4JyrpmN0wBpz7gL1IHylbiYUuTuPpcjFQE5kdg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:52:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.7ms)
Completed 200 OK in 31ms (Views: 30.3ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:00 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.0ms)
Completed 200 OK in 27ms (Views: 25.4ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:01 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.4ms)
Completed 200 OK in 36ms (Views: 34.7ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.4ms)
Completed 200 OK in 52ms (Views: 50.6ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
Completed 200 OK in 39ms (Views: 37.7ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:53:02 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.1ms)
Completed 200 OK in 39ms (Views: 37.9ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:40 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (14.6ms)
Completed 200 OK in 37ms (Views: 35.4ms | ActiveRecord: 0.7ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
Completed 200 OK in 25ms (Views: 23.4ms | ActiveRecord: 0.3ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.1ms)
Completed 200 OK in 72ms (Views: 69.7ms | ActiveRecord: 0.5ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
Completed 200 OK in 37ms (Views: 35.6ms | ActiveRecord: 0.2ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:44 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.7ms)
Completed 200 OK in 36ms (Views: 34.1ms | ActiveRecord: 0.5ms)


Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 47]]
  [1m[35m (55.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 59ms (ActiveRecord: 56.1ms)


Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
Processing by UsersController#destroy as HTML
Processing by UsersController#destroy as HTML
Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
Processing by UsersController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Processing by UsersController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
Completed 404 Not Found in 3ms (ActiveRecord: 0.2ms)


  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms)


  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
  
Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


ActiveRecord::RecordNotFound (Couldn't find User with 'id'=47):
Completed 404 Not Found in 2ms (ActiveRecord: 0.0ms)


ActiveRecord::RecordNotFound (Couldn't find User with 'id'=47):
  
  
  
  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=47):
app/controllers/users_controller.rb:67:in `set_user'
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=47):
app/controllers/users_controller.rb:67:in `set_user'
  
  
Started DELETE "/users/47" for ::1 at 2016-07-10 20:57:46 +0300
app/controllers/users_controller.rb:67:in `set_user'
app/controllers/users_controller.rb:67:in `set_user'
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"9mWhX8oxFmT30TNuEtIdEnCGogosnOkpf81ELkwXFvImbZqJf4iLp4fG1Phs1V+x10+YkEU4UbVrLkTOcIV8lg==", "id"=>"47"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 47], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=47):
  
app/controllers/users_controller.rb:67:in `set_user'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.6ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (18.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (103.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (67.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (95.1ms)
Started GET "/users" for ::1 at 2016-07-10 20:57:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
Completed 200 OK in 24ms (Views: 23.1ms | ActiveRecord: 0.2ms)


Started DELETE "/users/46" for ::1 at 2016-07-10 20:57:53 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"Yihg9rQSUgSallS2HHUqZ+hOlME9oLOvLUxSsP33aOKyIFsgAavPx+qBsyBicmjET4euW1QECzM5r1JQwWUChg==", "id"=>"46"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 46]]
  [1m[35m (66.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 69ms (ActiveRecord: 66.8ms)


Started GET "/users" for ::1 at 2016-07-10 20:57:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.0ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.1ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:57:55 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:57:55 +0300
Started GET "/users/auth/facebook/callback?code=AQB5A4MhFL3rlXPcs5--ODJzmlIpgMeeCDdJgklmvIwPlbpyxExj292Caatpkiqa5afVpzX6m8juFcwFM2J7ulZF8PZ8ZPaPKTWyUvO6tiQoJ9MsS3QGRkt7UN1MKv0h_vvexVB9C3CyVJLPRDUbM5ESAWKBbz4Wo3AD20tDBs1FLkuk43v3I9lzgCfF2UJ0_05VHyrJEh1e3Ar2SKj7EL9mxMtFs41YHB1mLO2OwNzZi4v8a_FlIM5k7t63ebAKDPl86F8bm6et_s_mTaUUOsGbPTmE1HO0M618Hzp-vyM1RL3i26G3a2H43eGUIPXMBWS6R6vbWXRQZrFqGl1LkpC1&state=2e08eb9da3b77030d3603f94a48ceaa5aa5254063939c447" for ::1 at 2016-07-10 20:57:55 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQB5A4MhFL3rlXPcs5--ODJzmlIpgMeeCDdJgklmvIwPlbpyxExj292Caatpkiqa5afVpzX6m8juFcwFM2J7ulZF8PZ8ZPaPKTWyUvO6tiQoJ9MsS3QGRkt7UN1MKv0h_vvexVB9C3CyVJLPRDUbM5ESAWKBbz4Wo3AD20tDBs1FLkuk43v3I9lzgCfF2UJ0_05VHyrJEh1e3Ar2SKj7EL9mxMtFs41YHB1mLO2OwNzZi4v8a_FlIM5k7t63ebAKDPl86F8bm6et_s_mTaUUOsGbPTmE1HO0M618Hzp-vyM1RL3i26G3a2H43eGUIPXMBWS6R6vbWXRQZrFqGl1LkpC1", "state"=>"2e08eb9da3b77030d3603f94a48ceaa5aa5254063939c447"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["url", "https://www.facebook.com/"], ["created_at", 2016-07-10 17:57:56 UTC], ["updated_at", 2016-07-10 17:57:56 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$qDqnUnEC/9rHrQ55Qcrfbe.YufkA9w5VZNrylgRaa0opQk8cOoo1S"]]
  [1m[35m (101.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:57:56 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:57:56 UTC], ["last_sign_in_at", 2016-07-10 17:57:56 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 54]]
  [1m[35m (63.2ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 301ms (ActiveRecord: 165.6ms)


Started GET "/" for ::1 at 2016-07-10 20:57:56 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 54], ["LIMIT", 1]]
Completed 200 OK in 43ms (Views: 41.3ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 20:58:15 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+rqFwYSG92gozNDOdvQ68sv2yB52SCjspmhNfbdQ9MwZu3eFUi34IF3CvpzueHSVNgamV3fWM2ExgIkRJDlzgA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 54], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 20:58:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
Completed 200 OK in 26ms (Views: 24.8ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:58:45 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 20:58:45 +0300
Started GET "/users/auth/facebook/callback?code=AQC53R3stHnt5yyB_6G6ceubLvt0yiqVfuhAkpwmcAGcPO2IYfyO_Ds9UEaXhv2smJA4EjATJYia1mUrzRBdvlrB8u_pruNc4hsnNmalxTjQbpd29se5qxFxoPsVa7XtCJTnUQG2axpnE5bVlEy7j-O1SvLZbh5QWDsieWCE8V3MOAHbeTtEEgwU9wGumJ2NFk4ue_HjC6xO6o-exFp6z4sEJNjtzW49Bnej1wjUkqER1yFf4CS_MLjxj_uS6WLpBRvgVuRwufQuvM9TObJP1EB38UC8RLESTR1uKCzrctSBzMeLH0MR4FqCV4jv3990kxxR27EJ87RYOqhUPGe4hifl&state=67f1ea458a2f656e68867ceb1b57d9e8919f422ea8ab130c" for ::1 at 2016-07-10 20:59:45 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQC53R3stHnt5yyB_6G6ceubLvt0yiqVfuhAkpwmcAGcPO2IYfyO_Ds9UEaXhv2smJA4EjATJYia1mUrzRBdvlrB8u_pruNc4hsnNmalxTjQbpd29se5qxFxoPsVa7XtCJTnUQG2axpnE5bVlEy7j-O1SvLZbh5QWDsieWCE8V3MOAHbeTtEEgwU9wGumJ2NFk4ue_HjC6xO6o-exFp6z4sEJNjtzW49Bnej1wjUkqER1yFf4CS_MLjxj_uS6WLpBRvgVuRwufQuvM9TObJP1EB38UC8RLESTR1uKCzrctSBzMeLH0MR4FqCV4jv3990kxxR27EJ87RYOqhUPGe4hifl", "state"=>"67f1ea458a2f656e68867ceb1b57d9e8919f422ea8ab130c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "strukov.yura.1996@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Yury Strukov"], ["provider", "facebook"], ["url", "https://www.facebook.com/"], ["created_at", 2016-07-10 17:59:46 UTC], ["updated_at", 2016-07-10 17:59:46 UTC], ["email", "strukov.yura.1996@gmail.com"], ["encrypted_password", "$2a$11$GmsW/tN13RVjEAw.kXJdOu.jhL/E9G/TH2gQrdQy4aOKoSrazfXim"]]
  [1m[35m (69.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 17:59:46 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 17:59:46 UTC], ["last_sign_in_at", 2016-07-10 17:59:46 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 55]]
  [1m[35m (64.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 262ms (ActiveRecord: 134.7ms)


Started GET "/" for ::1 at 2016-07-10 20:59:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 55], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 38.4ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:03:26 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"APN1CitAyoKEYJgT/tQNLZyCPEvKqoArZBF0ln05uqjOuZvZCaEvn/B3wMPBWCZ1Ubehd9nn1ZfIMc0SM8AmGg=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 18ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 21:03:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 21:03:28 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 21:03:28 +0300
Started GET "/users/auth/vkontakte/callback?code=628c3ccadeae69c19d&state=8e991fa9ec5d854498e076ea3b350efb8f15d19ca384795f" for ::1 at 2016-07-10 21:03:58 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"628c3ccadeae69c19d", "state"=>"8e991fa9ec5d854498e076ea3b350efb8f15d19ca384795f"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/dusrent"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "http://vk.com/dusrent@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Костя Савик"], ["provider", "vkontakte"], ["url", "http://vk.com/dusrent"], ["created_at", 2016-07-10 18:03:59 UTC], ["updated_at", 2016-07-10 18:03:59 UTC], ["email", "http://vk.com/dusrent@vk.com"], ["encrypted_password", "$2a$11$YOSlFLZD8.sUT6DP4z7G/OioWp6Bo4IOhEMrCxRzvpbJeRklHv6ZS"]]
  [1m[35m (66.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:03:59 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:03:59 UTC], ["last_sign_in_at", 2016-07-10 18:03:59 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 56]]
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 263ms (ActiveRecord: 133.3ms)


Started GET "/" for ::1 at 2016-07-10 21:03:59 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 56], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:04:59 +0300
Started GET "/" for ::1 at 2016-07-10 21:06:19 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (13.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 56], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 34.7ms | ActiveRecord: 0.8ms)


Started DELETE "/users/55" for ::1 at 2016-07-10 21:06:23 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"zNed8m5RD5K0HmGB0xhWSJ3rtuW77s03Wbw2DtqIYI/p6LEyp38wf6wfyd96oedLM7y+qyDucwBtEGBn6i4Jxg==", "id"=>"55"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 55]]
  [1m[35m (124.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 127ms (ActiveRecord: 124.8ms)


Started GET "/users" for ::1 at 2016-07-10 21:06:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 56], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/54" for ::1 at 2016-07-10 21:06:24 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"rjl1pB1PLlfYj9+sikd0XPMDfgptrzBTV49WSHRuxKuLBllk1GERusCOd/Ij/sVfXVR2RPavjmRjIwAhRMit4g==", "id"=>"54"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 54], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 54]]
  [1m[35m (118.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 121ms (ActiveRecord: 118.9ms)


Started GET "/users" for ::1 at 2016-07-10 21:06:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 56], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 25.1ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:06:26 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"bt5FL9BU7LkWLBasKEztoZhT7YYxYZb3b0OXdmbxlvZL4WnvGXrTVA4tvvKB9VyiNgTlyKphKMBb78EfVlf/vw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 56], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 21:06:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.9ms)
Completed 200 OK in 23ms (Views: 21.7ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:06:27 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:06:27 +0300
Started GET "/users/auth/facebook/callback?code=AQCaCsaWH-DxCtK1tgde9YQxUKZYU_27ZuqJEKiplaFZMeSfLjbQMPg2sYXCFSJGi1WxTkqFjnNrxu4-qQ_KzD6tSlySNaDjpdMf9fpmvZa5fYqD-bjm75epidWnqmK0y4EjdQSAeVZYhcDfwH95XFAu4h_WF3cwDS3NFextQxhDRSOElqDyPw6AcZ3qwRlVUcFrma5C6kZ3vPC_KXn04VQtFKew6EAr8uk_dpwsq1eodxSu5pK3pas1bk6_ZHe4k5lwxUnaROQbOCQ2GRn04mpExzf6WG4IS_oEfRIEy6wka_02oqOML9GIYw7ooe3t931esOUXF1DGFrmu2umremtA&state=56aa80402443facac869e3420b27a8c3366a16c0b3c0574d" for ::1 at 2016-07-10 21:06:28 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQCaCsaWH-DxCtK1tgde9YQxUKZYU_27ZuqJEKiplaFZMeSfLjbQMPg2sYXCFSJGi1WxTkqFjnNrxu4-qQ_KzD6tSlySNaDjpdMf9fpmvZa5fYqD-bjm75epidWnqmK0y4EjdQSAeVZYhcDfwH95XFAu4h_WF3cwDS3NFextQxhDRSOElqDyPw6AcZ3qwRlVUcFrma5C6kZ3vPC_KXn04VQtFKew6EAr8uk_dpwsq1eodxSu5pK3pas1bk6_ZHe4k5lwxUnaROQbOCQ2GRn04mpExzf6WG4IS_oEfRIEy6wka_02oqOML9GIYw7ooe3t931esOUXF1DGFrmu2umremtA", "state"=>"56aa80402443facac869e3420b27a8c3366a16c0b3c0574d"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms)


  
TypeError (no implicit conversion of nil into String):
  
app/models/user.rb:14:in `+'
app/models/user.rb:14:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.4ms)
Started GET "/users/auth/facebook/callback?code=AQCaCsaWH-DxCtK1tgde9YQxUKZYU_27ZuqJEKiplaFZMeSfLjbQMPg2sYXCFSJGi1WxTkqFjnNrxu4-qQ_KzD6tSlySNaDjpdMf9fpmvZa5fYqD-bjm75epidWnqmK0y4EjdQSAeVZYhcDfwH95XFAu4h_WF3cwDS3NFextQxhDRSOElqDyPw6AcZ3qwRlVUcFrma5C6kZ3vPC_KXn04VQtFKew6EAr8uk_dpwsq1eodxSu5pK3pas1bk6_ZHe4k5lwxUnaROQbOCQ2GRn04mpExzf6WG4IS_oEfRIEy6wka_02oqOML9GIYw7ooe3t931esOUXF1DGFrmu2umremtA&state=56aa80402443facac869e3420b27a8c3366a16c0b3c0574d" for ::1 at 2016-07-10 21:07:22 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQCaCsaWH-DxCtK1tgde9YQxUKZYU_27ZuqJEKiplaFZMeSfLjbQMPg2sYXCFSJGi1WxTkqFjnNrxu4-qQ_KzD6tSlySNaDjpdMf9fpmvZa5fYqD-bjm75epidWnqmK0y4EjdQSAeVZYhcDfwH95XFAu4h_WF3cwDS3NFextQxhDRSOElqDyPw6AcZ3qwRlVUcFrma5C6kZ3vPC_KXn04VQtFKew6EAr8uk_dpwsq1eodxSu5pK3pas1bk6_ZHe4k5lwxUnaROQbOCQ2GRn04mpExzf6WG4IS_oEfRIEy6wka_02oqOML9GIYw7ooe3t931esOUXF1DGFrmu2umremtA", "state"=>"56aa80402443facac869e3420b27a8c3366a16c0b3c0574d"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 21:07:22 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.1ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (4.3ms)
Completed 200 OK in 37ms (Views: 26.2ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:07:25 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:07:25 +0300
Started GET "/users/auth/facebook/callback?code=AQDeNmbwClCvmMEACd1VTJRiMLAp_wj7RAJyF3_Lqh21ADnuLf_0JTyheOtURQwmy5KZws7CcJQET2iNcI4_Tj6uZ7QPhk7Yua5AUBCuW10a_QAay8lYMxUG1f-PTe2NsTlG5OHvvLRxmN23bjhYti7xdvV_7ZmDUhi4iOBOTTEdOClRKqPvqovgUhwe4XLA7oyq7quzWaDhY86NpT7LavLRjtVMn7WTSHRBa5okM7fXckIZ2lPKA92L8r5bDqKQnJwqGlwX0pWIGFoE62Pg67i7At1NpfFgyPGF5FKULiFhfmuRHloWu9LuQxaXNjjtqZtiIVrzCEJaRYp5NZZpTL-N&state=245a78843c53f4fc0d85a1dcdbb30ac505ea4ccb6c4169b1" for ::1 at 2016-07-10 21:07:25 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDeNmbwClCvmMEACd1VTJRiMLAp_wj7RAJyF3_Lqh21ADnuLf_0JTyheOtURQwmy5KZws7CcJQET2iNcI4_Tj6uZ7QPhk7Yua5AUBCuW10a_QAay8lYMxUG1f-PTe2NsTlG5OHvvLRxmN23bjhYti7xdvV_7ZmDUhi4iOBOTTEdOClRKqPvqovgUhwe4XLA7oyq7quzWaDhY86NpT7LavLRjtVMn7WTSHRBa5okM7fXckIZ2lPKA92L8r5bDqKQnJwqGlwX0pWIGFoE62Pg67i7At1NpfFgyPGF5FKULiFhfmuRHloWu9LuQxaXNjjtqZtiIVrzCEJaRYp5NZZpTL-N", "state"=>"245a78843c53f4fc0d85a1dcdbb30ac505ea4ccb6c4169b1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)


  
TypeError (no implicit conversion of nil into String):
  
app/models/user.rb:14:in `+'
app/models/user.rb:14:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.5ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.2ms)
Started GET "/users/auth/facebook/callback?code=AQDeNmbwClCvmMEACd1VTJRiMLAp_wj7RAJyF3_Lqh21ADnuLf_0JTyheOtURQwmy5KZws7CcJQET2iNcI4_Tj6uZ7QPhk7Yua5AUBCuW10a_QAay8lYMxUG1f-PTe2NsTlG5OHvvLRxmN23bjhYti7xdvV_7ZmDUhi4iOBOTTEdOClRKqPvqovgUhwe4XLA7oyq7quzWaDhY86NpT7LavLRjtVMn7WTSHRBa5okM7fXckIZ2lPKA92L8r5bDqKQnJwqGlwX0pWIGFoE62Pg67i7At1NpfFgyPGF5FKULiFhfmuRHloWu9LuQxaXNjjtqZtiIVrzCEJaRYp5NZZpTL-N&state=245a78843c53f4fc0d85a1dcdbb30ac505ea4ccb6c4169b1" for ::1 at 2016-07-10 21:07:47 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQDeNmbwClCvmMEACd1VTJRiMLAp_wj7RAJyF3_Lqh21ADnuLf_0JTyheOtURQwmy5KZws7CcJQET2iNcI4_Tj6uZ7QPhk7Yua5AUBCuW10a_QAay8lYMxUG1f-PTe2NsTlG5OHvvLRxmN23bjhYti7xdvV_7ZmDUhi4iOBOTTEdOClRKqPvqovgUhwe4XLA7oyq7quzWaDhY86NpT7LavLRjtVMn7WTSHRBa5okM7fXckIZ2lPKA92L8r5bDqKQnJwqGlwX0pWIGFoE62Pg67i7At1NpfFgyPGF5FKULiFhfmuRHloWu9LuQxaXNjjtqZtiIVrzCEJaRYp5NZZpTL-N", "state"=>"245a78843c53f4fc0d85a1dcdbb30ac505ea4ccb6c4169b1"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 21:07:48 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (1.0ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.9ms)
Completed 200 OK in 39ms (Views: 29.5ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:07:50 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:07:50 +0300
Started GET "/users/auth/facebook/callback?code=AQArALQ2Mwl_mifzFWYrz71AGubUEOikiwkjW4VsECjWtkqypnyowgcQnEn1XRecQJ3BX1cx4uQNW5bj2hUE7t2Qojf1zXhZqKMqDasc5mhx0rFvK6L7EkuzCDyRFHHeRx0hAemtXnbrfTJes5Xu0rUdzt4sXDWhJBYBdOy0vx7WtJJ_Bq3-tCgNWiZu4G9UiAQ5SX1NpTGr5hPS5yAJiipVw5blUqfj6qM-jMrpVe6q4hpj2BZlxze_ND-fkp9LRW7VNOmMs-VMqj5jEqBA_jNluhdzm-jNWbg3x_c-0PyHXZbl3eLENmtIlgpn5Jxs3j5y05IgxZc4uCTYbNiJbCCW&state=936b6ea4cf78fa2a73985886e145bb29b7ad5dc87a7742ee" for ::1 at 2016-07-10 21:07:50 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQArALQ2Mwl_mifzFWYrz71AGubUEOikiwkjW4VsECjWtkqypnyowgcQnEn1XRecQJ3BX1cx4uQNW5bj2hUE7t2Qojf1zXhZqKMqDasc5mhx0rFvK6L7EkuzCDyRFHHeRx0hAemtXnbrfTJes5Xu0rUdzt4sXDWhJBYBdOy0vx7WtJJ_Bq3-tCgNWiZu4G9UiAQ5SX1NpTGr5hPS5yAJiipVw5blUqfj6qM-jMrpVe6q4hpj2BZlxze_ND-fkp9LRW7VNOmMs-VMqj5jEqBA_jNluhdzm-jNWbg3x_c-0PyHXZbl3eLENmtIlgpn5Jxs3j5y05IgxZc4uCTYbNiJbCCW", "state"=>"936b6ea4cf78fa2a73985886e145bb29b7ad5dc87a7742ee"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)


  
TypeError (no implicit conversion of nil into String):
  
app/models/user.rb:14:in `+'
app/models/user.rb:14:in `find_for_facebook_oauth'
app/controllers/users/omniauth_callbacks_controller.rb:3:in `facebook'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (16.3ms)
Started GET "/users/auth/facebook/callback?code=AQArALQ2Mwl_mifzFWYrz71AGubUEOikiwkjW4VsECjWtkqypnyowgcQnEn1XRecQJ3BX1cx4uQNW5bj2hUE7t2Qojf1zXhZqKMqDasc5mhx0rFvK6L7EkuzCDyRFHHeRx0hAemtXnbrfTJes5Xu0rUdzt4sXDWhJBYBdOy0vx7WtJJ_Bq3-tCgNWiZu4G9UiAQ5SX1NpTGr5hPS5yAJiipVw5blUqfj6qM-jMrpVe6q4hpj2BZlxze_ND-fkp9LRW7VNOmMs-VMqj5jEqBA_jNluhdzm-jNWbg3x_c-0PyHXZbl3eLENmtIlgpn5Jxs3j5y05IgxZc4uCTYbNiJbCCW&state=936b6ea4cf78fa2a73985886e145bb29b7ad5dc87a7742ee" for ::1 at 2016-07-10 21:08:06 +0300
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"code"=>"AQArALQ2Mwl_mifzFWYrz71AGubUEOikiwkjW4VsECjWtkqypnyowgcQnEn1XRecQJ3BX1cx4uQNW5bj2hUE7t2Qojf1zXhZqKMqDasc5mhx0rFvK6L7EkuzCDyRFHHeRx0hAemtXnbrfTJes5Xu0rUdzt4sXDWhJBYBdOy0vx7WtJJ_Bq3-tCgNWiZu4G9UiAQ5SX1NpTGr5hPS5yAJiipVw5blUqfj6qM-jMrpVe6q4hpj2BZlxze_ND-fkp9LRW7VNOmMs-VMqj5jEqBA_jNluhdzm-jNWbg3x_c-0PyHXZbl3eLENmtIlgpn5Jxs3j5y05IgxZc4uCTYbNiJbCCW", "state"=>"936b6ea4cf78fa2a73985886e145bb29b7ad5dc87a7742ee"}
Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for ::1 at 2016-07-10 21:08:07 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/shared/_links.html.erb (0.9ms)
  Rendered /usr/lib/ruby/gems/2.3.0/gems/devise-4.2.0/app/views/devise/sessions/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 35ms (Views: 25.6ms | ActiveRecord: 0.6ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:08:08 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:08:08 +0300
Started GET "/users/auth/facebook/callback?code=AQDcL30Y3MejliWHro6vUmi1XP6SHfZGgVCep3PJC_Abw40Oj2uRL4kisvQWRa7wFYJWPZ6mxC5ET5eRiHrpNrBDMvm1b5gh1rZkqfNJuGHARE3vR7pAgyIIKAAfCC05IrmbMe-2qIhPuI2Y3L0cOudDs1GyE1kTWDQrcU7H0b_PiSmKlKXovw-rpuVy3IWNWfclJYznda26KQJC_BlOui1r225ohSQFrZx9lPF8dFn2GPLcQNCthCwOmpw2HBp2hQGGGrKMTOem-SLRSwxJKHtO8FDG8Xv3vF8JfZEjJaoY4QRdV-S5Yofpiz9V9asKBwiG3LyKGwn707-7cE4h6CfX&state=43d7133bb2497bc4e7f00391f7446d65acafe0a05d15f52e" for ::1 at 2016-07-10 21:08:09 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDcL30Y3MejliWHro6vUmi1XP6SHfZGgVCep3PJC_Abw40Oj2uRL4kisvQWRa7wFYJWPZ6mxC5ET5eRiHrpNrBDMvm1b5gh1rZkqfNJuGHARE3vR7pAgyIIKAAfCC05IrmbMe-2qIhPuI2Y3L0cOudDs1GyE1kTWDQrcU7H0b_PiSmKlKXovw-rpuVy3IWNWfclJYznda26KQJC_BlOui1r225ohSQFrZx9lPF8dFn2GPLcQNCthCwOmpw2HBp2hQGGGrKMTOem-SLRSwxJKHtO8FDG8Xv3vF8JfZEjJaoY4QRdV-S5Yofpiz9V9asKBwiG3LyKGwn707-7cE4h6CfX", "state"=>"43d7133bb2497bc4e7f00391f7446d65acafe0a05d15f52e"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["url", "https://www.facebook.com/Mikhail  Nagaraev"], ["created_at", 2016-07-10 18:08:09 UTC], ["updated_at", 2016-07-10 18:08:09 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$wjJRLBr1IRCLEPICz5c1NO3TAyu7WR/7ukY5ane8ndLjQ566sBfOe"]]
  [1m[35m (107.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:08:09 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:08:09 UTC], ["last_sign_in_at", 2016-07-10 18:08:09 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 57]]
  [1m[35m (55.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 291ms (ActiveRecord: 163.5ms)


Started GET "/" for ::1 at 2016-07-10 21:08:09 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (4.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 57], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 23.7ms | ActiveRecord: 0.5ms)


Started DELETE "/users/57" for ::1 at 2016-07-10 21:08:18 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"wnbW4KYdZtrSgOGuxKNmn61oykYh/fDnFB+FxWvv0b3Nmh3WzSh0DJdB0FLOfzE9Gnm0/8X+neuoZFV/xtN0aQ==", "id"=>"57"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 57], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 57]]
  [1m[35m (63.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 68ms (ActiveRecord: 64.7ms)


Started GET "/users" for ::1 at 2016-07-10 21:08:18 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 57], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 29.4ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:08:54 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:08:55 +0300
Started GET "/users/auth/facebook/callback?code=AQDUSsZigfDHdS75r3_5TsNlh5k6ajagqVhE6fVD9lkiEmIJKm7gI1i1_LTJlw05c7rbYjf2Kfs5rX_jJLcZxH82m6HkX59yJ5Ac4rH9ui3QINc3xQtrJO_76Xgv7oPcoDySdf34D9lYshlru6KzYKFDYQ4J3MHJ6urnRPtNksmjxFSYn8B4unvGiKm7_QCtxEUSUORzLOEgUx2P-lUWzu0Ry78q7gCwzHLByCa79rDqLnn3me7hUyRgTpu4amZGmF2Q0BRw3AQ4KzS3Y5QjiQNc7c7RUSmukJM7LsI3VJ-o5V_l5YeZloPXZTDy47oHS-H9SEdcVWmz4ER3-P955FxE&state=8d322f84b9d073921bf7d40ebd91ca4e2589546769292389" for ::1 at 2016-07-10 21:08:55 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQDUSsZigfDHdS75r3_5TsNlh5k6ajagqVhE6fVD9lkiEmIJKm7gI1i1_LTJlw05c7rbYjf2Kfs5rX_jJLcZxH82m6HkX59yJ5Ac4rH9ui3QINc3xQtrJO_76Xgv7oPcoDySdf34D9lYshlru6KzYKFDYQ4J3MHJ6urnRPtNksmjxFSYn8B4unvGiKm7_QCtxEUSUORzLOEgUx2P-lUWzu0Ry78q7gCwzHLByCa79rDqLnn3me7hUyRgTpu4amZGmF2Q0BRw3AQ4KzS3Y5QjiQNc7c7RUSmukJM7LsI3VJ-o5V_l5YeZloPXZTDy47oHS-H9SEdcVWmz4ER3-P955FxE", "state"=>"8d322f84b9d073921bf7d40ebd91ca4e2589546769292389"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "clowfinger13@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Mikhail  Nagaraev"], ["provider", "facebook"], ["url", "https://www.facebook.com/1707785512808666"], ["created_at", 2016-07-10 18:08:55 UTC], ["updated_at", 2016-07-10 18:08:55 UTC], ["email", "clowfinger13@gmail.com"], ["encrypted_password", "$2a$11$dRsYQIRRT3xdjjvSeXDjG.zVRqaC9ZcLJek/4kB/3TD0TB/O78Cey"]]
  [1m[35m (57.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:08:55 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:08:55 UTC], ["last_sign_in_at", 2016-07-10 18:08:55 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 58]]
  [1m[35m (64.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 262ms (ActiveRecord: 124.0ms)


Started GET "/" for ::1 at 2016-07-10 21:08:55 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (22.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 58], ["LIMIT", 1]]
Completed 200 OK in 43ms (Views: 41.7ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:09:23 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"JEu3/MiN/i4YDB0niBtKuaRcAiCfVIe0lhSO3XnfFahptKPdGpzbGhmHqUM7Ev69sl3e2sK5IfMfQiNDswwMxw=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 58], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 21:09:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.5ms)
Completed 200 OK in 30ms (Views: 28.5ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:09:27 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 21:09:27 +0300
Started GET "/users/auth/facebook/callback?code=AQBSyfCyfaVU29T6qpqDLH8Kqesf8nmeIKLHtYbOJ-rFSGllNe1A903UvW3fPmQS9CFyEx-S0sCsdA6CoNwlCZycooF6xP9rzXciCttQl8NfvIDVGShAzx53cVy6pduefeMlg5MasALZHtoBuWUSJTrSymxIu0KjbeiZXsNUOmr-8RmIm18HL7lA5JrXOVewAaubg66yi8hmz1ZgQvYchBxu9qdXxHzrA4OVIKezleu65hraVnIOjIti3jEkMf7MIKV6yYZ-J7kdIy7z6lXey74suOb9Ax9FjKX3TbCKr-0JSPUp1beznUn9GyXjGlldRp6ywsxBKdkksxtuylPju5FN&state=cae92db9f36a850b1d7d73b4330c62cd0689af17f8656bde" for ::1 at 2016-07-10 21:09:31 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBSyfCyfaVU29T6qpqDLH8Kqesf8nmeIKLHtYbOJ-rFSGllNe1A903UvW3fPmQS9CFyEx-S0sCsdA6CoNwlCZycooF6xP9rzXciCttQl8NfvIDVGShAzx53cVy6pduefeMlg5MasALZHtoBuWUSJTrSymxIu0KjbeiZXsNUOmr-8RmIm18HL7lA5JrXOVewAaubg66yi8hmz1ZgQvYchBxu9qdXxHzrA4OVIKezleu65hraVnIOjIti3jEkMf7MIKV6yYZ-J7kdIy7z6lXey74suOb9Ax9FjKX3TbCKr-0JSPUp1beznUn9GyXjGlldRp6ywsxBKdkksxtuylPju5FN", "state"=>"cae92db9f36a850b1d7d73b4330c62cd0689af17f8656bde"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "strukov.yura.1996@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Yury Strukov"], ["provider", "facebook"], ["url", "https://www.facebook.com/1456035551078990"], ["created_at", 2016-07-10 18:09:31 UTC], ["updated_at", 2016-07-10 18:09:31 UTC], ["email", "strukov.yura.1996@gmail.com"], ["encrypted_password", "$2a$11$.0IHuTYNn/SBktNVFcNWW.AxyfXl6RyO0OGwtNWB0ZgqnYQhbi/jq"]]
  [1m[35m (54.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:09:31 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:09:31 UTC], ["last_sign_in_at", 2016-07-10 18:09:31 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 59]]
  [1m[35m (63.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 251ms (ActiveRecord: 119.6ms)


Started GET "/" for ::1 at 2016-07-10 21:09:32 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 59], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 24.1ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:10:03 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"7VtF2W1HM0J01Gg0FGNl/40y0okC5Kk/TXBySACK80R8kor7MWOKCzNxsShZTNwY/JJAABXk4aL1o4TRe2kjNQ=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 59], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2016-07-10 21:10:03 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.5ms)
Completed 200 OK in 32ms (Views: 29.9ms | ActiveRecord: 1.4ms)


Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 21:10:05 +0300
Started GET "/users/auth/vkontakte" for ::1 at 2016-07-10 21:10:05 +0300
Started GET "/users/auth/vkontakte/callback?code=52521195c84a58a1dc&state=53bd5dc8657bb4b83543448021fc076a73ff30f275afd92e" for ::1 at 2016-07-10 21:10:30 +0300
Processing by Users::OmniauthCallbacksController#vkontakte as HTML
  Parameters: {"code"=>"52521195c84a58a1dc", "state"=>"53bd5dc8657bb4b83543448021fc076a73ff30f275afd92e"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "http://vk.com/zhur999"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "http://vk.com/zhur999@vk.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Ростислав Журавский"], ["provider", "vkontakte"], ["url", "http://vk.com/zhur999"], ["created_at", 2016-07-10 18:10:31 UTC], ["updated_at", 2016-07-10 18:10:31 UTC], ["email", "http://vk.com/zhur999@vk.com"], ["encrypted_password", "$2a$11$wulNHEMktmQrTuk4Py1LFOYIVLdpz2RnjeBKzoyYee1l5a8bcKQvq"]]
  [1m[35m (64.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:10:31 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:10:31 UTC], ["last_sign_in_at", 2016-07-10 18:10:31 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 60]]
  [1m[35m (55.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 250ms (ActiveRecord: 121.2ms)


Started GET "/" for ::1 at 2016-07-10 21:10:31 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 60], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 28.9ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:10:38 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"0k2D6H01UBVYHOV66uKU47W8swZRBBytl8zO9Zm33BN5FZshe7MCE2LVMS+ZB03ywBUMoNiHwPXliQ1dVIFcbg=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 60], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 21:10:38 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.4ms)
Completed 200 OK in 27ms (Views: 25.0ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 21:19:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (32.6ms)
Completed 500 Internal Server Error in 384ms (ActiveRecord: 0.6ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x00000003463ae0>:0x000000034e5db0>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_28185420'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.2ms)
Started GET "/" for ::1 at 2016-07-10 21:23:22 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (17.2ms)
Completed 500 Internal Server Error in 163ms (ActiveRecord: 1.2ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x007f61981d2c60>:0x007f61981d1900>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_70028570333000'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.7ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.5ms)
Started GET "/" for ::1 at 2016-07-10 21:23:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (5.4ms)
Completed 500 Internal Server Error in 138ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x007f61981d2c60>:0x007f619663e990>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_70028557568640'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.1ms)
Started GET "/" for ::1 at 2016-07-10 21:23:26 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.9ms)
Completed 500 Internal Server Error in 142ms (ActiveRecord: 0.4ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x007f61981d2c60>:0x007f6196937408>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_70028557348120'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (16.6ms)
Started GET "/" for ::1 at 2016-07-10 21:34:42 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.7ms)
Completed 500 Internal Server Error in 136ms (ActiveRecord: 0.3ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x007f61981d2c60>:0x007f619679c170>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_70028556998240'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.8ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.3ms)
Started GET "/" for ::1 at 2016-07-10 21:34:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.8ms)
Completed 500 Internal Server Error in 136ms (ActiveRecord: 0.2ms)


  
ActionView::Template::Error (undefined local variable or method `user_twitter_omniauth_authorize_path' for #<#<Class:0x007f61981d2c60>:0x007f6198227350>
Did you mean?  user_vkontakte_omniauth_authorize_path
               user_vkontakte_omniauth_authorize_url
               user_facebook_omniauth_authorize_path):
    36:                 - if !user_signed_in?
    37:                   %li= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path
    38:                   %li= link_to "Sign in with Vkontakte", user_vkontakte_omniauth_authorize_path
    39:                   %li= link_to "Sign in with Twitter", user_twitter_omniauth_authorize_path
    40:       %footer
    41:         %p © Company 2016
    42:     = javascript_include_tag "application"
  
app/views/layouts/application.html.haml:39:in `_app_views_layouts_application_html_haml__358390440637125296_70028570439020'
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendering /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.5ms)
  Rendered /home/mikhail/.gem/ruby/2.3.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (17.8ms)
Started GET "/" for ::1 at 2016-07-10 21:40:59 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (34.5ms)
Completed 200 OK in 244ms (Views: 236.0ms | ActiveRecord: 1.0ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:41:05 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:41:06 +0300
Started GET "/users/auth/twitter/callback?oauth_token=YN51-wAAAAAAwBlFAAABVdYc67g&oauth_verifier=6ugoQiLktTrpZJNkTkoJoaCBE7zwWqQZ" for ::1 at 2016-07-10 21:41:13 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"YN51-wAAAAAAwBlFAAABVdYc67g", "oauth_verifier"=>"6ugoQiLktTrpZJNkTkoJoaCBE7zwWqQZ"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/clowfigner13"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "https://twitter.com/clowfigner13@tw.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["provider", "twitter"], ["url", "https://twitter.com/clowfigner13"], ["created_at", 2016-07-10 18:41:15 UTC], ["updated_at", 2016-07-10 18:41:15 UTC], ["email", "https://twitter.com/clowfigner13@tw.com"], ["encrypted_password", "$2a$11$Un1QBM2HE09nlSknh7pGSuOInIxmsKyshKSGMBqzEMsjyTaL6c2.O"]]
  [1m[35m (62.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:41:15 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:41:15 UTC], ["last_sign_in_at", 2016-07-10 18:41:15 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 61]]
  [1m[35m (71.5ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 287ms (ActiveRecord: 136.2ms)


Started GET "/" for ::1 at 2016-07-10 21:41:15 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 34.6ms | ActiveRecord: 1.2ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:41:42 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"e1ed91G6jI9MVngNbjkSfcSywdjNmOaV+fjOtql4saBEt5vBub9EO/Bfanj7z7jpmYXvaAIx8bSCPn5kBQtuGw=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 21:41:43 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.7ms)
Completed 200 OK in 28ms (Views: 26.3ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:41:44 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:41:45 +0300
Started GET "/users/auth/twitter/callback?oauth_token=i_-D7AAAAAAAwBlFAAABVdYdgk4&oauth_verifier=TJalceGJBBrwaoseUDEonVHiXQ1MAE0R" for ::1 at 2016-07-10 21:42:09 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"i_-D7AAAAAAAwBlFAAABVdYdgk4", "oauth_verifier"=>"TJalceGJBBrwaoseUDEonVHiXQ1MAE0R"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/y_strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "https://twitter.com/y_strukov@tw.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Yury Strukov"], ["provider", "twitter"], ["url", "https://twitter.com/y_strukov"], ["created_at", 2016-07-10 18:42:11 UTC], ["updated_at", 2016-07-10 18:42:11 UTC], ["email", "https://twitter.com/y_strukov@tw.com"], ["encrypted_password", "$2a$11$EWnmtnBs3hYmUXRe0ZJml.C2LaHrPhR4BG7jgpEpuHb7mvk5Y8yQS"]]
  [1m[35m (66.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 18:42:11 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 18:42:11 UTC], ["last_sign_in_at", 2016-07-10 18:42:11 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 62]]
  [1m[35m (64.7ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 261ms (ActiveRecord: 132.2ms)


Started GET "/" for ::1 at 2016-07-10 21:42:11 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.5ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:42:16 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"kfVzy00RaMjQL8O4rgkMowrpO7vHGp8VNWOhxwErNCDfxZNXu36dLxQ7cUsiiq5KdyuQD2SeAJEieD1GvDkplQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-07-10 21:42:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.9ms)
Completed 200 OK in 33ms (Views: 32.1ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:42:18 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:42:19 +0300
Started GET "/users/auth/twitter/callback?oauth_token=_wqt-gAAAAAAwBlFAAABVdYeB90&oauth_verifier=M9kwrw4kuXo6ruiUhjcmrrxzsThLmoni" for ::1 at 2016-07-10 21:42:22 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"_wqt-gAAAAAAwBlFAAABVdYeB90", "oauth_verifier"=>"M9kwrw4kuXo6ruiUhjcmrrxzsThLmoni"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/y_strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 18:42:24 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 18:42:24 UTC], ["id", 62]]
  [1m[35m (136.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 141ms (ActiveRecord: 137.7ms)


Started GET "/" for ::1 at 2016-07-10 21:42:24 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 35.5ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:42:53 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"wkCvdpHyUv/3+9iJpMUsu6kHUswCCkiBtq2i3lhW6rOseDfZCX2Gl2qZzc+kC2aW7FEhQfNbmxC0LVc9kJjQZQ=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 21:42:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.5ms)
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:14 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:16 +0300
Started GET "/users/auth/twitter/callback?oauth_token=AQSXQwAAAAAAwBlFAAABVdYlTXU&oauth_verifier=zIg8elWjjUpQq5Pi21DiOnRzbBFqKwN6" for ::1 at 2016-07-10 21:50:18 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"AQSXQwAAAAAAwBlFAAABVdYlTXU", "oauth_verifier"=>"zIg8elWjjUpQq5Pi21DiOnRzbBFqKwN6"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/y_strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 18:50:20 UTC], ["last_sign_in_at", 2016-07-10 18:42:24 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 18:50:20 UTC], ["id", 62]]
  [1m[35m (81.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 87ms (ActiveRecord: 82.2ms)


Started GET "/" for ::1 at 2016-07-10 21:50:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 36.6ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:50:28 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"XbIbbLPalGBGCw01Y2PcP1I/bd57hnWINl2t7lJbGeOeqSKOPxF+5sFw3NQAE9HuvgJPj5hYk/ioXr3MYh/KNA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 21:50:28 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (10.7ms)
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.3ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:29 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:30 +0300
Started GET "/users/auth/twitter/callback?oauth_token=fXevNAAAAAAAwBlFAAABVdYlhnY&oauth_verifier=OvaPvUja3W7DUfE0HNOl2LQKUm0PcLaz" for ::1 at 2016-07-10 21:50:32 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"fXevNAAAAAAAwBlFAAABVdYlhnY", "oauth_verifier"=>"OvaPvUja3W7DUfE0HNOl2LQKUm0PcLaz"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/y_strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 18:50:34 UTC], ["last_sign_in_at", 2016-07-10 18:50:20 UTC], ["sign_in_count", 4], ["updated_at", 2016-07-10 18:50:34 UTC], ["id", 62]]
  [1m[35m (96.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 102ms (ActiveRecord: 97.5ms)


Started GET "/" for ::1 at 2016-07-10 21:50:34 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 35.0ms | ActiveRecord: 0.5ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 21:50:36 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"LxGwPGsFV4o/xVz9PSRaZuM3g+jAcDA2Fl/3K+VTu6Ko4NB4v9Q1CNknjejbMZBTWoMN2QUqaDz01VXugy2C3Q=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 21:50:36 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.7ms)
Completed 200 OK in 26ms (Views: 24.9ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:48 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 21:50:49 +0300
Started GET "/users/auth/twitter/callback?oauth_token=KlO9igAAAAAAwBlFAAABVdYl0D0&oauth_verifier=gpsFMFCJQ9Q63dQtMtaHVqMWXFIK3ViE" for ::1 at 2016-07-10 21:50:51 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"KlO9igAAAAAAwBlFAAABVdYl0D0", "oauth_verifier"=>"gpsFMFCJQ9Q63dQtMtaHVqMWXFIK3ViE"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/clowfigner13"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 18:50:53 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 18:50:53 UTC], ["id", 61]]
  [1m[35m (123.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 128ms (ActiveRecord: 123.8ms)


Started GET "/" for ::1 at 2016-07-10 21:50:53 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 30.7ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 22:06:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Mz7Dw9oYJDmluCjLaVNXNuywWHrG08ZJRlZqAVaKRh9dFES0AhhDezXTnwpYj4U116n85k+KpwgJtzMQKxw+Tw=="}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 35ms (ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2016-07-10 22:06:12 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (20.7ms)
Completed 200 OK in 197ms (Views: 195.4ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 22:06:16 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 22:06:17 +0300
Started GET "/users/auth/twitter/callback?oauth_token=u9y4YgAAAAAAwBlFAAABVdYz-dM&oauth_verifier=5MpfHww5kYRvyZIVNVPc6URVnCIgeurc" for ::1 at 2016-07-10 22:06:20 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"u9y4YgAAAAAAwBlFAAABVdYz-dM", "oauth_verifier"=>"5MpfHww5kYRvyZIVNVPc6URVnCIgeurc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/clowfigner13"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 19:06:22 UTC], ["last_sign_in_at", 2016-07-10 18:50:53 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 19:06:22 UTC], ["id", 61]]
  [1m[35m (120.6ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 127ms (ActiveRecord: 121.9ms)


Started GET "/" for ::1 at 2016-07-10 22:06:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.4ms)


Started DELETE "/users/61" for ::1 at 2016-07-10 22:06:38 +0300
Processing by UsersController#destroy as HTML
  Parameters: {"authenticity_token"=>"B9b5GgbKcj+CQXjKQi0GN+T9dtkewW18GRw+P4qaH/7H+q4s6W9xBQQJFfqGVrz73DUaspFFSQkO4Dooz4Yz2w==", "id"=>"61"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 61]]
  [1m[35m (63.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users
Completed 302 Found in 70ms (ActiveRecord: 64.8ms)


Started GET "/users" for ::1 at 2016-07-10 22:06:38 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 61], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 26.3ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/twitter" for ::1 at 2016-07-10 22:06:40 +0300
Started GET "/users/auth/twitter" for ::1 at 2016-07-10 22:06:41 +0300
Started GET "/users/auth/twitter/callback?oauth_token=IbGKVwAAAAAAwBlFAAABVdY0WB8&oauth_verifier=90RckYTP34rLeUbjj3EMH042grxTBXmf" for ::1 at 2016-07-10 22:06:44 +0300
Processing by Users::OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"IbGKVwAAAAAAwBlFAAABVdY0WB8", "oauth_verifier"=>"90RckYTP34rLeUbjj3EMH042grxTBXmf"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."url" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["url", "https://twitter.com/clowfigner13"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "https://twitter.com/clowfigner13@tw.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "provider", "url", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "Михаил Нагараев"], ["provider", "twitter"], ["url", "https://twitter.com/clowfigner13"], ["created_at", 2016-07-10 19:06:45 UTC], ["updated_at", 2016-07-10 19:06:45 UTC], ["email", "https://twitter.com/clowfigner13@tw.com"], ["encrypted_password", "$2a$11$LS/gn9uNDjRMpVd2ivJHb.RoBHi2Mxxt9RD6lStgXvvJn.jHD69a2"]]
  [1m[35m (60.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sign_in_count" = ?, "current_sign_in_at" = ?, "last_sign_in_at" = ?, "current_sign_in_ip" = ?, "last_sign_in_ip" = ? WHERE "users"."id" = ?[0m  [["updated_at", 2016-07-10 19:06:45 UTC], ["sign_in_count", 1], ["current_sign_in_at", 2016-07-10 19:06:45 UTC], ["last_sign_in_at", 2016-07-10 19:06:45 UTC], ["current_sign_in_ip", "::1"], ["last_sign_in_ip", "::1"], ["id", 63]]
  [1m[35m (64.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 265ms (ActiveRecord: 126.1ms)


Started GET "/" for ::1 at 2016-07-10 22:06:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 63], ["LIMIT", 1]]
Completed 200 OK in 50ms (Views: 49.0ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 22:06:51 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZkErsHrZx5TGHoOur10FTVH7Kl42oziFwW2r7TZnigOIZ5O9jVIJVXMVusYCZJRTZQJmj5CY7VeTKrwPT7f/tg=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 63], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 22:06:51 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (9.1ms)
Completed 200 OK in 39ms (Views: 37.4ms | ActiveRecord: 0.2ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:11:15 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:11:15 +0300
Started GET "/users/auth/facebook/callback?code=AQA4ZFuNsiF6Za3zRsVOE3NvPb-iVz0PO4xLgRvMNKagUE8usFL4ncrkWVNIm1jJ0XqM8SD6S3rFQqXd-FyYdemTEw4arCW3kZJkmaWbO4cGAv6-KFKzQ167MFt85ZE9zZdJjBbVvPcTFGbO-1h56VbVPI-j-qbYRZyje2tGEzx1fxB4IdAWxhCtHteQy4QL9ChN4UgsdkFnfMLUT_550QkeWXip2Yx-80XC62xXGWhbNxIfhITbfglUhNqg8BOQVGHCIL6uEkDB6MpkXnPedfYdzmPSOPfaloVF3PoxMpbkEpcmwCkuX4HDiAMxpBOBuRZLNDuW7aheasQIl2kk3GyL&state=b57c0c19dec6524232b04e3aeaf2e7afc9479fb05243684c" for ::1 at 2016-07-10 22:11:15 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQA4ZFuNsiF6Za3zRsVOE3NvPb-iVz0PO4xLgRvMNKagUE8usFL4ncrkWVNIm1jJ0XqM8SD6S3rFQqXd-FyYdemTEw4arCW3kZJkmaWbO4cGAv6-KFKzQ167MFt85ZE9zZdJjBbVvPcTFGbO-1h56VbVPI-j-qbYRZyje2tGEzx1fxB4IdAWxhCtHteQy4QL9ChN4UgsdkFnfMLUT_550QkeWXip2Yx-80XC62xXGWhbNxIfhITbfglUhNqg8BOQVGHCIL6uEkDB6MpkXnPedfYdzmPSOPfaloVF3PoxMpbkEpcmwCkuX4HDiAMxpBOBuRZLNDuW7aheasQIl2kk3GyL", "state"=>"b57c0c19dec6524232b04e3aeaf2e7afc9479fb05243684c"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 19:11:16 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 19:11:16 UTC], ["id", 59]]
  [1m[35m (73.1ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 79ms (ActiveRecord: 74.1ms)


Started GET "/" for ::1 at 2016-07-10 22:11:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (18.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 59], ["LIMIT", 1]]
Completed 200 OK in 51ms (Views: 49.8ms | ActiveRecord: 0.4ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 22:11:20 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"RYcNI2pAiC4CZqx+xu294rH+W/UGEv9WLdHySRLasry5QYbucp0FJaUe/Yu3pwdDIqL5Be5jFnleQ6eglHr1WQ=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 59], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2016-07-10 22:11:20 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (12.9ms)
Completed 200 OK in 42ms (Views: 40.8ms | ActiveRecord: 0.7ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:11:42 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:11:42 +0300
Started GET "/users/auth/facebook/callback?code=AQAVKn8tOX1dyohHq6rDk0cc8cFP1qgancz4xlZHle0eD-Pe7qxGj-gCIF8kN3TEkOglHOxYUyv3bcKVYuK2BgTncLG3h0r08_48LpTPilu0ejskBFqhGcthYRmd7cAOA7zKNImhlGOheRYjRq0BjhXDlrMorVQ4Lv0m7PbyxyJ-z2vZhdAfHB9rrr4FkqtQ32a6GIS6vL0hTnJoaZQ1HDPV0D5AiXgfMNQKUUSI9s1vuXlaBe00tDUOHASXX8Ze9sQvVZZsIUr0_BD-qR-6D1yvdRy7RgpEZw91QmIM8TeD3WsbFWzqwkNTBQ7ReaCHkVFPMsZ1wW4ZUJKiq5cJLci6&state=adff3e513b0e1d51ccea9f90e02a74dcb01809da33f0fbe8" for ::1 at 2016-07-10 22:11:45 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQAVKn8tOX1dyohHq6rDk0cc8cFP1qgancz4xlZHle0eD-Pe7qxGj-gCIF8kN3TEkOglHOxYUyv3bcKVYuK2BgTncLG3h0r08_48LpTPilu0ejskBFqhGcthYRmd7cAOA7zKNImhlGOheRYjRq0BjhXDlrMorVQ4Lv0m7PbyxyJ-z2vZhdAfHB9rrr4FkqtQ32a6GIS6vL0hTnJoaZQ1HDPV0D5AiXgfMNQKUUSI9s1vuXlaBe00tDUOHASXX8Ze9sQvVZZsIUr0_BD-qR-6D1yvdRy7RgpEZw91QmIM8TeD3WsbFWzqwkNTBQ7ReaCHkVFPMsZ1wW4ZUJKiq5cJLci6", "state"=>"adff3e513b0e1d51ccea9f90e02a74dcb01809da33f0fbe8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Mikhail  Nagaraev"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 19:11:46 UTC], ["sign_in_count", 2], ["updated_at", 2016-07-10 19:11:46 UTC], ["id", 58]]
  [1m[35m (60.4ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 72ms (ActiveRecord: 61.2ms)


Started GET "/" for ::1 at 2016-07-10 22:11:46 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (7.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 58], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 27.6ms | ActiveRecord: 0.3ms)


Started DELETE "/users/sign_out" for ::1 at 2016-07-10 22:15:16 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"5KhnYzBy0BIXWlXXKffbWaG1YOVmRxzsdA2k67XG0uyoPkACq7dwGGxJkyJIsYFpROcYiBh4i+5J+M48ByhKlA=="}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 58], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2016-07-10 22:15:16 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (8.8ms)
Completed 200 OK in 34ms (Views: 33.2ms | ActiveRecord: 0.4ms)


Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:15:18 +0300
Started GET "/users/auth/facebook" for ::1 at 2016-07-10 22:15:18 +0300
Started GET "/users/auth/facebook/callback?code=AQBljI4tRaM_nXxihd27PHAG8YAsmidSvkjacr1DhhE5c3dODOLEodzeOs0b3B6Tz68hMDswPvmz_hiBSZMpRRajASkStKeDgpUOvd6P9nVa18Ug3RUCTHjNFgcZqIoSdjQ2RQtvEVIF4AI3_3mvjAKSp23SN85pJ8GGYo31GRvfl0bYx9StUMU_fFF4Ad8Nu-ZyRjfZsPQNpFIEMmih1W4olyz80S4NXs-zMjBWruhE5C9PhIxg5vvvix9KE6d6twL8NAQoDNyQXk8M4gPLmfRJj9SkO0ghM1z2FVI0tLvDbcW-AatJvxFv7MED0dQHq0Zx3MgzyI0wTeww9ynOLKpQ&state=721422039d904f78ce5d90eb5cca1fe8385923d19310ac1e" for ::1 at 2016-07-10 22:15:23 +0300
Processing by Users::OmniauthCallbacksController#facebook as HTML
  Parameters: {"code"=>"AQBljI4tRaM_nXxihd27PHAG8YAsmidSvkjacr1DhhE5c3dODOLEodzeOs0b3B6Tz68hMDswPvmz_hiBSZMpRRajASkStKeDgpUOvd6P9nVa18Ug3RUCTHjNFgcZqIoSdjQ2RQtvEVIF4AI3_3mvjAKSp23SN85pJ8GGYo31GRvfl0bYx9StUMU_fFF4Ad8Nu-ZyRjfZsPQNpFIEMmih1W4olyz80S4NXs-zMjBWruhE5C9PhIxg5vvvix9KE6d6twL8NAQoDNyQXk8M4gPLmfRJj9SkO0ghM1z2FVI0tLvDbcW-AatJvxFv7MED0dQHq0Zx3MgzyI0wTeww9ynOLKpQ", "state"=>"721422039d904f78ce5d90eb5cca1fe8385923d19310ac1e"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["username", "Yury Strukov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "last_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", 2016-07-10 19:15:23 UTC], ["last_sign_in_at", 2016-07-10 19:11:16 UTC], ["sign_in_count", 3], ["updated_at", 2016-07-10 19:15:23 UTC], ["id", 59]]
  [1m[35m (67.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 72ms (ActiveRecord: 68.8ms)


Started GET "/" for ::1 at 2016-07-10 22:15:23 +0300
Processing by UsersController#index as HTML
  Rendering users/index.html.haml within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.haml within layouts/application (6.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 59], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 35.2ms | ActiveRecord: 0.3ms)


